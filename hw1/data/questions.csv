Id,Reputation,CreationDate,DisplayName,LastAccessDate,WebsiteUrl,Location,AboutMe,Views,UpVotes,DownVotes,ProfileImageUrl,EmailHash,AccountId,Id,PostTypeId,AcceptedAnswerId,ParentId,CreationDate,DeletionDate,Score,ViewCount,Body,OwnerUserId,OwnerDisplayName,LastEditorUserId,LastEditorDisplayName,LastEditDate,LastActivityDate,Title,Tags,AnswerCount,CommentCount,FavoriteCount,ClosedDate,CommunityOwnedDate,ContentLicense
"115145","967227","2009-05-31 16:20:08","CommonsWare","2022-10-29 23:14:28","https://commonsware.com","Pennsylvania, United States","<p>Mark Murphy, founder of CommonsWare, writes a lot.</p>
<h2>Books</h2>
<p>From 2008 through 2021, Mark wrote a series of books on Android app development. These books are now available for free download from <a href=""https://commonsware.com/catalog"" rel=""nofollow noreferrer"">the CommonsWare site</a>.</p>
<p>His most recent books have been focused on second-generation Android app development (Kotlin and the Android Jetpack):</p>
<ul>
<li><p><a href=""https://commonsware.com/Jetpack"" rel=""nofollow noreferrer""><em>Elements of Android Jetpack</em></a>, a new introductory book on Android app development, focused on second-generation techniques.</p>
</li>
<li><p><a href=""https://commonsware.com/AndExplore"" rel=""nofollow noreferrer""><em>Exploring Android</em></a>, a series of step-by-step tutorials for building an Android app from scratch. This book demonstrates app development using Kotlin, coroutines, and the Jetpack libraries.</p>
</li>
<li><p><a href=""https://commonsware.com/Room"" rel=""nofollow noreferrer""><em>Elements of Android Room</em></a>, to help you incorporate Google's reactive object wrapper around SQLite.</p>
</li>
<li><p><a href=""https://commonsware.com/R"" rel=""nofollow noreferrer""><em>Elements of Android R</em></a>, to help you deal with the changes introduced by Android 11 (code-named &quot;R&quot;). It covers everything from scoped storage changes to data access auditing to sharing UIs between apps to bubbles.</p>
</li>
<li><p><a href=""https://commonsware.com/Kotlin"" rel=""nofollow noreferrer""><em>Elements of Kotlin</em></a>, a guide to the Kotlin programming language, which is rapidly gaining in popularity for Android app development.</p>
</li>
<li><p><a href=""https://commonsware.com/Coroutines"" rel=""nofollow noreferrer""><em>Elements of Kotlin Coroutines</em></a>, exploring Kotlin's new
first-class reactive programming system.</p>
</li>
</ul>
<p>In the beginning, Android development was focused on Java and, partially, on the Android Support Library. Mark's earliest books share that focus:</p>
<ul>
<li><p><a href=""https://commonsware.com/Android"" rel=""nofollow noreferrer""><em>The Busy Coder's Guide to Android Development</em></a>, the first and largest book on Android app programming</p>
</li>
<li><p><a href=""https://commonsware.com/AndroidArch"" rel=""nofollow noreferrer""><em>Android's Architecture Components</em></a></p>
</li>
<li><p><a href=""https://commonsware.com/GraphQL"" rel=""nofollow noreferrer""><em>GraphQL and Android</em></a></p>
</li>
</ul>
<h2>Things Other Than Books</h2>
<p>He runs the <a href=""https://jetc.dev"" rel=""nofollow noreferrer""><code>jetc.dev</code></a> weekly newsletter for Jetpack Compose.</p>
<p>Heck, he even has <a href=""http://commonsware.com/blog"" rel=""nofollow noreferrer"">a blog</a>.</p>
<p>All code in Stack Overflow questions, answers, or comments written by Mark Murphy are hereby licensed under <a href=""http://www.apache.org/licenses/LICENSE-2.0"" rel=""nofollow noreferrer"">the Apache Software License 2.0</a>, unless otherwise noted where that code appears on Stack Overflow.</p>
","269231","13193","7886","https://i.stack.imgur.com/wDnd8.png?s=128&g=1","","39846","62969917","1","62969918","","2020-07-18 14:48:59","","216","145921","<p>All of a sudden, I am getting this build error in my Android project:</p>
<pre><code>unexpected element &lt;queries&gt; found in &lt;manifest&gt;
</code></pre>
<p>How do I fix it?</p>
","115145","","115145","user10563627","2022-08-19 16:46:16","2022-08-19 16:46:16","How can I fix ""unexpected element <queries> found in <manifest>"" error?","<android><android-gradle-plugin><android-manifest><manifest>","7","1","30","","","CC BY-SA 4.0"
"85371","358430","2009-03-31 21:38:26","sehe","2022-10-29 15:03:44","","Netherlands","<p>I'm a developer at heart.</p>
<p>I love C++ even though it's bad for you :)</p>
<p>I love many more languages, but I specialize in C++.</p>
<p>At stackoverflow I've taken to monitoring the <a href=""/questions/tagged/boost"" class=""post-tag"" title=""show questions tagged &#39;boost&#39;"" rel=""tag"">boost</a> tag, mostly. In the past I've used <a href=""https://www.livecoding.tv/sehe/"" rel=""nofollow noreferrer"">LiveCoding.tv</a> [now defunct] to live-stream the process of answering. This often involves</p>
<ul>
<li>writing a Proof-Of-Concept</li>
<li>doing actual benchmarking (right)</li>
<li>reproducing a specific problem (and root-causing/fixing/finding a workaround)</li>
</ul>
<p>I got the impression more than once that people think that &quot;we, the experts&quot; use some kind of <em><strong>magic fairy dust</strong></em> and promptly post the solutions without breaking a sweat, I thought it would be nice to show the reality.</p>
<blockquote>
<p><em>Sadly they removed all of the few hundreds hours of stream after they changed-over their business model a few times. There will be quite a few now-dead links to streams in the comments at my answers. I'm sorry.</em></p>
</blockquote>
","34058","16475","1615","","","31164","65648897","1","65649022","","2021-01-10 00:09:36","","114","5295","<p>I ran into this while debugging <a href=""https://stackoverflow.com/questions/65638680/using-boost-strong-typedef-to-differentiate-arg-types-but-causing-seg-fault/65643014?noredirect=1#comment116069484_65643014"">this question</a>.</p>
<p>I trimmed it down all the way to just using <a href=""https://www.boost.org/doc/libs/1_75_0/libs/utility/operators.htm"" rel=""noreferrer"">Boost Operators</a>:</p>
<ol>
<li><p><strong>Compiler Explorer <a href=""https://godbolt.org/z/q89brM"" rel=""noreferrer"">C++17</a> <a href=""https://godbolt.org/z/szYx9E"" rel=""noreferrer"">C++20</a></strong></p>
<pre><code>#include &lt;boost/operators.hpp&gt;

struct F : boost::totally_ordered1&lt;F, boost::totally_ordered2&lt;F, int&gt;&gt; {
    /*implicit*/ F(int t_) : t(t_) {}
    bool operator==(F const&amp; o) const { return t == o.t; }
    bool operator&lt; (F const&amp; o) const { return t &lt;  o.t; }
  private: int t;
};

int main() {
    #pragma GCC diagnostic ignored &quot;-Wunused&quot;
    F { 42 } == F{ 42 }; // OKAY
    42 == F{42};         // C++17 OK, C++20 infinite recursion
    F { 42 } == 42;      // C++17 OK, C++20 infinite recursion
}
</code></pre>
<p>This program compiles and runs fine with C++17 (ubsan/asan enabled) in both GCC and Clang.</p>
</li>
<li><p>When you change the <em>implicit</em> constructor to <code>explicit</code>, the problematic lines obviously <strong><a href=""https://godbolt.org/z/hq4fve"" rel=""noreferrer"">no longer compile on C++17</a></strong></p>
</li>
</ol>
<p>Surprisingly both versions <strong>compile on C++20 (<a href=""https://godbolt.org/z/onMzo5"" rel=""noreferrer"">v1</a> and <a href=""https://godbolt.org/z/b1Pav5"" rel=""noreferrer"">v2</a>)</strong>, but they lead to <strong>infinite recursion</strong> (crash or tight loop, depending on optimization level) on the two lines that wouldn't compile on C++17.</p>
<p>Obviously this kind of silent bug creeping in by upgrading to C++20 is worrisome.</p>
<p>Questions:</p>
<ul>
<li>Is this c++20 behaviour conformant (I expect so)</li>
<li>What exactly is interfering? I suspect it might be due to c++20's new &quot;spaceship operator&quot; support, but don't understand <strong>how</strong> it changes the behaviour of this code.</li>
</ul>
","85371","","3889449","","2021-03-06 02:51:07","2021-03-06 02:51:07","C++20 behaviour breaking existing code with equality operator?","<c++><c++17><c++20><spaceship-operator>","1","4","21","","","CC BY-SA 4.0"
"23354","994260","2008-09-29 05:46:02","Marc Gravell","2022-10-29 22:46:04","http://blog.marcgravell.com","Forest of Dean, United Kingdom","<p>e-mail: marc.gravell@gmail.com<br/>
blog: <a href=""http://blog.marcgravell.com/"" rel=""nofollow noreferrer"">http://blog.marcgravell.com/</a><br/>
twitter: <a href=""http://twitter.com/marcgravell"" rel=""nofollow noreferrer"">@marcgravell</a><br/>
</p>
<p>C# programmer and MVP, with a keen interest in all things code.
Particular areas:<ul>
<li><a href=""https://github.com/StackExchange/dapper-dot-net"" rel=""nofollow noreferrer"">Dapper</a> (<a href=""/questions/tagged/dapper"" class=""post-tag"" title=""show questions tagged &#39;dapper&#39;"" rel=""tag"">dapper</a>)
<li><a href=""https://github.com/StackExchange/StackExchange.Redis"" rel=""nofollow noreferrer"">StackExchange.Redis</a> (<a href=""/questions/tagged/stackexchange.redis"" class=""post-tag"" title=""show questions tagged &#39;stackexchange.redis&#39;"" rel=""tag"">stackexchange.redis</a>)
<li><a href=""http://code.google.com/p/protobuf-net/"" rel=""nofollow noreferrer"">Protocol Buffers</a> (<a href=""/questions/tagged/protobuf-net"" class=""post-tag"" title=""show questions tagged &#39;protobuf-net&#39;"" rel=""tag"">protobuf-net</a>)
</ul></p>
","320609","27181","1115","https://i.stack.imgur.com/CrVFH.png?s=128&g=1","","11975","67289057","1","67290012","","2021-04-27 18:52:58","","53","3775","<p>The following &quot;fix&quot; is very confusing to me; the scenario here is conditionally deciding whether to use the stack vs a leased buffer depending on the size - a pretty niche but sometimes-necessary optimization, however: with the &quot;obvious&quot; implementation (number 3, deferring definite assignment until we actually want to assign it), the compiler complains with CS8353:</p>
<blockquote>
<p>A result of a stackalloc expression of type 'Span&lt;int&gt;' cannot be used in this context because it may be exposed outside of the containing method</p>
</blockquote>
<p>The short repro (a complete repro follows) is:</p>
<pre class=""lang-cs prettyprint-override""><code>// take your pick of:
// Span&lt;int&gt; s = stackalloc[0]; // works
// Span&lt;int&gt; s = default; // fails
// Span&lt;int&gt; s; // fails

if (condition)
{   // CS8353 happens here
    s = stackalloc int[size];
}
else
{
    s = // some other expression
}
// use s here
</code></pre>
<p>The only thing I can think here is that the compiler is <em>really</em> flagging that the <code>stackalloc</code> is escaping the context in which the <code>stackalloc</code> happens, and is waving a flag to say &quot;I can't prove whether this is going to be safe later in the method&quot;, but by having the <code>stackalloc[0]</code> at the start, we're pushing the &quot;dangerous&quot; context scope higher, and now the compiler is happy that it never escapes the &quot;dangerous&quot; scope (i.e. it never actually leaves the method, since we're declaring at the top scope). Is this understanding correct, and it is just a compiler limitation in terms of what can be proven?</p>
<p>What's <em>really</em> interesting (to me) is that the <code>= stackalloc[0]</code> is fundamentally a no-op <em>anyway</em>, meaning that <em>at least in the compiled form</em> the working number 1 <code>= stackalloc[0]</code> is identical to the failing number 2 <code>= default</code>.</p>
<p>Full repro (also <a href=""https://sharplab.io/#v2:EYLgxg9gTgpgtADwGwBYA0AXEBLANgHwAEAmARgFgAoQgBgAJDSA6AIQFcAzDmKAZwG4qVQgGYGpJA2J0AwlQDeVOsoZjGkwijoBlDAEMwAawCCuXBDAAxNgDsAFNhsY6kWxgCUSlYsoq/dAHoAugBiUjoMAAtsXjoYulwYAHM9XDQ6ACs2XmdHbAxsVOwALxhY2L0KugATGA49NlxnXgAHPRsvfx02mwAeRwwAPjpYgF4R/SNU8zA4pwBtGgBdQV8uuk7/INDpKPj9s2TUkDoeKGhZbQAOEQBWERPjOlheRucIDjo9CYNDaYtTggWi9eNgIB01l1th8IgBPFowOgAcm0PX6TkGSJc7RsEGcwER2Rg1TmEWisUgThgCHxMDADV4iPydAAtnpYZs/NsCYCWhBGSSIGwMKDanQYVFEZT9HkbElWTAohBqpyVNtUe10UMRnRxrV6m9VusNpCtsEQmJKnFYntYnZUrwIHFDik0nFak5sPTcKcoOcoJ5TVzghq+gNhgJVcoo3MMPMluKAG48UGlEnjGyNXBG9YYKAcoPeGN+bCfOyuJx0Xp0ETEQPGvzyNXBGTXO5iSJ6FoImwVZy2n5TMwWYvrMaDv7D2YDeYVjArUfKAC+i9OuEZq58DfWEGTfBKxN1dGMfvZAAUIBBcFrBkxtJ3YNUmAAlGBOctCpzuHPbvzjmwwAA7t0mrhnYu4pge1TpDQ6Rzt+q4roWXQXi0jR6BgMB2LwCHIf4AAiEDaBALKKtEcoAOr5JE2G4caSHGhwjjTAWxpbr+pZ0OBe6poe8S4s4mZmPWv7sb+KgnlA56Xte4Z3g+xIvoqbBQPYEH7mmdG/gx6w6cuQimsC2CJhhiLqAwWioehmF2KGN4jCJXSjMMUTnMBAHAQAcniACSLItIkpFUtUACiCBgDALQFOCdjfoEwSAZ2mF7psRkmZh4gaFohHEaReyUdRdivno1QAPI2LgsJ2eGDkxs5ZJuXQHl0N5GB+QFMBBZhoXhZF0X2HF2yJaZKWmps2wCTAJz3hAgHeaVLQABpfDYJIzXNEALQAmi4JEtHgTIegU3qVZk2RYONwS4NUMx6EwsSwXM+QQMAGQgWGGLpNdMxMDQmzmZoOiRLN81LbFmxif41UYjq4w5L8/zTgsyw/gRREkWRjhJFRUS0ajemZRZQMg5tLRbeDpqQ340PauO+oNE0qN+DlGP5djhU4fjVBLkAA="" rel=""noreferrer"">available on SharpLab to look at the IL</a>).</p>
<pre class=""lang-cs prettyprint-override""><code>using System;
using System.Buffers;

public static class C
{
    public static void StackAllocFun(int count)
    {
        // #1 this is legal, just initializes s as a default span
        Span&lt;int&gt; s = stackalloc int[0];
        
        // #2 this is illegal: error CS8353: A result of a stackalloc expression
        // of type 'Span&lt;int&gt;' cannot be used in this context because it may
        // be exposed outside of the containing method
        // Span&lt;int&gt; s = default;
        
        // #3 as is this (also illegal, identical error)
        // Span&lt;int&gt; s;
        
        int[] oversized = null;
        try
        {
            if (count &lt; 32)
            {   // CS8353 happens at this stackalloc
                s = stackalloc int[count];
            }
            else
            {
                oversized = ArrayPool&lt;int&gt;.Shared.Rent(count);
                s = new Span&lt;int&gt;(oversized, 0, count);
            }
            Populate(s);
            DoSomethingWith(s);
        }
        finally
        {
            if (oversized is not null)
            {
                ArrayPool&lt;int&gt;.Shared.Return(oversized);
            }
        }
    }

    private static void Populate(Span&lt;int&gt; s)
        =&gt; throw new NotImplementedException(); // whatever
    private static void DoSomethingWith(ReadOnlySpan&lt;int&gt; s)
        =&gt; throw new NotImplementedException(); // whatever
    
    // note: ShowNoOpX and ShowNoOpY compile identically just:
    // ldloca.s 0, initobj Span&lt;int&gt;, ldloc.0
    static void ShowNoOpX()
    {
        Span&lt;int&gt; s = stackalloc int[0];
        DoSomethingWith(s);
    }
    static void ShowNoOpY()
    {
        Span&lt;int&gt; s = default;
        DoSomethingWith(s);
    }
}
</code></pre>
","23354","","23354","","2021-04-27 19:04:08","2022-04-25 07:56:58","Why does a zero-length stackalloc make the C# compiler happy to allow conditional stackallocs?","<c#><stackalloc>","2","0","7","","","CC BY-SA 4.0"
"7429447","164096","2017-01-17 08:59:30","undetected Selenium","2022-10-29 19:54:10","","Pune, Maharashtra, India","<p>A full stack test automation engineer and a web security analyst working with Selenium (Java/Python).</p>
<ul>
<li>Owner of <a href=""https://chat.stackoverflow.com/rooms/223360/selenium""><em><strong>Selenium</strong></em></a> room &amp; top answerer in <a href=""https://stackoverflow.com/tags/selenium/topusers""><strong>selenium</strong></a> and <a href=""https://stackoverflow.com/tags/selenium-webdriver/topusers""><strong>selenium-webdriver</strong></a> tags.</li>
<li>For <a href=""/questions/tagged/selenium"" class=""post-tag"" title=""show questions tagged &#39;selenium&#39;"" rel=""tag"">selenium</a> related <em>assignments</em> and <em>business queries</em> I'm reachable through <em><strong>debanjan.selenium@gmail.com</strong></em>.</li>
<li>If any of my discussion / article was helpful, you may like to...</li>
</ul>
<p><a href=""https://www.paypal.com/paypalme/debanjan786"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/Ou6Ha.png"" alt=""Buy me a coffee"" /></a> | <em>or you can also</em> |<strong>GPay</strong><img src=""https://i.stack.imgur.com/oqdR3s.jpg"" alt=""UPI ID IDBI"" /></p>
<ul>
<li>You can <a href=""https://saythanks.io/to/debanjan.selenium"" rel=""nofollow noreferrer""><em>Send a Thank You note to me!</em></a> too...</li>
<li>I'm available through <a href=""https://www.linkedin.com/in/debanjanb/"" rel=""nofollow noreferrer""><em><strong>LinkedIn</strong></em></a> as well.</li>
</ul>
","31606","7428","5679","https://i.stack.imgur.com/w4d7E.png?s=128&g=1","","10049107","60114639","1","60140212","","2020-02-07 13:38:47","","47","55889","<p>We recently upgraded our test environment with ChromeDriver v80.0.3987.16 and Chrome v80.0.3987.87 (Official Build) (64-bit) and after the upgradation even the minimal program is producing a lot of these SEVERE logs:</p>

<pre><code>[1581082019.282][SEVERE]: Timed out receiving message from renderer: 0.100
[1581082020.245][SEVERE]: Timed out receiving message from renderer: 0.100
</code></pre>

<p>Earlier these messages were observed occasionally till with ChromeDriver v79.0 / Chrome v79.0 combo.</p>

<p>Minimal Code Block:</p>

<pre><code>public class chromeDemo 
{
    public static void main(String[] args) 
    {
            System.setProperty(""webdriver.chrome.driver"", ""C:\\Utility\\BrowserDrivers\\chromedriver.exe"");
            WebDriver driver =  new ChromeDriver();
            driver.get(""https://www.google.com/"");
            driver.quit();
    }
}
</code></pre>

<p>Console Output:</p>

<pre><code>Starting ChromeDriver 80.0.3987.16 (320f6526c1632ad4f205ebce69b99a062ed78647-refs/branch-heads/3987@{#185}) on port 9194
Only local connections are allowed.
Please protect ports used by ChromeDriver and related test frameworks to prevent access by malicious code.
Feb 07, 2020 6:56:57 PM org.openqa.selenium.remote.ProtocolHandshake createSession
INFO: Detected dialect: W3C
[1581082019.282][SEVERE]: Timed out receiving message from renderer: 0.100
[1581082020.245][SEVERE]: Timed out receiving message from renderer: 0.100
[1581082020.430][SEVERE]: Timed out receiving message from renderer: 0.100
[1581082020.531][SEVERE]: Timed out receiving message from renderer: 0.100
[1581082020.632][SEVERE]: Timed out receiving message from renderer: 0.100
[1581082020.734][SEVERE]: Timed out receiving message from renderer: 0.100
[1581082020.835][SEVERE]: Timed out receiving message from renderer: 0.100
[1581082021.364][SEVERE]: Timed out receiving message from renderer: 0.100
[1581082021.544][SEVERE]: Timed out receiving message from renderer: 0.100
[1581082021.647][SEVERE]: Timed out receiving message from renderer: 0.100
[1581082021.748][SEVERE]: Timed out receiving message from renderer: 0.100
[1581082021.850][SEVERE]: Timed out receiving message from renderer: 0.100
[1581082021.952][SEVERE]: Timed out receiving message from renderer: 0.100
</code></pre>

<p>Anyone facing the same? 
Was there any change in ChromeDriver/Chrome v80 with respect to ChromeDriver/Chrome v79? Any clues?</p>
","7429447","","7429447","","2020-02-07 14:08:00","2021-06-07 02:11:15","Timed out receiving message from renderer: 0.100 log messages using ChromeDriver and Chrome v80 through Selenium Java","<selenium><google-chrome><selenium-chromedriver><chromium><renderer>","4","13","6","","","CC BY-SA 4.0"
"1505939","136326","2012-07-06 06:35:47","M.M","2022-10-30 00:58:58","","New Zealand","<p>Professional C programmer for 21 years, mostly on embedded systems. Some Windows C++ development also.</p>
","15931","14261","5652","","","1631513","61590721","1","61590855","","2020-05-04 11:03:34","","45","1650","<p>In C++17 there is normative text [class.mem]/17:</p>

<blockquote>
  <p>Non-static data members of a (non-union) class with the same access control (Clause 14) are allocated so
  that later members have higher addresses within a class object. The order of allocation of non-static data members with different access control is unspecified.</p>
</blockquote>

<p>Also there is [class.mem]/24:</p>

<blockquote>
  <p>If a standard-layout class object has any non-static data members, its address is the same as the address
  of its first non-static data member</p>
</blockquote>

<p>Here are two examples:</p>

<pre><code>struct A { int x, y, z; } a;
struct F { public: int p; private: int q; public: int r; } f;
</code></pre>

<p>According to the above standard text, C++17 guaranteed <code>&amp;a.x &lt; &amp;a.y</code>, <code>&amp;a.y &lt; &amp;a.z</code>, and <code>&amp;f.p &lt; &amp;f.r</code>  (but did NOT guarantee <code>&amp;f.p &lt; &amp;f.q</code>, since <code>F</code> is not standard-layout so class.mem/24 does not apply).</p>

<hr>

<p>However, in C++20 final working draft N4860, there has been a change as per <a href=""http://open-std.org/JTC1/SC22/WG21/docs/papers/2019/p1510r0.html#2404"" rel=""noreferrer"">CWG 2404</a>. The [class.mem]/17 has been turned into a Note. However, notes are non-normative in ISO standards (meaning the compiler vendor can disregard them) . And I cannot find any other text that might apply.</p>

<p><strong>My question is:</strong> does C++20 still somewhere specify (normatively) the guarantees <code>&amp;a.y &lt; &amp;a.z</code> and/or <code>&amp;f.p &lt; &amp;f.r</code> ?  Or does the compiler now have the licence to reorder class members in all cases except for the first subobject of a standard-layout class?</p>

<p>Assuming there are no further changes between N4860 and the published standard, I guess.</p>
","1505939","","15168","","2020-05-06 02:24:58","2020-05-06 02:24:58","Does C++20 remove the requirement for class members to be in ascending order?","<c++><class><language-lawyer><c++20><standard-layout>","1","0","2","","","CC BY-SA 4.0"
"34509","486660","2008-11-05 00:38:23","Johannes Schaub - litb","2022-10-29 08:24:18","http://bloglitb.blogspot.com","Frankfurt, Germany","<p>I'm a C++ programmer, interested in linux, compilers and toolchains and generally the embedded software stack. </p>

<p><hr>
Standardese answers:</p>

<ul>
<li><a href=""http://stackoverflow.com/questions/2910979/how-is-base-of-works"">How does <code>boost::is_base_of</code> work?</a>
<li><a href=""http://stackoverflow.com/questions/4420828/another-bug-in-g-clang-c-templates-are-fun"">Injected class name and constructor lookup weirdness</a>
<li><a href=""http://stackoverflow.com/questions/3519282/why-is-this-ambiguity-here"">
What happens when <code>op[]</code> and <code>op T*</code> are both there.</a>
</ul>

<p>FAQ answers:</p>

<ul>
<li><a href=""http://stackoverflow.com/questions/610245/where-to-put-the-template-and-typename-on-dependent-names"">Where to put ""template"" and ""typename"" on dependent names (now also covers C++11)</a>
<li><a href=""http://stackoverflow.com/questions/4176328/undefined-behavior-and-sequence-points/4190054#4190054"">Undefined behavior and sequence points</a>
</ul>

<p><p>
Favourite answers:</p>

<ul>
<li><a href=""http://stackoverflow.com/questions/2425728/delete-operator-in-c/2425771#2425771"">Plain <code>new</code>, <code>new[]</code>, <code>delete</code> and <code>delete[]</code> in a nutshell.</a>
<li><a href=""http://stackoverflow.com/a/13168668/34509"">Assertion failure on <code>T(a)</code> but allowing <code>T t(a)</code> - forbids (accidental) temporaries.</a>
<li><a href=""http://stackoverflow.com/a/13332744/34509"">Explicitly instantiating a typedef to a class type</a>
<li><a href=""http://stackoverflow.com/questions/2419650/c-c-macro-template-blackmagic-to-generate-unique-name/2419715#2419715"">Doing <code>RAII</code> the lazy way.</a>
<li><a href=""http://stackoverflow.com/questions/400951/c-foreach-or-similar/400970#400970"">C for-each over arrays.</a>
<li><a href=""http://stackoverflow.com/questions/908830/isnt-cs-inline-totally-optional/910686#910686""><code>inline</code> and the ODR in C++</a>, and <a href=""http://stackoverflow.com/questions/2217628/multiple-definition-of-inline-functions-when-linking-static-libs/2218034#2218034""><code>inline</code> in C99</a>
</ul>
","118454","5076","2026","https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1","","16029","60150749","1","60151054","","2020-02-10 12:47:16","","44","2215","<p>I have a struct with many members of the same type, like this</p>

<pre><code>struct VariablePointers {
   VariablePtr active;
   VariablePtr wasactive;
   VariablePtr filename;
};
</code></pre>

<p>The problem is that if I forget to initialize one of the struct members (e.g. <code>wasactive</code>), like this:</p>

<pre><code>VariablePointers{activePtr, filename}
</code></pre>

<p>The compiler will not complain about it, but I will have one object that is partially initialized. How can I prevent this kind of error? I could add a constructor, but it would duplicate the list of variable twice, so I have to type all of this thrice!</p>

<p>Please also add <strong>C++11</strong> answers, if there's a solution for C++11 (currently I'm  restricted to that version). More recent language standards are welcome too, though!</p>
","34509","","34509","","2020-02-10 13:53:01","2020-03-09 16:12:21","Is it possible to prevent omission of aggregate initialization members?","<c++><aggregate-initialization>","5","23","5","","","CC BY-SA 4.0"
"85371","358430","2009-03-31 21:38:26","sehe","2022-10-29 15:03:44","","Netherlands","<p>I'm a developer at heart.</p>
<p>I love C++ even though it's bad for you :)</p>
<p>I love many more languages, but I specialize in C++.</p>
<p>At stackoverflow I've taken to monitoring the <a href=""/questions/tagged/boost"" class=""post-tag"" title=""show questions tagged &#39;boost&#39;"" rel=""tag"">boost</a> tag, mostly. In the past I've used <a href=""https://www.livecoding.tv/sehe/"" rel=""nofollow noreferrer"">LiveCoding.tv</a> [now defunct] to live-stream the process of answering. This often involves</p>
<ul>
<li>writing a Proof-Of-Concept</li>
<li>doing actual benchmarking (right)</li>
<li>reproducing a specific problem (and root-causing/fixing/finding a workaround)</li>
</ul>
<p>I got the impression more than once that people think that &quot;we, the experts&quot; use some kind of <em><strong>magic fairy dust</strong></em> and promptly post the solutions without breaking a sweat, I thought it would be nice to show the reality.</p>
<blockquote>
<p><em>Sadly they removed all of the few hundreds hours of stream after they changed-over their business model a few times. There will be quite a few now-dead links to streams in the comments at my answers. I'm sorry.</em></p>
</blockquote>
","34058","16475","1615","","","31164","66497269","1","","","2021-03-05 17:49:18","","44","3003","<p>To my surprise, I ran into another snag like <em><a href=""https://stackoverflow.com/questions/65648897/c20-behaviour-breaking-existing-code-with-equality-operator"">C++20 behaviour breaking existing code with equality operator?</a></em>.</p>
<p>Consider a simple case-insensitive key type, to be used with, e.g., <code>std::set</code> or <code>std::map</code>:</p>
<pre><code>// Represents case insensitive keys
struct CiKey : std::string {
    using std::string::string;
    using std::string::operator=;

    bool operator&lt;(CiKey const&amp; other) const {
        return boost::ilexicographical_compare(*this, other);
    }
};
</code></pre>
<p>Simple tests:</p>
<pre><code>using KeySet   = std::set&lt;CiKey&gt;;
using Mapping  = std::pair&lt;CiKey, int&gt;; // Same with std::tuple
using Mappings = std::set&lt;Mapping&gt;;

int main()
{
    KeySet keys { &quot;one&quot;, &quot;two&quot;, &quot;ONE&quot;, &quot;three&quot; };
    Mappings mappings {
        { &quot;one&quot;, 1 }, { &quot;two&quot;, 2 }, { &quot;ONE&quot;, 1 }, { &quot;three&quot;, 3 }
    };

    assert(keys.size() == 3);
    assert(mappings.size() == 3);
}
</code></pre>
<ul>
<li><p>Using C++17, both asserts pass (<a href=""https://godbolt.org/z/Ps5qo7"" rel=""noreferrer"">Compiler Explorer</a>).</p>
</li>
<li><p>Switching to C++20, the second assert fails (<a href=""https://godbolt.org/z/3asYvW"" rel=""noreferrer"">Compiler Explorer</a>)</p>
<blockquote>
<p>output.s: ./example.cpp:28: int main(): Assertion `mappings.size() ==
3' failed.</p>
</blockquote>
</li>
</ul>
<hr />
<h2>Obvious Workaround</h2>
<p>An obvious work-around is to conditionally supply <code>operator&lt;=&gt;</code> in C++20 mode: <a href=""https://godbolt.org/z/eK9oP5"" rel=""noreferrer"">Compile Explorer</a></p>
<pre><code>#if defined(__cpp_lib_three_way_comparison)
    std::weak_ordering operator&lt;=&gt;(CiKey const&amp; other) const {
        if (boost::ilexicographical_compare(*this, other)) {
            return std::weak_ordering::less;
        } else if (boost::ilexicographical_compare(other, *this)) {
            return std::weak_ordering::less;
        }
        return std::weak_ordering::equivalent;
    }
#endif
</code></pre>
<h2>Question</h2>
<p>It surprises me that I ran into another case of breaking changes - where C++20 changes behaviour of code without diagnostic.</p>
<p>On my <a href=""https://en.cppreference.com/w/cpp/utility/tuple/operator_cmp"" rel=""noreferrer"">reading of <code>std::tuple::operator&lt;</code></a> it should have worked:</p>
<blockquote>
<p>3-6) Compares <code>lhs</code> and <code>rhs</code> lexicographically by <code>operator&lt;</code>, that is,
compares the first elements, if they are equivalent, compares the
second elements, if those are equivalent, compares the third elements,
and so on. For non-empty tuples, (3) is equivalent to</p>
<pre><code>if (std::get&lt;0&gt;(lhs) &lt; std::get&lt;0&gt;(rhs)) return true;
if (std::get&lt;0&gt;(rhs) &lt; std::get&lt;0&gt;(lhs)) return false;
if (std::get&lt;1&gt;(lhs) &lt; std::get&lt;1&gt;(rhs)) return true;
if (std::get&lt;1&gt;(rhs) &lt; std::get&lt;1&gt;(lhs)) return false;
...
return std::get&lt;N - 1&gt;(lhs) &lt; std::get&lt;N - 1&gt;(rhs);
</code></pre>
</blockquote>
<p>I understand that technically these don't apply since C++20, and it gets replaced by:</p>
<blockquote>
<p>Compares <code>lhs</code> and <code>rhs</code> lexicographically by synthesized three-way
comparison (see below), that is, compares the first elements, if they
are equivalent, compares the second elements, if those are equivalent,
compares the third elements, and so on</p>
</blockquote>
<p>Together with</p>
<blockquote>
<p>The &lt;, &lt;=, &gt;, &gt;=, and != operators are synthesized from <code>operator&lt;=&gt;</code> and <code>operator==</code> respectively. <em>(since C++20)</em></p>
</blockquote>
<p>The thing is,</p>
<ul>
<li><p>my type doesn't define <code>operator&lt;=&gt;</code> nor <code>operator==</code>,</p>
</li>
<li><p>and as <a href=""https://stackoverflow.com/questions/48065905/is-the-three-way-comparison-operator-always-efficient"">this answer points out</a> providing <code>operator&lt;</code> in addition would be fine and should be used when evaluating simple expressions like <code>a &lt; b</code>.</p>
</li>
</ul>
<ol>
<li>Is the behavior change in C++20 correct/on purpose?</li>
<li>Should there be a diagnostic?</li>
<li>Can we use other tools to spot silent breakage like this? It feels like scanning entire code-bases for usage of user-defined types in <code>tuple</code>/<code>pair</code> doesn't scale well.</li>
<li>Are there other types, beside <code>tuple</code>/<code>pair</code> that could manifest similar changes?</li>
</ol>
","85371","","63550","","2021-03-06 13:21:04","2021-03-07 10:10:23","More silent behaviour changes with C++20 three-way comparison","<c++><c++17><c++20><stdtuple><spaceship-operator>","3","9","6","","","CC BY-SA 4.0"
"878126","114239","2011-08-04 08:05:33","android developer","2022-10-29 09:41:55","","Israel","<p>Really like to develop Android apps &amp; libraries on my spare time.</p>

<p>Github website:
<a href=""https://github.com/AndroidDeveloperLB/"" rel=""nofollow noreferrer"">https://github.com/AndroidDeveloperLB/</a> </p>

<p>My spare time apps:
<a href=""https://play.google.com/store/apps/developer?id=AndroidDeveloperLB"" rel=""nofollow noreferrer"">https://play.google.com/store/apps/developer?id=AndroidDeveloperLB</a></p>
","54765","1073","47","https://i.stack.imgur.com/D5dZW.jpg","","796053","60079472","1","60323379","","2020-02-05 15:51:42","","41","8663","<p>Note: I tried various solutions that are written about here on StackOverflow (example <a href=""https://stackoverflow.com/questions/38094420/android-alarmmanager-setexact-is-not-exact""><strong>here</strong></a>). Please do not close this without checking if your solution from what you've found works using the test I've written below.</p>

<h2>Background</h2>

<p>There is a requirement on the app, that the user sets a reminder to be scheduled at a specific time, so when the app gets triggered on this time, it does something tiny in the background (just some DB query operation), and shows a simple notification, to tell about the reminder.</p>

<p>In the past, I used a simple code to set something to be scheduled at a relatively specific time:</p>

<pre><code>            val alarmManager = context.getSystemService(Context.ALARM_SERVICE) as AlarmManager
            val pendingIntent = PendingIntent.getBroadcast(context, requestId, Intent(context, AlarmReceiver::class.java), PendingIntent.FLAG_UPDATE_CURRENT)
            when {
                VERSION.SDK_INT &gt;= VERSION_CODES.KITKAT -&gt; alarmManager.setExact(AlarmManager.RTC_WAKEUP, timeToTrigger, pendingIntent)
                else -&gt; alarmManager.set(AlarmManager.RTC_WAKEUP, timeToTrigger, pendingIntent)
            }
</code></pre>

<pre><code>class AlarmReceiver : BroadcastReceiver() {
    override fun onReceive(context: Context, intent: Intent) {
        Log.d(""AppLog"", ""AlarmReceiver onReceive"")
        //do something in the real app
    }
}
</code></pre>

<p>Usage:</p>

<pre><code>            val timeToTrigger = System.currentTimeMillis() + java.util.concurrent.TimeUnit.MINUTES.toMillis(1)
            setAlarm(this, timeToTrigger, 1)
</code></pre>

<h2>The problem</h2>

<p>I've now tested this code on emulators on new Android versions and on Pixel 4 with Android 10, and it doesn't seem to trigger, or maybe it triggers after a very long time since what I provide it. I'm well aware of the <a href=""https://dontkillmyapp.com/"" rel=""noreferrer""><strong>terrible behavior</strong></a> that <a href=""https://issuetracker.google.com/issues/122098785"" rel=""noreferrer""><strong>some OEMs</strong></a> added to removing apps from the recent tasks, but this one is on both emulators and Pixel 4 device (stock).</p>

<p>I've read on <a href=""https://developer.android.com/reference/android/app/AlarmManager"" rel=""noreferrer"">the docs</a> about setting an alarm, that it got restricted for apps so that it won't occur too often, but this doesn't explain how to set an alarm at a specific time, and it doesn't explain how come <a href=""https://play.google.com/store/apps/details?id=com.google.android.deskclock&amp;hl=en"" rel=""noreferrer"">Google's Clock app</a> succeeds doing it.</p>

<p>Not only that, but according to what I understand, it says the restrictions should be applied especially for low power state of the device, but in my case, I didn't have this state, on both the device and on the emulators. I've set the alarms to be triggered in about a minute from now.</p>

<p>Seeing that many alarm clock apps don't work anymore as they used to, I think there is something that is missing on the docs. Example of such apps is the popular <a href=""https://play.google.com/store/apps/details?id=ch.bitspin.timely&amp;hl=en"" rel=""noreferrer"">Timely</a> app that was <a href=""http://www.bitspin.ch/google"" rel=""noreferrer"">bought by Google</a> but never got new updates to handle the new restrictions, and now users <a href=""https://issuetracker.google.com/issues/140626691"" rel=""noreferrer"">want it back.</a>. However, some popular apps do work fine, such as <a href=""https://play.google.com/store/apps/details?id=com.amdroidalarmclock.amdroid"" rel=""noreferrer"">this one</a>.</p>

<h2>What I've tried</h2>

<p>To test that indeed the alarm works, I perform these tests when trying to trigger the alarm in a minute from now, after installing the app for the first time, all while the device is connected to the PC (to see the logs) :</p>

<ol>
<li>Test when the app is in the foreground, visible to the user. - took 1-2 minutes.</li>
<li>Test when the app was sent to the background (using the home button, for example) - took about 1 minute</li>
<li>Test when app's task was removed from the recent tasks. - I waited more than 20 minutes and didn't see the alarm being triggered, writing to logs.</li>
<li>Like #3, but also turn off the screen. It would probably be worse...</li>
</ol>

<p>I tried to use the next things, all don't work:</p>

<ol>
<li><p><code>alarmManager.setAlarmClock(AlarmManager.AlarmClockInfo(timeToTrigger, pendingIntent), pendingIntent)</code></p></li>
<li><p><code>alarmManager.setExactAndAllowWhileIdle(AlarmManager.RTC_WAKEUP, timeToTrigger, pendingIntent)</code></p></li>
<li><p><code>AlarmManagerCompat.setExactAndAllowWhileIdle(alarmManager, AlarmManager.RTC_WAKEUP, timeToTrigger, pendingIntent)</code></p></li>
<li><p>combination of any of the above, with :</p>

<p><code>if (VERSION.SDK_INT &gt;= VERSION_CODES.KITKAT)
  alarmManager.setWindow(AlarmManager.RTC_WAKEUP, 0, 60 * 1000L, pendingIntent)</code></p></li>
<li><p>Tried to use a service instead of BroadcastReceiver. Also tried on a different process.</p></li>
<li><p>Tried making the app be ignored from the battery optimization (didn't help), but since other apps don't need it, I shouldn't use it either.</p></li>
<li><p>Tried using this:</p></li>
</ol>

<pre><code>            if (VERSION.SDK_INT &gt;= VERSION_CODES.LOLLIPOP)
                alarmManager.setAlarmClock(AlarmManager.AlarmClockInfo(timeToTrigger, pendingIntent), pendingIntent)
            AlarmManagerCompat.setExactAndAllowWhileIdle(alarmManager, AlarmManager.RTC_WAKEUP, timeToTrigger, pendingIntent)
</code></pre>

<ol start=""7"">
<li>Tried having a service that will have a trigger of <a href=""https://developer.android.com/reference/android/app/Service#onTaskRemoved(android.content.Intent)"" rel=""noreferrer"">onTaskRemoved</a> , to re-schedule the alarm there, but this also didn't help (the service worked fine though).</li>
</ol>

<p>As for Google's Clock app, I didn't see anything special about it except that it shows a notification before being triggered, and I also don't see it in the ""not optimized"" section of the battery-optimization settings screen.</p>

<p>Seeing that this seems like a bug, I reported about this <a href=""https://issuetracker.google.com/issues/149556385"" rel=""noreferrer""><strong>here</strong></a>, including a sample project and video to show the issue.</p>

<p>I've checked on multiple versions of the emulator, and it seems that this behavior started from API 27 (Android 8.1 - Oreo). Looking <a href=""https://developer.android.com/about/versions/oreo/background"" rel=""noreferrer""><strong>at the docs</strong></a>, I don't see AlarmManager being mentioned, but instead, it was written about various background work.</p>

<h2>The questions</h2>

<ol>
<li><p>How do we set something to be triggered at a relatively exact time nowadays?</p></li>
<li><p>How come the above solutions don't work anymore? Am I missing anything? Permission? Maybe I'm supposed to use a Worker instead? But then wouldn't it mean that it might not trigger on time at all?</p></li>
<li><p>How does Google ""Clock"" app overcome all of this, and triggers anyway on the exact time, always, even if it was triggered just a minute ago? Is it only because it's a system app? What if it gets installed as a user app, on a device that doesn't have it built-in?</p></li>
</ol>

<p>If you say that it's because it's a system app, I've found another app that can trigger an alarm twice in 2 minutes, <a href=""https://play.google.com/store/apps/details?id=com.amdroidalarmclock.amdroid"" rel=""noreferrer"">here</a>, though I think it might use a foreground service sometimes.</p>

<p>EDIT: made a tiny Github repository to try ideas on, <a href=""https://github.com/AndroidDeveloperLB/AlarmClockSample"" rel=""noreferrer""><strong>here</strong></a>.</p>

<hr>

<p>EDIT: finally <a href=""https://github.com/yuriykulikov/AlarmClock"" rel=""noreferrer""><strong>found a sample</strong></a> that is both open-sourced and doesn't have this issue. Sadly it's very complex and I still try to figure out what makes it so different (and what's the minimal code that I should add to my POC) that lets its alarms stay scheduled after removing the app from the recent tasks</p>
","878126","","1442180","","2020-03-05 12:50:19","2022-02-07 19:13:56","How to set an alarm to be scheduled at an exact time after all the newest restrictions on Android?","<android><alarmmanager>","7","13","11","","","CC BY-SA 4.0"
"807126","280004","2011-06-20 17:45:35","Doug Stevenson","2022-10-29 18:31:03","https://www.chiselstrike.com/","127.0.0.1","<p>Developer Relations @ <a href=""https://www.chiselstrike.com/"" rel=""nofollow noreferrer"">ChiselStrike</a>.</p>
<p>I am also available as an <a href=""http://firebase-consultant.com"" rel=""nofollow noreferrer"">independent consultant specializing in Firebase</a> and can help you on an hourly, paid basis with Firebase products.</p>
<p>I dig ChiselStrike, web, Firebase, Android, Node.js, Google Cloud, TypeScript, Kotlin.</p>
","47425","175","908","https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1","","426109","64545862","1","64545863","","2020-10-26 22:30:28","","41","71590","<p>After upgrading to 8.0.0, I get the following error:</p>
<blockquote>
<p>Attempted import error: 'initializeApp' is not exported from 'firebase/app' (imported as 'firebase').</p>
</blockquote>
<p>My import looks like this:</p>
<pre class=""lang-js prettyprint-override""><code>import * as firebase from &quot;firebase/app&quot;
firebase.initializeApp({ ... })
</code></pre>
<p>TypeScript also complains:</p>
<blockquote>
<p>Property 'initializeApp' does not exist on type 'typeof import(&quot;/path/to/my/file&quot;)'. ts(2339)</p>
</blockquote>
<p>How do I fix this?</p>
","807126","","","","","2022-02-20 15:53:17","Upgrade to Firebase JS 8.0.0: Attempted import error: 'app' is not exported from 'firebase/app' (imported as 'firebase')","<javascript><typescript><firebase>","12","0","14","","","CC BY-SA 4.0"
"267","372133","2008-08-04 10:11:06","Lasse V. Karlsen","2022-10-23 20:17:34","https://blog.vkarlsen.no/","Porsgrunn, Norge","<p>71-model software architect working for <a href=""https://www.visma.no/"" rel=""nofollow noreferrer"">Visma</a>, living in <a href=""https://www.google.com/maps/place/Porsgrunn/@59.1149808,9.5965837,12z/data=!3m1!4b1!4m5!3m4!1s0x46472076f3199f79:0xe38f0629596769e1!8m2!3d59.1385567!4d9.6555147"" rel=""nofollow noreferrer"">Porsgrunn, Telemark, Norway</a>.</p>
","42941","6138","2354","","","213","62496779","1","62542633","","2020-06-21 09:35:34","","38","60738","<p>There are plenty of questions here which asks how to elevate priviliges from powershell, and almost all of them recommend this command:</p>
<pre><code>Start-Process -Verb RunAs powershell.exe .....
</code></pre>
<p>(or pwsh.exe for Powershell Core)</p>
<p>And this works, it opens up a new Powershell window with elevated privileges, after having gone through a UAC block to verify access.</p>
<p>However, while I'm using Powershell, I'm doing it inside Windows Terminal, the new terminal application for Windows 10, and I would like to open a new instance of Windows Terminal with elevated privileges, not just a Powershell window.</p>
<p>So I tried these commands:</p>
<pre><code>Start-Process -Verb RunAs wt
Start-Process -Verb RunAs wt.exe
Start-Process -Verb RunAs (Get-Command wt)
Start-Process -Verb RunAs &quot;C:\Users\lasse\AppData\Local\Microsoft\WindowsApps\wt.exe&quot;
</code></pre>
<p>They all fail with:</p>
<blockquote>
<p>Start-Process: This command cannot be run due to the error: The file cannot be accessed by the system..</p>
</blockquote>
<p>I'm assuming this has something to do with where the executable is located, within my profile, but if I right-click the Windows Terminal icon I have on my task bar and choose to run it as administrator, it opens up just fine. This is what I want to duplicate.</p>
<p>So is there a way for me to modify either the commands I tried above, or change some access setting that would make this work?</p>
<p>For my specific instance, I simply want to make it simpler to pop open an admin terminal, I don't need a way to elevate arbitrary commands, then I will happily use the commands I have already shown here.</p>
","267","","","","","2022-05-22 10:17:23","Opening up Windows Terminal with elevated privileges, from within Windows Terminal","<windows-terminal>","13","0","15","","","CC BY-SA 4.0"
"341994","497213","2010-05-15 16:05:56","matt","2022-10-30 03:13:44","http://www.apeth.net/matt/default.html","","<p>Author most recently of <a href=""https://learning.oreilly.com/library/view/ios-15-programming/9781098118495/"" rel=""nofollow noreferrer"">iOS 15 Programming Fundamentals with Swift</a> and of <a href=""https://www.oreilly.com/library/view/programming-ios-14/9781492092162/"" rel=""nofollow noreferrer"">Programming iOS 14</a>.</p>
<p>Code examples from the books available at <a href=""https://github.com/mattneub/Programming-iOS-Book-Examples"" rel=""nofollow noreferrer"">my github repository</a>.</p>
<p>A much earlier edition, <em>Programming iOS 6</em>, is available to read for free at <a href=""http://www.apeth.com/iOSBook/"" rel=""nofollow noreferrer"">http://www.apeth.com/iOSBook/</a>.</p>
<p>And the Swift language chapters of <em>iOS 10 Programming Fundamentals With Swift</em> are available at <a href=""http://www.apeth.com/swiftBook/"" rel=""nofollow noreferrer"">http://www.apeth.com/swiftBook/</a>.</p>
","68440","3276","34867","","","137658","64081701","1","64164508","","2020-09-26 19:25:08","","37","10349","<p>I'm having difficulty finding the use of NSDiffableDataSourceSnapshot <a href=""https://developer.apple.com/documentation/uikit/nsdiffabledatasourcesnapshot/3375783-reloaditems"" rel=""noreferrer""><code>reloadItems(_:)</code></a>:</p>
<ul>
<li><p>If the item I ask to reload is not equatable to an item that is already present in the data source, I crash with:</p>
<blockquote>
<p>Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Attempted to reload item identifier that does not exist in the snapshot: ProjectName.ClassName</p>
</blockquote>
</li>
<li><p>But if the item <em>is</em> equatable to an item that is already present in the data source, then what's the point of &quot;reloading&quot; it?</p>
</li>
</ul>
<p>You might think the answer to the second point is: well, there might be some other aspect of the item identifier object that is not part of its equatability but does reflect into the cell interface. But what I find is that that's not true; after calling <code>reloadItems</code>, the table view does <em>not</em> reflect the change.</p>
<p>So when I want to change an item, what I end up doing with the snapshot is an <code>insert</code> after the item to be replaced and then a <code>delete</code> of the original item. There is no snapshot <code>replace</code> method, which is what I was hoping <code>reloadItems</code> would turn out to be.</p>
<p>(I did a Stack Overflow search on those terms and found very little — mostly just a couple of questions that puzzled over particular uses of <code>reloadItems</code>, such as <a href=""https://stackoverflow.com/questions/60180412/how-to-update-a-table-cell-using-diffable-uitableview"">How to update a table cell using diffable UITableView</a>. So I'm asking in a more generalized form, what practical use has <em>anyone</em> found for this method?)</p>
<hr />
<p>Well, there's nothing like having a minimal reproducible example to play with, so here is one.</p>
<p>Make a plain vanilla iOS project with its template ViewController, and add this code to the ViewController.</p>
<p>I'll take it piece by piece. First, we have a struct that will serve as our item identifier. The UUID is the unique part, so equatability and hashability depend upon it alone:</p>
<pre><code>struct UniBool : Hashable {
    let uuid : UUID
    var bool : Bool
    // equatability and hashability agree, only the UUID matters
    func hash(into hasher: inout Hasher) {
        hasher.combine(uuid)
    }
    static func ==(lhs:Self, rhs:Self) -&gt; Bool {
        lhs.uuid == rhs.uuid
    }
}
</code></pre>
<p>Next, the (fake) table view and the diffable data source:</p>
<pre><code>let tableView = UITableView(frame: .zero, style: .plain)
var datasource : UITableViewDiffableDataSource&lt;String,UniBool&gt;!
override func viewDidLoad() {
    super.viewDidLoad()
    self.tableView.register(UITableViewCell.self, forCellReuseIdentifier: &quot;cell&quot;)
    self.datasource = UITableViewDiffableDataSource&lt;String,UniBool&gt;(tableView: self.tableView) { tv, ip, isOn in
        let cell = tv.dequeueReusableCell(withIdentifier: &quot;cell&quot;, for: ip)
        return cell
    }
    var snap = NSDiffableDataSourceSnapshot&lt;String,UniBool&gt;()
    snap.appendSections([&quot;Dummy&quot;])
    snap.appendItems([UniBool(uuid: UUID(), bool: true)])
    self.datasource.apply(snap, animatingDifferences: false)
}
</code></pre>
<p>So there is just one UniBool in our diffable data source and its <code>bool</code> is <code>true</code>. So now set up a button to call this action method which tries to toggle the <code>bool</code> value by using <code>reloadItems</code>:</p>
<pre><code>@IBAction func testReload() {
    if let unibool = self.datasource.itemIdentifier(for: IndexPath(row: 0, section: 0)) {
        var snap = self.datasource.snapshot()
        var unibool = unibool
        unibool.bool = !unibool.bool
        snap.reloadItems([unibool]) // this is the key line I'm trying to test!
        print(&quot;this object's isOn is&quot;, unibool.bool)
        print(&quot;but looking right at the snapshot, isOn is&quot;, snap.itemIdentifiers[0].bool)
        delay(0.3) {
            self.datasource.apply(snap, animatingDifferences: false)
        }
    }
}
</code></pre>
<p>So here's the thing. I said to <code>reloadItems</code> with an item whose UUID is a match, but whose <code>bool</code> is toggled: &quot;this object's isON is false&quot;. But when I ask the snapshot, okay, what have you got? it tells me that its sole item identifier's <code>bool</code> <em>is still true</em>.</p>
<p>And <em>that</em> is what I'm asking about. If the snapshot is not going to pick up the new value of <code>bool</code>, what is <code>reloadItems</code> for in the first place?</p>
<p>Obviously I could just substitute a <em>different</em> UniBool, i.e. one with a different UUID. But then I cannot call <code>reloadItems</code>; we crash because that UniBool is not already in the data. I can work around that by calling <code>insert</code> followed by <code>remove</code>, and that is exactly how I do work around it.</p>
<p>But my question is: so what is <code>reloadItems</code> for, if not for this very thing?</p>
","341994","","1265393","","2021-12-21 01:39:41","2021-12-21 01:39:41","What is NSDiffableDataSourceSnapshot `reloadItems` for?","<ios><swift><nsdiffabledatasourcesnapshot>","4","13","12","","","CC BY-SA 4.0"
"2380830","229261","2013-05-14 08:33:02","Bathsheba","2022-10-29 16:50:08","","Mayfair, London","<p>I'm an equity partner at an asset management firm in London.</p>
<p>I read mathematics at Cambridge and have been using C and C++ for many years. I have an affection for Java. In my opinion, Microsoft Excel is the best application ever written.</p>
","19409","9014","8853","https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1","","2764833","64977541","1","","","2020-11-23 22:33:30","","36","1306","<p>Consider the following (to be compiled with C++14)</p>
<pre><code>#include &lt;iostream&gt;
#include &lt;vector&gt;

// Foo adds an element to a std::vector passed by reference
// on construction in the destructor
struct Foo {
    Foo(std::vector&lt;double&gt;&amp; v) : m_v(v){
    }
    ~Foo(){
        m_v.push_back(1.0);
    }
    std::vector&lt;double&gt;&amp; m_v;
};

std::vector&lt;double&gt; bar(){
    std::vector&lt;double&gt; ret;
    Foo foo(ret);
    return ret;
}

int main(){
    std::cout &lt;&lt; bar().size() &lt;&lt; &quot;\n&quot;;
}
</code></pre>
<p>In gcc8.3 the output is <code>1</code>, which means that <code>foo</code>s destructor has an effect on the returned vector.</p>
<p>In MSVC14.1 the output is <code>0</code>. You can force the output to be the same as gcc8.3 by replacing the line <code>Foo foo(ret);</code> with <code>{Foo foo(ret);}</code> (i.e. by forcing the scope).</p>
<p>I don't <em>think</em> this is dangling reference undefined behaviour (because <code>ret</code> is declared before <code>foo</code>) but rather that this could be a bug in MSVC14.1 (and I will create a bug report if so). Does anyone know for sure?</p>
<p>See <a href=""https://ideone.com/pnxWuJ"" rel=""noreferrer"">https://ideone.com/pnxWuJ</a></p>
","2380830","","2380830","","2020-11-23 22:42:16","2020-11-28 16:20:02","Difference observed between MSVC14.1 and gcc8.3 when a destructor call for an automatic variable amends a function return value","<c++><c++14>","2","9","4","","","CC BY-SA 4.0"
"115145","967227","2009-05-31 16:20:08","CommonsWare","2022-10-29 23:14:28","https://commonsware.com","Pennsylvania, United States","<p>Mark Murphy, founder of CommonsWare, writes a lot.</p>
<h2>Books</h2>
<p>From 2008 through 2021, Mark wrote a series of books on Android app development. These books are now available for free download from <a href=""https://commonsware.com/catalog"" rel=""nofollow noreferrer"">the CommonsWare site</a>.</p>
<p>His most recent books have been focused on second-generation Android app development (Kotlin and the Android Jetpack):</p>
<ul>
<li><p><a href=""https://commonsware.com/Jetpack"" rel=""nofollow noreferrer""><em>Elements of Android Jetpack</em></a>, a new introductory book on Android app development, focused on second-generation techniques.</p>
</li>
<li><p><a href=""https://commonsware.com/AndExplore"" rel=""nofollow noreferrer""><em>Exploring Android</em></a>, a series of step-by-step tutorials for building an Android app from scratch. This book demonstrates app development using Kotlin, coroutines, and the Jetpack libraries.</p>
</li>
<li><p><a href=""https://commonsware.com/Room"" rel=""nofollow noreferrer""><em>Elements of Android Room</em></a>, to help you incorporate Google's reactive object wrapper around SQLite.</p>
</li>
<li><p><a href=""https://commonsware.com/R"" rel=""nofollow noreferrer""><em>Elements of Android R</em></a>, to help you deal with the changes introduced by Android 11 (code-named &quot;R&quot;). It covers everything from scoped storage changes to data access auditing to sharing UIs between apps to bubbles.</p>
</li>
<li><p><a href=""https://commonsware.com/Kotlin"" rel=""nofollow noreferrer""><em>Elements of Kotlin</em></a>, a guide to the Kotlin programming language, which is rapidly gaining in popularity for Android app development.</p>
</li>
<li><p><a href=""https://commonsware.com/Coroutines"" rel=""nofollow noreferrer""><em>Elements of Kotlin Coroutines</em></a>, exploring Kotlin's new
first-class reactive programming system.</p>
</li>
</ul>
<p>In the beginning, Android development was focused on Java and, partially, on the Android Support Library. Mark's earliest books share that focus:</p>
<ul>
<li><p><a href=""https://commonsware.com/Android"" rel=""nofollow noreferrer""><em>The Busy Coder's Guide to Android Development</em></a>, the first and largest book on Android app programming</p>
</li>
<li><p><a href=""https://commonsware.com/AndroidArch"" rel=""nofollow noreferrer""><em>Android's Architecture Components</em></a></p>
</li>
<li><p><a href=""https://commonsware.com/GraphQL"" rel=""nofollow noreferrer""><em>GraphQL and Android</em></a></p>
</li>
</ul>
<h2>Things Other Than Books</h2>
<p>He runs the <a href=""https://jetc.dev"" rel=""nofollow noreferrer""><code>jetc.dev</code></a> weekly newsletter for Jetpack Compose.</p>
<p>Heck, he even has <a href=""http://commonsware.com/blog"" rel=""nofollow noreferrer"">a blog</a>.</p>
<p>All code in Stack Overflow questions, answers, or comments written by Mark Murphy are hereby licensed under <a href=""http://www.apache.org/licenses/LICENSE-2.0"" rel=""nofollow noreferrer"">the Apache Software License 2.0</a>, unless otherwise noted where that code appears on Stack Overflow.</p>
","269231","13193","7886","https://i.stack.imgur.com/wDnd8.png?s=128&g=1","","39846","63705739","1","","","2020-09-02 12:40:30","","34","1715","<p>As a follow-up to <a href=""https://stackoverflow.com/q/63237657/115145"">this question</a>, I am trying to figure out what stops Google from modifying our apps that it signs and distributes. Regardless of whether we distribute an APK or an App Bundle, the App Signing service strips away whatever signature that we have and Google signs the APKs that it distributes. In the case of the App Bundle, this will result in several APKs, akin to what <code>bundletool</code> generates.</p>
<p>But since an APK is just a ZIP archive with compiled code and resources, it seems as though Google could modify that as they see fit before signing, including adding or replacing code.</p>
<p><a href=""https://medium.com/androiddevelopers/answers-to-common-questions-about-app-signing-by-google-play-b28fef836af0"" rel=""noreferrer"">Google has stated</a>:</p>
<blockquote>
<p>we don’t modify and distribute your application code without your knowledge and approval</p>
</blockquote>
<p>and:</p>
<blockquote>
<p>As stated before, Play will not modify the functionality of your application without your knowledge and approval.</p>
</blockquote>
<p>Notably, Google used &quot;don't&quot; and &quot;will not&quot;... as opposed to &quot;can't&quot; and &quot;cannot&quot;. In fact, in the same post, we see:</p>
<blockquote>
<p>For apps uploaded as app bundles, we will improve this security by introducing what is called a source stamp. This source metadata is inserted into the app’s manifest by <code>bundletool</code>.</p>
</blockquote>
<p>So, we know of at least one modification, albeit to metadata.</p>
<p>Plus,
<a href=""https://developer.amazon.com/docs/app-submission/understanding-submission.html#about_drm"" rel=""noreferrer"">the Amazon AppStore for Android modifies APKs before re-signing them</a>:</p>
<blockquote>
<p>Regardless of whether you choose to apply Amazon DRM, Amazon wraps your app with code that enables the app to communicate with the Amazon Appstore client to collect analytics, evaluate and enforce program policies, and share aggregated information with you. Your app will always communicate with the Amazon Appstore client when it starts, even if you choose not to apply DRM.</p>
</blockquote>
<blockquote>
<p>Amazon removes your signature and re-signs your app with an Amazon signature that is unique to you, does not change, and is the same for all apps in your account.</p>
</blockquote>
<p>Amazon has been doing this sort of thing <a href=""https://www.defectivebydesign.org/amazon-android-drm"" rel=""noreferrer"">for a decade</a>.</p>
<p>It seems as though Google should have the same technical capability as does Amazon.</p>
<p>So, is there anything that I am missing that prevents Google from adding to or modifying the code in APKs that it re-signs and distributes?</p>
","115145","","","","","2022-02-13 20:24:29","What Stops Google From Modifying Our APKs That It Signs Via the App Signing Service?","<android><android-app-signing>","4","7","7","","","CC BY-SA 4.0"
"23528","183691","2008-09-29 17:08:04","Daniel A. White","2022-10-30 01:23:45","https://dev.to/daniel","McCordsville, IN, USA","<p>I'm a Software Engineer in Indianapolis, Indiana who is <code>#SOreadytohelp</code>!</p>
<p>Member of the .NET Foundation.</p>
","28107","1926","21534","","","12046","63778276","1","63778277","","2020-09-07 13:10:09","","34","2902","<p>When defining a record class, how do I target the attributes to the parameter, field or property?</p>
<p>For instance, I would like to use <code>JsonIgnore</code> but this doesn't compile as it has an attribute usage restriction to the field or property:</p>
<pre><code>record Person(string FirstName, string LastName, [JsonIgnore] int Age);
</code></pre>
","23528","","","","","2022-07-30 04:51:45","How do I target attributes for a record class?","<c#><oop><attributes><c#-9.0><record-classes>","2","3","3","","","CC BY-SA 4.0"
"642706","277874","2011-03-03 09:33:32","Basil Bourque","2022-10-30 00:53:19","","","<h1>SOreadytohelp</h1>
","34518","24703","6004","https://i.stack.imgur.com/ZWEI3.jpg?s=128&g=1","","322981","59869486","1","59873914","","2020-01-22 23:04:58","","33","19089","<p><a href=""https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/stream/Stream.html"" rel=""noreferrer""><code>Stream</code></a> inherits an <a href=""https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/stream/BaseStream.html#iterator()"" rel=""noreferrer"">iterator()</a> method to produce an <a href=""https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Iterator.html"" rel=""noreferrer""><code>Iterator</code></a>. </p>

<p>But I need an <a href=""https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Iterable.html"" rel=""noreferrer""><code>Iterable</code></a> rather than an <a href=""https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Iterator.html"" rel=""noreferrer""><code>Iterator</code></a>. </p>

<p>For example, given this string:</p>

<pre><code>String input = ""this\n"" +
        ""that\n"" +
        ""the_other"";
</code></pre>

<p>…I need to pass those parts of string as an <code>Iterable</code> to a specific library. Calling <code>input.lines()</code> yields a <code>Stream</code>. So I would be set if I could make that <code>Stream</code> into a <code>Iterable</code> of its elements.</p>
","642706","","642706","","2022-06-24 17:00:09","2022-06-24 17:00:09","Make a Stream into an Iterable?","<java><java-stream><iterable>","2","3","4","2020-05-08 16:31:20","","CC BY-SA 4.0"
"45375","336263","2008-12-11 15:06:50","mklement0","2022-10-30 05:53:32","http://www.linkedin.com/in/mklement0","United States","<p>Use the links, if you want to get in touch.</p>
<p>Needless to say, the following is as optional as optional can be on a site built on volunteer contributions, but if you'd like to say thanks for answers that helped you, you can <a href=""https://www.buymeacoffee.com/mklement0"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/WcL4L.png"" alt=""Buy me a coffee"" /></a></p>
","15278","21815","742","","","19375","61122378","1","62680596","","2020-04-09 13:33:23","","33","5026","<ul>
<li><p>The <a href=""https://ss64.com/osx/say.html"" rel=""noreferrer""><code>say</code> command-line utility</a> seems to be unaware of Siri voices as of macOS 11 (Big Sur):</p>
<ul>
<li><p><code>say -v '?'</code> doesn't list Siri voices.</p>
</li>
<li><p>Targeting a Siri voice explicitly doesn't work:</p>
<ul>
<li><code>say -v NoraSiri hi!</code> doesn't find the Nora Siri voice (which is the default Siri voice).</li>
</ul>
</li>
<li><p>Using a bundle ID (e.g., <code>com.apple.speech.synthesis.voice.custom.siri.nora.premium</code>)<sup>[1]</sup> doesn't complain about an unknown voice, but speech output fails with <code>Open speech channel failed: -86</code>:</p>
<ul>
<li><p><code>say -v com.apple.speech.synthesis.voice.custom.siri.nora.premium hi!</code></p>
</li>
<li><p>Seemingly, any string with prefix <code>com.apple.speech.synthesis.voice.custom</code> triggers this error.</p>
</li>
</ul>
</li>
</ul>
</li>
<li><p>Similarly, <a href=""https://developer.apple.com/documentation/appkit/nsspeechsynthesizer"" rel=""noreferrer""><code>NSSpeechSynthesizer</code></a> doesn't list Siri voices as available and doesn't support selecting one for speech output.</p>
</li>
</ul>
<p>macOS Big Sur itself <em>is</em> capable of using a Siri voice for TTS, as evidenced by the fact that you can select one as the system voice in <code>System Preferences &gt; Accessibility &gt; Speech</code>, e.g. in combination with the shortcut-key-based <code>Speak selected text when the key is pressed</code> feature.<br />
(Curiously, though, a Siri voice selected as the system voice does <em>not</em> take effect if you <em>right-click</em> text and select <code>Speech &gt; Start Speaking</code> from the context menu and possibly also not for other accessibility features - this discrepancy is the subject of <a href=""https://forums.macrumors.com/threads/wrong-system-voice-speak-text-and-alerts-catalina.2237933/?post=28619208#post-28619208"" rel=""noreferrer"">this MacRumors forum thread</a>.)</p>
<p>Unfortunately, it appears that this functionality isn't exposed through a utility or API.</p>
<ul>
<li>Is there any way to use Siri voices with <code>say</code> or <code>NSSpeechSynthesizer</code>?</li>
</ul>
<hr />
<p>[1] The bundle IDs of the <em>installed</em> Siri voices can be determined as follows:</p>
<pre class=""lang-sh prettyprint-override""><code>ls /System/Library/Speech/Voices/*.SpeechVoice/Contents/Info.plist | grep -i siri | xargs -n 1 /usr/libexec/PlistBuddy -c 'print CFBundleIdentifier'
</code></pre>
<p><sup>Note: The above works for me as of macOS Big Sur, upgraded from an earlier version, with at least one Siri voice installed. <a href=""https://stackoverflow.com/users/142239/siu-ching-pong-asuka-kenji"">Siu Ching Pong -Asuka Kenji-</a> reports that on a freshly installed, non-upgraded Big Sur machine the <code>System/Library/Speech/Voices</code> directory is empty.</sup></p>
<p>To find the bundle IDs of all <em>available</em> (downloadable) Siri voices:</p>
<pre><code>/usr/libexec/PlistBuddy -c 'print DownloadableCustomVoices' /System/Library/PrivateFrameworks/SpeechObjects.framework/Resources/SpeechDataDefaults.plist | grep 'VoiceIdentifier' | sed -E 's/.+ = //'
</code></pre>
","45375","","45375","","2021-08-06 20:25:38","2021-08-06 20:25:38","Make the `say` terminal utility and NSSpeechSynthesizer work with Siri voices","<macos><text-to-speech><macos-catalina><siri><nsspeechsynthesizer>","2","7","13","","","CC BY-SA 4.0"
"23354","994260","2008-09-29 05:46:02","Marc Gravell","2022-10-29 22:46:04","http://blog.marcgravell.com","Forest of Dean, United Kingdom","<p>e-mail: marc.gravell@gmail.com<br/>
blog: <a href=""http://blog.marcgravell.com/"" rel=""nofollow noreferrer"">http://blog.marcgravell.com/</a><br/>
twitter: <a href=""http://twitter.com/marcgravell"" rel=""nofollow noreferrer"">@marcgravell</a><br/>
</p>
<p>C# programmer and MVP, with a keen interest in all things code.
Particular areas:<ul>
<li><a href=""https://github.com/StackExchange/dapper-dot-net"" rel=""nofollow noreferrer"">Dapper</a> (<a href=""/questions/tagged/dapper"" class=""post-tag"" title=""show questions tagged &#39;dapper&#39;"" rel=""tag"">dapper</a>)
<li><a href=""https://github.com/StackExchange/StackExchange.Redis"" rel=""nofollow noreferrer"">StackExchange.Redis</a> (<a href=""/questions/tagged/stackexchange.redis"" class=""post-tag"" title=""show questions tagged &#39;stackexchange.redis&#39;"" rel=""tag"">stackexchange.redis</a>)
<li><a href=""http://code.google.com/p/protobuf-net/"" rel=""nofollow noreferrer"">Protocol Buffers</a> (<a href=""/questions/tagged/protobuf-net"" class=""post-tag"" title=""show questions tagged &#39;protobuf-net&#39;"" rel=""tag"">protobuf-net</a>)
</ul></p>
","320609","27181","1115","https://i.stack.imgur.com/CrVFH.png?s=128&g=1","","11975","69116668","1","","","2021-09-09 10:34:42","","32","1541","<p>Imagine a type at the root namespace level (could be in the default <code>global</code> space, or could potentially be an <code>extern alias</code>).</p>
<p>It appears that this type <em>cannot</em> be referred to via <code>nameof()</code>, when using the alias prefix. It works fine with <code>typeof</code>, and via <code>using</code> aliases (although <code>nameof</code> on a <code>using</code> alias yields the alias name, not the type name). The compiler objects with CS8083, &quot;An alias-qualified name is not an expression.&quot;</p>
<p>But: is there a reason for this? is this trying to prevent some obscure problem scenario? or meet some specification minutae? or is it perhaps a compiler bug? I'm also fully content to note that we <em>shouldn't</em> usually declare types in the namespace root - <code>CA1050</code> is very right about this; but that's not the point here :)</p>
<p>Full example follows; note that in this example uses two projects for the <code>using</code> alias check, but that for simplicity everything involving <code>C</code> can just be ignored for a simple investigation.</p>
<pre class=""lang-cs prettyprint-override""><code>extern alias foo;
using System;
using X = global::A;
using Y = global::FunWithNamespaces.B;
using Z = foo::C;

public class A { }

namespace FunWithNamespaces
{
    public class B { }
    public class Program
    {
        static void Main()
        {
            // oddness is on the lines marked ## CS8083

            // relative-qualified using typeof
            Console.WriteLine(typeof(X).Name); // A, expected
            Console.WriteLine(typeof(Y).Name); // B, expected
            Console.WriteLine(typeof(Z).Name); // C, expected
            Console.WriteLine(typeof(A).Name); // A
            Console.WriteLine(typeof(B).Name); // B
            // note: can't talk about C without using an alias qualifier or a using-alias
            Console.WriteLine(typeof(Console).Name); // Console

            // relative-qualified things using nameof
            Console.WriteLine(nameof(X)); // X; I'm on the fence about X vs A, but... whatever
            Console.WriteLine(nameof(Y)); // Y; I'm on the fence about Y vs B, but... whatever
            Console.WriteLine(nameof(Z)); // Z; I'm on the fence about Z vs C, but... whatever
            Console.WriteLine(nameof(A)); // A
            Console.WriteLine(nameof(B)); // B
            // note: can't talk about C without using an alias qualifier or a using-alias
            Console.WriteLine(nameof(Console)); // Console

            // alias-qualified things using typeof
            Console.WriteLine(typeof(global::A).Name); // A
            Console.WriteLine(typeof(global::FunWithNamespaces.B).Name); // B
            Console.WriteLine(typeof(foo::C).Name); // C
            Console.WriteLine(typeof(global::System.Console).Name); // Console

            // alias-qualified things using nameof
            // ??? Console.WriteLine(nameof(global::A)); // ## CS8083 An alias-qualified name is not an expression
            Console.WriteLine(nameof(global::FunWithNamespaces.B)); // B
            // ??? Console.WriteLine(nameof(foo::C)); // ## CS8083 An alias-qualified name is not an expression
            Console.WriteLine(nameof(global::System.Console)); // Console
        }
        
    }
}
</code></pre>
<p>where <code>C</code> is defined in a separate assembly and referenced with aliases specified as <code>foo</code>, and is simply:</p>
<pre class=""lang-cs prettyprint-override""><code>public class C { }
</code></pre>
<hr />
<p>Edit: in terms of the specification, this comes down to <a href=""https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/language-specification/expressions#nameof-expressions"" rel=""noreferrer"">https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/language-specification/expressions#nameof-expressions</a>, where a <code>nameof_expression</code> must be either a <code>simple_name</code> (which it isn't) or a <code>named_entity_target '.' identifier type_argument_list?</code> - so: for all cases that aren't a simple name, there <strong>must</strong> be a <code>.something</code> - but I guess the <em>underlying</em> question here is <strong>why</strong> must there be a <code>.something</code>, vs some other construction that permits <code>global::Foo</code>? For example:</p>
<pre class=""lang-cs prettyprint-override""><code>nameof_expression
    : 'nameof' '(' named_entity ')'
    ;

named_entity
    : simple_name
    | named_entity_target '.' identifier type_argument_list?
    | qualified_alias_member type_argument_list?
    ;

named_entity_target
    : 'this'
    | 'base'
    | named_entity 
    | predefined_type 
    | qualified_alias_member
    ;
</code></pre>
","23354","","23354","","2021-09-09 11:14:46","2022-03-17 08:20:11","Why can nameof not be used with alias-qualified types at the root level?","<c#><nameof>","2","10","3","","","CC BY-SA 4.0"
"341994","497213","2010-05-15 16:05:56","matt","2022-10-30 03:13:44","http://www.apeth.net/matt/default.html","","<p>Author most recently of <a href=""https://learning.oreilly.com/library/view/ios-15-programming/9781098118495/"" rel=""nofollow noreferrer"">iOS 15 Programming Fundamentals with Swift</a> and of <a href=""https://www.oreilly.com/library/view/programming-ios-14/9781492092162/"" rel=""nofollow noreferrer"">Programming iOS 14</a>.</p>
<p>Code examples from the books available at <a href=""https://github.com/mattneub/Programming-iOS-Book-Examples"" rel=""nofollow noreferrer"">my github repository</a>.</p>
<p>A much earlier edition, <em>Programming iOS 6</em>, is available to read for free at <a href=""http://www.apeth.com/iOSBook/"" rel=""nofollow noreferrer"">http://www.apeth.com/iOSBook/</a>.</p>
<p>And the Swift language chapters of <em>iOS 10 Programming Fundamentals With Swift</em> are available at <a href=""http://www.apeth.com/swiftBook/"" rel=""nofollow noreferrer"">http://www.apeth.com/swiftBook/</a>.</p>
","68440","3276","34867","","","137658","59743938","1","59829746","","2020-01-15 01:14:12","","31","8670","<p>How do I get the asynchronous pipelines that constitute the Combine framework to line up synchronously (serially)?</p>

<p>Suppose I have 50 URLs from which I want to download the corresponding resources, and let's say I want to do it one at a time. I know how to do that with Operation / OperationQueue, e.g. using an Operation subclass that doesn't declare itself finished until the download is complete. How would I do the same thing using Combine?</p>

<p>At the moment all that occurs to me is to keep a global list of the remaining URLs and pop one off, set up that one pipeline for one download, do the download, and in the <code>sink</code> of the pipeline, repeat. That doesn't seem very Combine-like.</p>

<p>I did try making an array of the URLs and map it to an array of publishers. I know I can ""produce"" a publisher and cause it to publish on down the pipeline using <code>flatMap</code>. But then I'm still doing all the downloading simultaneously. There isn't any Combine way to walk the array in a controlled manner — or is there?</p>

<p>(I also imagined doing something with Future but I became hopelessly confused. I'm not used to this way of thinking.)</p>
","341994","","","","","2021-03-22 15:15:32","Combine framework serialize async operations","<ios><swift><combine>","8","0","11","","","CC BY-SA 4.0"
"2189127","192652","2013-03-20 03:00:16","James_D","2022-10-30 05:08:54","","","","17666","1336","6248","","","2518243","61531317","1","61531318","","2020-04-30 19:32:24","","29","10571","<p>My JavaFX application needs to be able to find the FXML files to load them with the <code>FXMLLoader</code>, as well as stylesheets (CSS files) and images. When I try to load these, I often get errors, or the item I'm trying to load simply doesn't load at runtime.</p>

<p>For FXML files, the error message I see includes</p>

<pre class=""lang-none prettyprint-override""><code>Caused by: java.lang.NullPointerException: location is not set
</code></pre>

<p>For images, the stack trace includes</p>

<pre class=""lang-none prettyprint-override""><code>Caused by: java.lang.IllegalArgumentException: Invalid URL: Invalid URL or resource not found
</code></pre>

<p>How do I figure out the correct resource path for these resources?</p>
","2189127","","","","","2022-03-23 22:56:52","How do I determine the correct path for FXML files, CSS files, Images, and other resources needed by my JavaFX Application?","<javafx>","1","4","30","","","CC BY-SA 4.0"
"341994","497213","2010-05-15 16:05:56","matt","2022-10-30 03:13:44","http://www.apeth.net/matt/default.html","","<p>Author most recently of <a href=""https://learning.oreilly.com/library/view/ios-15-programming/9781098118495/"" rel=""nofollow noreferrer"">iOS 15 Programming Fundamentals with Swift</a> and of <a href=""https://www.oreilly.com/library/view/programming-ios-14/9781492092162/"" rel=""nofollow noreferrer"">Programming iOS 14</a>.</p>
<p>Code examples from the books available at <a href=""https://github.com/mattneub/Programming-iOS-Book-Examples"" rel=""nofollow noreferrer"">my github repository</a>.</p>
<p>A much earlier edition, <em>Programming iOS 6</em>, is available to read for free at <a href=""http://www.apeth.com/iOSBook/"" rel=""nofollow noreferrer"">http://www.apeth.com/iOSBook/</a>.</p>
<p>And the Swift language chapters of <em>iOS 10 Programming Fundamentals With Swift</em> are available at <a href=""http://www.apeth.com/swiftBook/"" rel=""nofollow noreferrer"">http://www.apeth.com/swiftBook/</a>.</p>
","68440","3276","34867","","","137658","68332664","1","68332748","","2021-07-11 01:37:14","","27","1519","<p>When you call <code>reversed()</code> on an array in Swift, you get a ReverseCollection which merely wraps the original array with reversed access. Thus this is extremely efficient:</p>
<pre><code>let arr = [1,2,3,4]
for i in arr.reversed() { print(i) }
</code></pre>
<p>Nothing actually got reversed except the access; the time complexity of <code>reversed</code> here is O(1). Cool!</p>
<p>But when I index into <code>reversed()</code> by an integer and check Quick Help, it appears I've lost all that efficiency; I'm shown the <em>Sequence</em> <code>reversed()</code> which generates a new array:</p>
<pre><code>let arr = [1,2,3,4]
let i = arr.reversed()[1] // ???? this is a different `reversed()`!
</code></pre>
<p>And this seems to be true, because a <code>reversed()</code> array does not, itself, support indexing by number:</p>
<pre><code>let arr = [1,2,3,4]
let rev = arr.reversed()
let i = rev[1] // compile error!
</code></pre>
<p>So my question is: is it really true that indexing by number into a <code>reversed()</code> array, as in my second example, loses the efficiency of the ReverseCollection index reversal?</p>
","341994","","","","","2021-07-14 10:31:30","Is Swift array reversed()[n] efficient or not?","<arrays><swift>","2","5","","","","CC BY-SA 4.0"
"878126","114239","2011-08-04 08:05:33","android developer","2022-10-29 09:41:55","","Israel","<p>Really like to develop Android apps &amp; libraries on my spare time.</p>

<p>Github website:
<a href=""https://github.com/AndroidDeveloperLB/"" rel=""nofollow noreferrer"">https://github.com/AndroidDeveloperLB/</a> </p>

<p>My spare time apps:
<a href=""https://play.google.com/store/apps/developer?id=AndroidDeveloperLB"" rel=""nofollow noreferrer"">https://play.google.com/store/apps/developer?id=AndroidDeveloperLB</a></p>
","54765","1073","47","https://i.stack.imgur.com/D5dZW.jpg","","796053","67749284","1","68468786","","2021-05-29 08:24:32","","25","5191","<h2>Background</h2>
<p>In the past, I used a foreground <a href=""https://developer.android.com/reference/android/app/IntentService"" rel=""noreferrer""><strong>IntentService</strong></a> to handle various events that come one after another. Then it was deprecated when Android 11 came (Android R, API 30) and it was said to prefer to use Worker that uses <a href=""https://developer.android.com/reference/androidx/work/ListenableWorker#setForegroundAsync(androidx.work.ForegroundInfo)"" rel=""noreferrer""><strong>setForegroundAsync</strong></a> instead, and so I did it.</p>
<pre><code>val builder = NotificationCompat.Builder(context,...)...
setForegroundAsync(ForegroundInfo(notificationId, builder.build()))
</code></pre>
<h2>The problem</h2>
<p>As Android 12 came (Android S, API 31), just one version after , now <code>setForegroundAsync</code> is marked as deprecated, and I am told to use <a href=""https://developer.android.com/reference/androidx/work/WorkRequest.Builder#setExpedited(androidx.work.OutOfQuotaPolicy)"" rel=""noreferrer""><strong>setExpedited</strong></a> instead:</p>
<pre><code>* @deprecated Use {@link WorkRequest.Builder#setExpedited(OutOfQuotaPolicy)} and
* {@link ListenableWorker#getForegroundInfoAsync()} instead.
</code></pre>
<p>Thing is, I'm not sure how it works exactly. Before, we had a notification that should be shown to the user as it's using a foreground service (at least for &quot;old&quot; Android versions). Now it seems that <a href=""https://developer.android.com/reference/androidx/work/ListenableWorker#getForegroundInfoAsync()"" rel=""noreferrer""><strong>getForegroundInfoAsync</strong></a> is used for it, but I don't think it will use it for Android 12 :</p>
<blockquote>
<p>Prior to Android S, WorkManager manages and runs a foreground service
on your behalf to execute the WorkRequest, showing the notification
provided in the ForegroundInfo. To update this notification
subsequently, the application can use NotificationManager.</p>
<p>Starting in Android S and above, WorkManager manages this WorkRequest
using an immediate job.</p>
</blockquote>
<p>Another clue about it is (<a href=""https://developer.android.com/about/versions/12/foreground-services#recommended-alternative"" rel=""noreferrer""><strong>here</strong></a>) :</p>
<blockquote>
<p>Starting in WorkManager 2.7.0, your app can call setExpedited() to
declare that a Worker should use an expedited job. This new API uses
expedited jobs when running on Android 12, and the API uses foreground
services on prior versions of Android to provide backward
compatibility.</p>
</blockquote>
<p>And the only snippet they have is of the scheduling itself :</p>
<pre><code>OneTimeWorkRequestBuilder&lt;T&gt;().apply {
    setInputData(inputData)
    setExpedited(OutOfQuotaPolicy.RUN_AS_NON_EXPEDITED_WORK_REQUEST)
}.build()
</code></pre>
<p>Even the docs of <a href=""https://developer.android.com/reference/androidx/work/OutOfQuotaPolicy#RUN_AS_NON_EXPEDITED_WORK_REQUEST"" rel=""noreferrer"">OutOfQuotaPolicy.RUN_AS_NON_EXPEDITED_WORK_REQUEST</a> seems weird:</p>
<blockquote>
<p>When the app does not have any expedited job quota, the expedited work
request will fallback to a regular work request.</p>
</blockquote>
<p>All I wanted is just to do something right away, reliably, without interruption (or at least lowest chance possible), and use whatever the OS offers to do it.</p>
<p>I don't get why <code>setExpedited</code> was created.</p>
<h2>The questions</h2>
<ol>
<li>How does <code>setExpedited</code> work exactly ?</li>
<li>What is this &quot;expedited job quota&quot; ? What happens on Android 12 when it reaches this situation? The worker won't do its job right away?</li>
<li>Is <code>setExpedited</code> as reliable as a foreground service? Would it always be able to launch right away?</li>
<li>What are the advantages, disadvantages and restrictions that <code>setExpedited</code> has ? Why should I prefer it over a foreground service?</li>
<li>Does it mean that users won't see anything when the app is using this API on Android 12 ?</li>
</ol>
","878126","","","","","2021-10-29 09:45:51","How does setExpedited work and is it as good&reliable as a foreground service?","<android><android-workmanager><android-12>","2","4","6","","","CC BY-SA 4.0"
"115145","967227","2009-05-31 16:20:08","CommonsWare","2022-10-29 23:14:28","https://commonsware.com","Pennsylvania, United States","<p>Mark Murphy, founder of CommonsWare, writes a lot.</p>
<h2>Books</h2>
<p>From 2008 through 2021, Mark wrote a series of books on Android app development. These books are now available for free download from <a href=""https://commonsware.com/catalog"" rel=""nofollow noreferrer"">the CommonsWare site</a>.</p>
<p>His most recent books have been focused on second-generation Android app development (Kotlin and the Android Jetpack):</p>
<ul>
<li><p><a href=""https://commonsware.com/Jetpack"" rel=""nofollow noreferrer""><em>Elements of Android Jetpack</em></a>, a new introductory book on Android app development, focused on second-generation techniques.</p>
</li>
<li><p><a href=""https://commonsware.com/AndExplore"" rel=""nofollow noreferrer""><em>Exploring Android</em></a>, a series of step-by-step tutorials for building an Android app from scratch. This book demonstrates app development using Kotlin, coroutines, and the Jetpack libraries.</p>
</li>
<li><p><a href=""https://commonsware.com/Room"" rel=""nofollow noreferrer""><em>Elements of Android Room</em></a>, to help you incorporate Google's reactive object wrapper around SQLite.</p>
</li>
<li><p><a href=""https://commonsware.com/R"" rel=""nofollow noreferrer""><em>Elements of Android R</em></a>, to help you deal with the changes introduced by Android 11 (code-named &quot;R&quot;). It covers everything from scoped storage changes to data access auditing to sharing UIs between apps to bubbles.</p>
</li>
<li><p><a href=""https://commonsware.com/Kotlin"" rel=""nofollow noreferrer""><em>Elements of Kotlin</em></a>, a guide to the Kotlin programming language, which is rapidly gaining in popularity for Android app development.</p>
</li>
<li><p><a href=""https://commonsware.com/Coroutines"" rel=""nofollow noreferrer""><em>Elements of Kotlin Coroutines</em></a>, exploring Kotlin's new
first-class reactive programming system.</p>
</li>
</ul>
<p>In the beginning, Android development was focused on Java and, partially, on the Android Support Library. Mark's earliest books share that focus:</p>
<ul>
<li><p><a href=""https://commonsware.com/Android"" rel=""nofollow noreferrer""><em>The Busy Coder's Guide to Android Development</em></a>, the first and largest book on Android app programming</p>
</li>
<li><p><a href=""https://commonsware.com/AndroidArch"" rel=""nofollow noreferrer""><em>Android's Architecture Components</em></a></p>
</li>
<li><p><a href=""https://commonsware.com/GraphQL"" rel=""nofollow noreferrer""><em>GraphQL and Android</em></a></p>
</li>
</ul>
<h2>Things Other Than Books</h2>
<p>He runs the <a href=""https://jetc.dev"" rel=""nofollow noreferrer""><code>jetc.dev</code></a> weekly newsletter for Jetpack Compose.</p>
<p>Heck, he even has <a href=""http://commonsware.com/blog"" rel=""nofollow noreferrer"">a blog</a>.</p>
<p>All code in Stack Overflow questions, answers, or comments written by Mark Murphy are hereby licensed under <a href=""http://www.apache.org/licenses/LICENSE-2.0"" rel=""nofollow noreferrer"">the Apache Software License 2.0</a>, unless otherwise noted where that code appears on Stack Overflow.</p>
","269231","13193","7886","https://i.stack.imgur.com/wDnd8.png?s=128&g=1","","39846","69530502","1","","","2021-10-11 17:51:18","","25","858","<p>In Android 12, if an app requests fine location permission via <code>ACCESS_FINE_LOCATION</code>, the user might elect to only grant coarse location permission. Unfortunately, not all APIs work with coarse location permission — in particular, AFAICT, to look up the SSID of the connected WiFi network, we need fine location permission, not coarse location permission.</p>
<p>If you re-request fine location permission, the user will be asked to upgrade your access, but the user might decline. As a result, we need a way to gracefully determine that the user granted us coarse location permission and that we are still eligible to request the upgrade.</p>
<p><a href=""https://gitlab.com/commonsguy/thisisfine"" rel=""noreferrer"">This sample project</a> just has a button to trigger a <code>requestPermissions()</code> for <code>ACCESS_FINE_LOCATION</code>, along with four labels to report:</p>
<ul>
<li>Were we granted fine location permission? (<code>checkSelfPermission()</code> for <code>ACCESS_FINE_LOCATION</code>)</li>
<li>Were we granted coarse location permission? (<code>checkSelfPermission()</code> for <code>ACCESS_COARSE_LOCATION</code>)</li>
<li>Should we prompt the user with rationale for our request, for fine permission? (<code>shouldShowRequestPermissionRationale()</code> for <code>ACCESS_FINE_LOCATION</code>)</li>
<li>Should we prompt the user with rationale for our request, for coarse permission? (<code>shouldShowRequestPermissionRationale()</code> for <code>ACCESS_COARSE_LOCATION</code>)</li>
</ul>
<p>Running this after a fresh install on an Pixel 3a XL running the final beta of Android 12, I get the following results after the listed sequence of actions:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th style=""text-align: center;"">Action</th>
<th style=""text-align: center;"">Has Fine Permission?</th>
<th style=""text-align: center;"">Has Coarse Permission?</th>
<th style=""text-align: center;"">Prompt for Fine?</th>
<th style=""text-align: center;"">Prompt for Coarse?</th>
</tr>
</thead>
<tbody>
<tr>
<td style=""text-align: center;"">launch the app</td>
<td style=""text-align: center;"">no</td>
<td style=""text-align: center;"">no</td>
<td style=""text-align: center;"">no</td>
<td style=""text-align: center;"">no</td>
</tr>
<tr>
<td style=""text-align: center;"">click button and grant approximate location while using the app</td>
<td style=""text-align: center;"">no</td>
<td style=""text-align: center;"">yes</td>
<td style=""text-align: center;"">no</td>
<td style=""text-align: center;"">no</td>
</tr>
<tr>
<td style=""text-align: center;"">click button again and choose &quot;Keep approximate location&quot;</td>
<td style=""text-align: center;"">no</td>
<td style=""text-align: center;"">yes</td>
<td style=""text-align: center;"">yes</td>
<td style=""text-align: center;"">no</td>
</tr>
<tr>
<td style=""text-align: center;"">click button a 3rd time and choose &quot;Keep approximate location&quot;</td>
<td style=""text-align: center;"">no</td>
<td style=""text-align: center;"">yes</td>
<td style=""text-align: center;"">no</td>
<td style=""text-align: center;"">no</td>
</tr>
</tbody>
</table>
</div>
<p>While these all make some sense individually, the problem is that the second and fourth results are the same:</p>
<ul>
<li>I have coarse location access</li>
<li>I am not told that I need to show rationale</li>
</ul>
<p>The problem is that if the user tries clicking the button a 4th time, we're into the &quot;don't ask again&quot; state, and no permission dialog appears. All the previous times, a permission dialog appears, either to initially grant the permission or to grant the upgrade. I would like to be able to detect the 4th or later attempt, so I can show my own dialog that says &quot;sorry, you need to go to Settings and grant the permission manually now&quot;. However, other than by tracking the count of requests myself, I do not know how to identify this case distinctly.</p>
<p>So, my question is: is there a way, using some existing permission or location APIs, to determine that I am no longer allowed to re-request <code>ACCESS_FINE_LOCATION</code>, and that further requests will result in immediate failures? In particular, the answer needs to be able to distinguish between the second and fourth rows in that table, so between &quot;the user only granted coarse access&quot; and &quot;the user only granted coarse access, and you tried the upgrade twice, which the user rejected each time&quot;.</p>
","115145","","115145","","2021-10-12 11:37:54","2022-09-30 15:58:38","How Can We Determine If We Can Request Location Permission Upgrade in Android 12?","<android><android-permissions>","0","12","5","","","CC BY-SA 4.0"
"903061","126560","2011-08-19 20:07:36","Gregor Thomas","2022-10-30 03:38:28","https://www.linkedin.com/in/gregorthomas","Traverse City, MI, United States","<p>Gregor Thomas, Data scientist, R user and teacher; board game and cooking enthusiast.</p>
<p>I compulsively correct the capitalizaton of <code>ggplot2</code> (all lower case is always correct) and remove the <code>rstudio</code> tag from the 99% of questions that don't need it.</p>
","10864","10094","581","https://i.stack.imgur.com/jMWGQ.jpg?s=128&g=1","","486257","67081496","1","","","2021-04-13 19:50:55","","25","1209","<p>I frequently need to recode some (not all!) values in a data frame column based off of a look-up table. I'm not satisfied by the ways I know of to solve the problem. I'd like to be able to do it in a <strong>clear, stable, and efficient</strong> way. Before I write my own function, I'd want to make sure I'm not duplicating something standard that's already out there.</p>
<pre><code>## Toy example
data = data.frame(
  id = 1:7,
  x = c(&quot;A&quot;, &quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot;, &quot;AA&quot;, &quot;.&quot;)
)

lookup = data.frame(
  old = c(&quot;A&quot;, &quot;D&quot;, &quot;.&quot;),
  new = c(&quot;a&quot;, &quot;d&quot;, &quot;!&quot;)
)

## desired result
#   id  x
# 1  1  a
# 2  2  a
# 3  3  B
# 4  4  C
# 5  5  d
# 6  6 AA
# 7  7  !
</code></pre>
<p>I can do it with a join, coalesce, unselect as below, but this <strong>isn't as clear</strong> as I'd like - too many steps.</p>
<pre><code>## This works, but is more steps than I want
library(dplyr)
data %&gt;%
  left_join(lookup, by = c(&quot;x&quot; = &quot;old&quot;)) %&gt;%
  mutate(x = coalesce(new, x)) %&gt;%
  select(-new)
</code></pre>
<p>It can also be done with <code>dplyr::recode</code>, as below, converting the lookup  table to a named lookup vector. I prefer <code>lookup</code> as a data frame, but I'm okay with the named vector solution. My concern here is that <code>recode</code> is the <em>Questioning</em> lifecycle phase, so I'm worried that this method <strong>isn't stable</strong>.</p>
<pre><code>lookup_v = pull(lookup, new) %&gt;% setNames(lookup$old)
data %&gt;%
  mutate(x = recode(x, !!!lookup_v))
</code></pre>
<p>It could also be done with, say, <code>stringr::str_replace</code>, but using regex for whole-string matching <strong>isn't efficient.</strong> I suppose there is <code>forcats::fct_recode</code> is a stable version of <code>recode</code>, but I don't want a <code>factor</code> output (though <code>mutate(x = as.character(fct_recode(x, !!!lookup_v)))</code> is perhaps my  favorite option so far...).</p>
<p>I had hoped that the new-ish <code>rows_update()</code> family of <code>dplyr</code> functions would work, but it is strict about column names, and I don't think it can update the column it's joining on. (And it's <em>Experimental</em>, so doesn't yet meet my stability requirement.)</p>
<p>Summary of my requirements:</p>
<ul>
<li>A single data column is updated based off of a lookup data frame (preferably) or named vector (allowable)</li>
<li>Not all values in the data are included in the lookup--the ones that are not present are not modified</li>
<li>Must work on <code>character</code> class input. Working more generally is a nice-to-have.</li>
<li>No dependencies outside of base R and <code>tidyverse</code> packages (though I'd also be interested in seeing a <code>data.table</code> solution)</li>
<li>No functions used that are in lifecycle phases like superseded or questioning. Please note any experimental lifecycle functions, as they have future potential.</li>
<li>Concise, clear code</li>
<li>I don't need extreme optimization, but nothing wildly inefficient (like regex when it's not needed)</li>
</ul>
","903061","","6851825","","2021-04-18 21:20:50","2022-08-05 19:35:01","Canonical tidyverse method to update some values of a vector from a look-up table","<r><dplyr><data.table><tidyverse><recode>","9","3","5","","","CC BY-SA 4.0"
"2380830","229261","2013-05-14 08:33:02","Bathsheba","2022-10-29 16:50:08","","Mayfair, London","<p>I'm an equity partner at an asset management firm in London.</p>
<p>I read mathematics at Cambridge and have been using C and C++ for many years. I have an affection for Java. In my opinion, Microsoft Excel is the best application ever written.</p>
","19409","9014","8853","https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1","","2764833","60442205","1","60680071","","2020-02-27 21:47:39","","23","750","<p>Consider</p>

<pre><code>int main()
{
    auto a = new int[0];
    delete[] a; // So there's no memory leak
}
</code></pre>

<p>Between the copy initialisation and deletion, are you allowed to read the pointer at <code>a + 1</code>?</p>

<p>Furthermore, does the language permit the compiler to set <code>a</code> to <code>nullptr</code>?</p>
","2380830","","","","","2020-03-17 22:11:13","Properties of a pointer to a zero length array","<c++><language-lawyer>","2","18","","","","CC BY-SA 4.0"
"209103","525781","2009-11-11 22:30:27","Frank van Puffelen","2022-10-30 03:47:47","","San Francisco, CA","<p>I am an engineer for Firebase at Google.</p>

<p>I respond equally well to being called ""Frank"" or ""puf"".</p>
","117878","18703","4177","","","72426","61536203","1","61536204","","2020-05-01 03:05:29","","22","3442","<p><em>firebaser here</em></p>

<p>When I recently <a href=""https://twitter.com/puf/status/1249700375516643328"" rel=""noreferrer"">tweeted</a> about the new <code>increment()</code> operator in the Firebase Realtime Database, a team mate asked how fast <code>increment()</code> is. </p>

<p>I've been wondering the same: how fast can you increment a value with <code>increment(1)</code>? And how does that compare to <a href=""https://firebase.google.com/docs/database/web/read-and-write#save_data_as_transactions"" rel=""noreferrer"">using a transaction to increment a value</a>?</p>
","209103","","","","","2020-05-01 03:15:36","How quickly can you atomically increment a value on the Firebase Realtime Database?","<javascript><node.js><firebase-realtime-database>","1","1","6","","","CC BY-SA 4.0"
"734069","426440","2011-05-02 07:17:28","Nicol Bolas","2022-10-30 05:37:48","https://nicolbolas.github.io/oldtut/index.html","","<p>I am a game developer with a fairly broad knowledgebase in the fields of animation and graphics, with a touch of AI.</p>

<p>Projects:</p>

<ul>
<li><a href=""https://nicolbolas.github.io/oldtut/index.html"" rel=""nofollow noreferrer"">A series of tutorials/eBook on graphics programming</a></li>
<li><a href=""https://nicolbolas.github.io/glsdk/index.html"" rel=""nofollow noreferrer"">The Unofficial OpenGL Software Development Kit</a></li>
<li><a href=""https://bitbucket.org/alfonse/glloadgen/wiki/Home"" rel=""nofollow noreferrer"">The OpenGL Loader Generator</a>, a much better alternative to GLEW</li>
</ul>
","47105","4969","7563","","","380209","61177302","1","61181916","","2020-04-12 19:54:16","","22","447","<p>The <a href=""https://timsong-cpp.github.io/cppwp/concepts#concept.equalitycomparable-4"" rel=""noreferrer"">concept <code>equality_­comparable_with&lt;T, U&gt;</code></a> is intended to declare that objects of type <code>T</code> and <code>U</code> can be compared equal to each other, and if they are, then this has the expected meaning. That's fine.</p>

<p>However, this concept also requires <code>common_reference_t&lt;T&amp;, U&amp;&gt;</code> to exist. The primary impetus for <code>common_reference</code> and its attendant functionality seems to be to <a href=""https://stackoverflow.com/a/59024241/734069"">enable proxy iterators</a>, to have a place to represent the relationship between <code>reference</code> and <code>value_type</code> for such iterators.</p>

<p>That's great, but... what does that have to do with testing if a <code>T</code> and a <code>U</code> can be compared equal to one another? Why does the standard require that <code>T</code> and <code>U</code> have a common reference relationship just to allow you to compare them equal?</p>

<p>This creates oddball situations where it's very difficult to have two types which don't reasonably have a common-reference relationship that are logically comparable. For example, <code>vector&lt;int&gt;</code> and <code>pmr::vector&lt;int&gt;</code> logically ought to be comparable. But they can't be because there's no reasonable common-reference between the two otherwise unrelated types.</p>
","734069","","","","","2021-04-04 05:36:37","Does `equality_­comparable_with` need to require `common_reference`?","<c++><c++20><c++-concepts>","1","3","4","","","CC BY-SA 4.0"
"57695","518206","2009-01-21 21:27:38","Peter Lawrey","2022-10-28 16:11:20","http://vanilla-java.github.io/","Surrey, UK","<p>Architect and CEO for Chronicle Software <a href=""http://chronicle.software"" rel=""nofollow noreferrer"">http://chronicle.software</a></p>

<p>Blog has had 4 million hits <a href=""http://vanilla-java.github.io"" rel=""nofollow noreferrer"">http://vanilla-java.github.io</a></p>

<p>Most answer for Java, JVM, concurrency, file-io and memory on Stackoverflow.com</p>

<p>Founder of the Performance Java User's Group.</p>

<p>Java Champion</p>
","80705","16878","392","","","23121","62550828","1","62557768","","2020-06-24 08:28:54","","21","751","<p>Is there a cheaper method call in Java 9+ which keeps its safepoint?</p>
<p>The JVM removes safepoints at runtime to improve efficiency however this can make profiling and monitoring the code more difficult. For this reason, we deliberately add trivial calls in <em>carefully selected</em> places to ensure there is a safepoint present.</p>
<pre><code>public static void safepoint() {
    if (IS_JAVA_9_PLUS)
        Thread.holdsLock(&quot;&quot;); // 100 ns on Java 11
    else
        Compiler.enable(); // 5 ns on Java 8
}

public static void optionalSafepoint() {
    if (SAFEPOINT_ENABLED)
        if (IS_JAVA_9_PLUS)
            Thread.holdsLock(&quot;&quot;);
        else
            Compiler.enable();
}
</code></pre>
<p>On Java 8 this overhead is fine, but <code>Compiler.enable()</code> gets optimised away in Java 9+ so we have to use a much more expensive method, or not enable this feature.</p>
<p>EDIT: Apart from profilers, I have used the <code>safepoint()</code> to get better detail from <code>Thread.getStackTrace()</code> so the application can profile itself e.g. when it takes too long to perform an action.</p>
","57695","","57695","","2020-06-25 12:24:55","2020-06-25 12:24:55","Is there a lightweight method which adds a safepoint in Java 9+","<java><jvm><java-11>","1","2","6","","","CC BY-SA 4.0"
"341994","497213","2010-05-15 16:05:56","matt","2022-10-30 03:13:44","http://www.apeth.net/matt/default.html","","<p>Author most recently of <a href=""https://learning.oreilly.com/library/view/ios-15-programming/9781098118495/"" rel=""nofollow noreferrer"">iOS 15 Programming Fundamentals with Swift</a> and of <a href=""https://www.oreilly.com/library/view/programming-ios-14/9781492092162/"" rel=""nofollow noreferrer"">Programming iOS 14</a>.</p>
<p>Code examples from the books available at <a href=""https://github.com/mattneub/Programming-iOS-Book-Examples"" rel=""nofollow noreferrer"">my github repository</a>.</p>
<p>A much earlier edition, <em>Programming iOS 6</em>, is available to read for free at <a href=""http://www.apeth.com/iOSBook/"" rel=""nofollow noreferrer"">http://www.apeth.com/iOSBook/</a>.</p>
<p>And the Swift language chapters of <em>iOS 10 Programming Fundamentals With Swift</em> are available at <a href=""http://www.apeth.com/swiftBook/"" rel=""nofollow noreferrer"">http://www.apeth.com/swiftBook/</a>.</p>
","68440","3276","34867","","","137658","63075418","1","63091539","","2020-07-24 14:15:06","","20","7592","<p>I'm watching and rewatching WWDC 2020 &quot;Modern cell configuration&quot; but enlightening does not strike.</p>
<p>I understand that the built-in ListContentConfiguration has properties similar to the <em>built-in cell style</em> components like the text label and the image view. But I never use the built-in cell styles; I always create a cell subclass and design the cell subviews from scratch in a xib or storyboard prototype cell, or even structure them in code.</p>
<p>So how do I use Apple's configurations to populate my cell's subviews?</p>
<p>The video says:</p>
<blockquote>
<p>In addition to the list content configuration we're also giving you access to the associated list content view which implements all of the rendering. You just create or update this view using the configuration, and then you can add it as a subview right alongside your own custom views. This lets you take advantage of all the content configuration features and combine the ListContentView with your own additional custom views next to it, such as an extra image view or a label.</p>
</blockquote>
<p>OK, no, that's not what I want to do. I don't want <em>any</em> of the built-in cell style subviews.</p>
<p>So then the video says:</p>
<blockquote>
<p>Even when you're building a completely custom view hierarchy inside your cells, you can still use the system configurations to help.
Because configurations are so lightweight, you can use them as a source of default values for things like fonts, colors, and margins that you copy over to your custom views, even if you never apply the configuration directly itself.
And for more advanced use cases you can <em>create a completely custom content configuration type with a paired content view class that renders it, and then use your custom configuration with any cell the same way that you would use a list content configuration.</em></p>
</blockquote>
<p>My italics, and the italics are part I'm asking about. I'm asking: how?</p>
<ul>
<li><p>I understand that there is a <a href=""https://developer.apple.com/documentation/uikit/uicontentconfiguration"" rel=""noreferrer"">UIContentConfiguration</a> protocol.</p>
</li>
<li><p>I understand that the conforming class <a href=""https://developer.apple.com/documentation/uikit/uicontentconfiguration/3600982-makecontentview"" rel=""noreferrer"">generates</a> through its <code>makeContentView</code> method a &quot;content view&quot;, a UIView with a <code>configuration</code> property (because it conforms to UIContentConfiguration).</p>
</li>
</ul>
<p>So how do I use that in conjunction with my custom cell subclass, to communicate information from the data source to the cell and populate the cell's subviews?</p>
<p>As usual, it feels like Apple shows us the toy examples and completely omits details about how this can work in the real world. Has anyone figured this out?</p>
","341994","","341994","","2020-07-25 17:22:34","2021-03-29 19:39:53","how to use iOS 14 cell content configurations in general?","<ios><uitableview><ios14>","2","2","8","","","CC BY-SA 4.0"
"7429447","164096","2017-01-17 08:59:30","undetected Selenium","2022-10-29 19:54:10","","Pune, Maharashtra, India","<p>A full stack test automation engineer and a web security analyst working with Selenium (Java/Python).</p>
<ul>
<li>Owner of <a href=""https://chat.stackoverflow.com/rooms/223360/selenium""><em><strong>Selenium</strong></em></a> room &amp; top answerer in <a href=""https://stackoverflow.com/tags/selenium/topusers""><strong>selenium</strong></a> and <a href=""https://stackoverflow.com/tags/selenium-webdriver/topusers""><strong>selenium-webdriver</strong></a> tags.</li>
<li>For <a href=""/questions/tagged/selenium"" class=""post-tag"" title=""show questions tagged &#39;selenium&#39;"" rel=""tag"">selenium</a> related <em>assignments</em> and <em>business queries</em> I'm reachable through <em><strong>debanjan.selenium@gmail.com</strong></em>.</li>
<li>If any of my discussion / article was helpful, you may like to...</li>
</ul>
<p><a href=""https://www.paypal.com/paypalme/debanjan786"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/Ou6Ha.png"" alt=""Buy me a coffee"" /></a> | <em>or you can also</em> |<strong>GPay</strong><img src=""https://i.stack.imgur.com/oqdR3s.jpg"" alt=""UPI ID IDBI"" /></p>
<ul>
<li>You can <a href=""https://saythanks.io/to/debanjan.selenium"" rel=""nofollow noreferrer""><em>Send a Thank You note to me!</em></a> too...</li>
<li>I'm available through <a href=""https://www.linkedin.com/in/debanjanb/"" rel=""nofollow noreferrer""><em><strong>LinkedIn</strong></em></a> as well.</li>
</ul>
","31606","7428","5679","https://i.stack.imgur.com/w4d7E.png?s=128&g=1","","10049107","63421086","1","63421649","","2020-08-14 23:21:35","","20","73925","<p>I've installed webdrivermanager on my <a href=""/questions/tagged/windows-10"" class=""post-tag"" title=""show questions tagged &#39;windows-10&#39;"" rel=""tag"">windows-10</a> system</p>
<pre><code>C:\Users\username&gt;pip install webdrivermanager
Requirement already satisfied: webdrivermanager in c:\python\lib\site-packages (0.8.0)
Requirement already satisfied: lxml in c:\python\lib\site-packages (from webdrivermanager) (4.5.1)
Requirement already satisfied: requests in c:\python\lib\site-packages (from webdrivermanager) (2.20.1)
Requirement already satisfied: tqdm in c:\python\lib\site-packages (from webdrivermanager) (4.46.1)
Requirement already satisfied: appdirs in c:\python\lib\site-packages (from webdrivermanager) (1.4.4)
Requirement already satisfied: BeautifulSoup4 in c:\python\lib\site-packages (from webdrivermanager) (4.6.0)
Requirement already satisfied: certifi&gt;=2017.4.17 in c:\python\lib\site-packages (from requests-&gt;webdrivermanager) (2018.11.29)
Requirement already satisfied: chardet&lt;3.1.0,&gt;=3.0.2 in c:\python\lib\site-packages (from requests-&gt;webdrivermanager) (3.0.4)
Requirement already satisfied: idna&lt;2.8,&gt;=2.5 in c:\python\lib\site-packages (from requests-&gt;webdrivermanager) (2.7)
Requirement already satisfied: urllib3&lt;1.25,&gt;=1.21.1 in c:\python\lib\site-packages (from requests-&gt;webdrivermanager) (1.23)
</code></pre>
<p>Still whenever I am trying to use webdrivermanager I'm facing an error.</p>
<ul>
<li><p>Code Block:</p>
<pre><code>from selenium import webdriver
from webdriver_manager.chrome import ChromeDriverManager

driver = webdriver.Chrome(executable_path=ChromeDriverManager().install())
driver.get('https://www.google.com/')
</code></pre>
</li>
<li><p>Console Output:</p>
<pre><code>C:\Users\username\Desktop\Debanjan\PyPrograms&gt;webdriverManagerChrome.py
Traceback (most recent call last):
  File &quot;C:\Users\username\Desktop\Debanjan\PyPrograms\webdriverManagerChrome.py&quot;, line 2, in &lt;module&gt;
    from webdriver_manager.chrome import ChromeDriverManager
ModuleNotFoundError: No module named 'webdriver_manager'  
</code></pre>
</li>
</ul>
<p>Can someone help me, if I'm missing something?</p>
<p>Incase it adds any value, I'm using <a href=""/questions/tagged/sublimetext3"" class=""post-tag"" title=""show questions tagged &#39;sublimetext3&#39;"" rel=""tag"">sublimetext3</a></p>
","7429447","","","","","2022-08-09 12:08:12","ModuleNotFoundError: No module named 'webdriver_manager' error even after installing webdrivermanager","<python><selenium><windows-10><sublimetext3><webdrivermanager-python>","11","1","5","","","CC BY-SA 4.0"
"878126","114239","2011-08-04 08:05:33","android developer","2022-10-29 09:41:55","","Israel","<p>Really like to develop Android apps &amp; libraries on my spare time.</p>

<p>Github website:
<a href=""https://github.com/AndroidDeveloperLB/"" rel=""nofollow noreferrer"">https://github.com/AndroidDeveloperLB/</a> </p>

<p>My spare time apps:
<a href=""https://play.google.com/store/apps/developer?id=AndroidDeveloperLB"" rel=""nofollow noreferrer"">https://play.google.com/store/apps/developer?id=AndroidDeveloperLB</a></p>
","54765","1073","47","https://i.stack.imgur.com/D5dZW.jpg","","796053","65967690","1","66466205","","2021-01-30 12:00:03","","20","9896","<h2>Background</h2>
<p>There are <a href=""https://developer.android.com/about/versions/11/privacy/storage#other-app-specific-dirs"" rel=""noreferrer"">various storage restrictions on Android 10 and 11</a>, which also includes a new permission (<a href=""https://developer.android.com/reference/android/Manifest.permission#MANAGE_EXTERNAL_STORAGE"" rel=""noreferrer"">MANAGE_EXTERNAL_STORAGE</a>) to access all files (yet it doesn't allow access to really all files ) while the previous storage permission got reduced to grant access just to media files :</p>
<ol>
<li>Apps can reach the &quot;media&quot; sub folder freely.</li>
<li>Apps can never reach &quot;data&quot; sub folder and especially the content.</li>
<li>For &quot;obb&quot; folder, if the app was allowed to install apps, it can reach it (to copy files to there). Otherwise it can't.</li>
<li>Using USB or root, you could still reach them, and as an end user you can reach them via the built-in file-manager app &quot;Files&quot;.</li>
</ol>
<h2>The problem</h2>
<p>I've noticed an app that somehow overcome this limitation (<a href=""https://www.androidpolice.com/2021/01/29/x-plore-is-one-of-the-first-file-managers-to-bypass-scoped-storages-drastic-limitations-on-android-11/"" rel=""noreferrer"">here</a>) called &quot;<a href=""https://play.google.com/store/apps/details?id=com.lonelycatgames.Xplore&amp;hl=en&amp;gl=US"" rel=""noreferrer"">X-plore</a>&quot;: Once you enter &quot;Android/data&quot; folder, it asks you to grant access to it (directly using SAF, somehow), and when you grant it, you can access everything in all folders of &quot;Android&quot; folder.</p>
<p>This means there might still be a way to reach it, but problem is that I couldn't make a sample that does the same, for some reason.</p>
<h2>What I've found and tried</h2>
<p>It seems this app targets API 29 (Android 10), and that it doesn't use the new permission yet, and that it has the flag <a href=""https://developer.android.com/training/data-storage/use-cases#opt-out-scoped-storage"" rel=""noreferrer"">requestLegacyExternalStorage</a>. I don't know if the same trick they use will work when targeting API 30, but I can say that on my case, running on Pixel 4 with Android 11, it works fine.</p>
<p>So I tried to do the same:</p>
<ol>
<li><p>I made a sample POC that targets Android API 29, has storage permissions (of all kinds) granted, including the legacy flag.</p>
</li>
<li><p>I tried to request access directly to &quot;Android&quot; folder (based on <a href=""https://developer.android.com/training/data-storage/shared/documents-files#grant-access-directory"" rel=""noreferrer"">here</a>), which sadly didn't work as it goes to some reason (kept going to DCIM folder, no idea why) :</p>
</li>
</ol>
<pre><code>val androidFolderDocumentFile = DocumentFile.fromFile(File(primaryVolume.directory!!, &quot;Android&quot;))
val intent = Intent(Intent.ACTION_OPEN_DOCUMENT_TREE)
        .setFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION or Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED) 
        .putExtra(DocumentsContract.EXTRA_INITIAL_URI, androidFolderDocumentFile.uri)
startActivityForResult(intent, 1)
</code></pre>
<p>I tried various flags combinations.</p>
<ol start=""3"">
<li><p>When launching the app, when I reach the &quot;Android&quot; folder myself manually as this didn't work well, and I granted the access to this folder just like on the other app.</p>
</li>
<li><p>When getting the result, I try to fetch the files and folders in the path, but it fails to get them:</p>
</li>
</ol>
<pre><code>override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {
    super.onActivityResult(requestCode, resultCode, data)
    Log.d(&quot;AppLog&quot;, &quot;resultCode:$resultCode&quot;)
    val uri = data?.data ?: return
    if (!DocumentFile.isDocumentUri(this, uri))
        return
    grantUriPermission(packageName, uri, Intent.FLAG_GRANT_READ_URI_PERMISSION or Intent.FLAG_GRANT_WRITE_URI_PERMISSION)
    contentResolver.takePersistableUriPermission(uri, Intent.FLAG_GRANT_READ_URI_PERMISSION or Intent.FLAG_GRANT_WRITE_URI_PERMISSION)
    val fullPathFromTreeUri = FileUtilEx.getFullPathFromTreeUri(this, uri) // code for this here: https://stackoverflow.com/q/56657639/878126
    val documentFile = DocumentFile.fromTreeUri(this, uri)
    val listFiles: Array&lt;DocumentFile&gt; = documentFile!!.listFiles() // this returns just an array of a single folder (&quot;media&quot;)
    val androidFolder = File(fullPathFromTreeUri)
    androidFolder.listFiles()?.forEach {
        Log.d(&quot;AppLog&quot;, &quot;${it.absoluteFile} children:${it.listFiles()?.joinToString()}&quot;) //this does find the folders, but can't reach their contents
    }
    Log.d(&quot;AppLog&quot;, &quot;granted uri:$uri $fullPathFromTreeUri&quot;)
}
</code></pre>
<p>So using DocumentFile.fromTreeUri I could still get just &quot;media&quot; folder which is useless, and using the File class I could only see there are also &quot;data&quot; and &quot;obb&quot; folders, but still couldn't reach their contents...</p>
<p>So this didn't work well at all.</p>
<p>Later I've found out another app that uses this trick, called &quot;<a href=""https://www.apkmirror.com/apk/hootan-parsa/mixplorer-hootanparsa/mixplorer-hootanparsa-6-51-0-sdk30-release/"" rel=""noreferrer"">MiXplorer</a>&quot;. On this app, it failed to request &quot;Android&quot; folder directly (maybe it didn't even try), but it does grant you full access to it and its sub-folders once you allow it. And, it targets API 30, so this means it's not working just because you target API 29.</p>
<p>I've noticed (someone wrote me) that with some changes to the code, I could request access to each of the sub-folders separately (meaning a request for &quot;data&quot; and a new request for &quot;obb&quot;), but this is not what I see here, that apps do.</p>
<p>Meaning, to get to &quot;Android&quot; folder, I get use this Uri as a parameter for Intent.EXTRA_INITIAL_URI :</p>
<pre><code>val androidUri=Uri.Builder().scheme(&quot;content&quot;).authority(&quot;com.android.externalstorage.documents&quot;)
                    .appendEncodedPath(&quot;tree&quot;).appendPath(&quot;primary:&quot;).appendPath(&quot;document&quot;).appendPath(&quot;primary:Android&quot;).build()
</code></pre>
<p>However, once you get an access to it, you won't be able to get the list of files from it, not via File, and not via SAF.</p>
<p>But, as I wrote, the weird thing is that if you try something similar, of getting to &quot;Android/data&quot; instead, you will be able to get its content:</p>
<pre><code>val androidDataUri=Uri.Builder().scheme(&quot;content&quot;).authority(&quot;com.android.externalstorage.documents&quot;)
                 .appendEncodedPath(&quot;tree&quot;).appendPath(&quot;primary:&quot;).appendPath(&quot;document&quot;).appendPath(&quot;primary:Android/data&quot;).build()
</code></pre>
<h2>The questions</h2>
<ol>
<li>How can I request an Intent directly to &quot;Android&quot; folder that will actually let me access to it, and let me get the sub-folders and their contents?</li>
<li>Is there another alternative for this? Maybe using adb and/or root, I could grant SAF access to this specific folder ?</li>
</ol>
","878126","","878126","","2021-02-25 22:00:18","2021-08-31 22:41:22","How do some apps reach the contents of "".../Android/..."" sub-folders on Android 11 without root?","<android><storage-access-framework><android-11>","3","30","17","","","CC BY-SA 4.0"
"878126","114239","2011-08-04 08:05:33","android developer","2022-10-29 09:41:55","","Israel","<p>Really like to develop Android apps &amp; libraries on my spare time.</p>

<p>Github website:
<a href=""https://github.com/AndroidDeveloperLB/"" rel=""nofollow noreferrer"">https://github.com/AndroidDeveloperLB/</a> </p>

<p>My spare time apps:
<a href=""https://play.google.com/store/apps/developer?id=AndroidDeveloperLB"" rel=""nofollow noreferrer"">https://play.google.com/store/apps/developer?id=AndroidDeveloperLB</a></p>
","54765","1073","47","https://i.stack.imgur.com/D5dZW.jpg","","796053","65463893","1","","","2020-12-27 08:05:32","","19","4484","<h2>Background</h2>
<p>On one of the apps I work on, I store important stuff (tokens) into EncryptedSharedPreferences (taken from <a href=""https://developer.android.com/jetpack/androidx/releases/security"" rel=""noreferrer""><strong>here</strong></a> and <a href=""https://maven.google.com/web/index.html?q=androidx.security#androidx.security:security-crypto"" rel=""noreferrer""><strong>here</strong></a>):</p>
<pre><code>/** a hardware-encrypted based shared preference (for the values).
 * Note that it is a bit slow, so it's better to always use it in a background thread.
 * Also, avoid having it being backed-up in the manifest, as it's hardware based and will become useless: https://stackoverflow.com/a/63795282/878126*/
object SecuredSharedPreferences {
    private var cachedDefaultSharedPreferences: SharedPreferences? = null

    /**warning: using this function can take some time (249 ms on Pixel 4, for example). Very recommended to avoid calling it on UI thread */
    @WorkerThread
    fun getDefaultSecuredSharedPreferences(context: Context): SharedPreferences {
        if (cachedDefaultSharedPreferences != null)
            return cachedDefaultSharedPreferences!!
        synchronized(this) {
            if (cachedDefaultSharedPreferences != null)
                return cachedDefaultSharedPreferences!!
            cachedDefaultSharedPreferences = getSecuredSharedPreferences(context, context.packageName + &quot;_secured_preferences&quot;)
        }
        return cachedDefaultSharedPreferences!!
    }

    @WorkerThread
    private fun getSecuredSharedPreferences(context: Context, fileName: String): SharedPreferences {
        val masterKey = MasterKey.Builder(context, MasterKey.DEFAULT_MASTER_KEY_ALIAS).setKeyScheme(MasterKey.KeyScheme.AES256_GCM).build()
        return EncryptedSharedPreferences.create(context, fileName, masterKey,
                EncryptedSharedPreferences.PrefKeyEncryptionScheme.AES256_SIV,
                EncryptedSharedPreferences.PrefValueEncryptionScheme.AES256_GCM
        )
    }
}
</code></pre>
<p>gradle:</p>
<pre><code>implementation 'androidx.security:security-crypto:1.1.0-alpha03'
</code></pre>
<h2>The problem</h2>
<p>I've noticed 2 bugs being reported via Crashlytics when using this code (reported <a href=""https://issuetracker.google.com/issues/176215143"" rel=""noreferrer""><strong>here</strong></a>):</p>
<ol>
<li>First one is of the <code>MasterKey.Builder</code> line of <code>GeneralSecurityException</code> :</li>
</ol>
<pre><code>Fatal Exception: java.security.GeneralSecurityException: Keystore operation failed
       at androidx.security.crypto.MasterKeys.generateKey(MasterKeys.java:146)
       at androidx.security.crypto.MasterKeys.getOrCreate(MasterKeys.java:97)
       at androidx.security.crypto.MasterKey$Builder.buildOnM(MasterKey.java:357)
       at androidx.security.crypto.MasterKey$Builder.build(MasterKey.java:314)
...
Caused by java.security.ProviderException: Keystore operation failed
       at android.security.keystore.AndroidKeyStoreKeyGeneratorSpi.engineGenerateKey(AndroidKeyStoreKeyGeneratorSpi.java:372)
       at javax.crypto.KeyGenerator.generateKey(KeyGenerator.java:612)
       at androidx.security.crypto.MasterKeys.generateKey(MasterKeys.java:142)
       at androidx.security.crypto.MasterKeys.getOrCreate(MasterKeys.java:97)
       at androidx.security.crypto.MasterKey$Builder.buildOnM(MasterKey.java:357)
       at androidx.security.crypto.MasterKey$Builder.build(MasterKey.java:314)
</code></pre>
<ol start=""2"">
<li>Second one is on <code>EncryptedSharedPreferences.create</code> line of <code>KeyStoreException</code>, and occurs more often and for more users :</li>
</ol>
<pre><code>Fatal Exception: java.security.KeyStoreException: the master key android-keystore://_androidx_security_master_key_ exists but is unusable
       at com.google.crypto.tink.integration.android.AndroidKeysetManager$Builder.readOrGenerateNewMasterKey(AndroidKeysetManager.java:275)
       at com.google.crypto.tink.integration.android.AndroidKeysetManager$Builder.build(AndroidKeysetManager.java:236)
       at androidx.security.crypto.EncryptedSharedPreferences.create(EncryptedSharedPreferences.java:155)
       at androidx.security.crypto.EncryptedSharedPreferences.create(EncryptedSharedPreferences.java:120)
...
Caused by java.security.UnrecoverableKeyException: Failed to obtain information about key
       at android.security.keystore.AndroidKeyStoreProvider.loadAndroidKeyStoreSecretKeyFromKeystore(AndroidKeyStoreProvider.java:282)
       at android.security.keystore.AndroidKeyStoreSpi.engineGetKey(AndroidKeyStoreSpi.java:98)
       at java.security.KeyStore.getKey(KeyStore.java:825)
       at com.google.crypto.tink.integration.android.AndroidKeystoreAesGcm.&lt;init&gt;(AndroidKeystoreAesGcm.java:58)
       at com.google.crypto.tink.integration.android.AndroidKeystoreKmsClient.getAead(AndroidKeystoreKmsClient.java:164)
       at com.google.crypto.tink.integration.android.AndroidKeysetManager$Builder.readOrGenerateNewMasterKey(AndroidKeysetManager.java:267)
       at com.google.crypto.tink.integration.android.AndroidKeysetManager$Builder.build(AndroidKeysetManager.java:236)
       at androidx.security.crypto.EncryptedSharedPreferences.create(EncryptedSharedPreferences.java:155)
       at androidx.security.crypto.EncryptedSharedPreferences.create(EncryptedSharedPreferences.java:120)
</code></pre>
<p>EDIT: seems there are even more types of exceptions:</p>
<ol start=""3"">
<li>InvalidProtocolBufferException:</li>
</ol>
<pre><code>Fatal Exception: com.google.crypto.tink.shaded.protobuf.InvalidProtocolBufferException: Protocol message contained an invalid tag (zero).
       at com.google.crypto.tink.shaded.protobuf.GeneratedMessageLite.parsePartialFrom(GeneratedMessageLite.java:1566)
       at com.google.crypto.tink.shaded.protobuf.GeneratedMessageLite.parseFrom(GeneratedMessageLite.java:1663)
       at com.google.crypto.tink.proto.Keyset.parseFrom(Keyset.java:957)
       at com.google.crypto.tink.integration.android.SharedPrefKeysetReader.read(SharedPrefKeysetReader.java:84)
       at com.google.crypto.tink.CleartextKeysetHandle.read(CleartextKeysetHandle.java:58)
       at com.google.crypto.tink.integration.android.AndroidKeysetManager$Builder.read(AndroidKeysetManager.java:328)
       at com.google.crypto.tink.integration.android.AndroidKeysetManager$Builder.readOrGenerateNewKeyset(AndroidKeysetManager.java:287)
       at com.google.crypto.tink.integration.android.AndroidKeysetManager$Builder.build(AndroidKeysetManager.java:238)
       at androidx.security.crypto.EncryptedSharedPreferences.create(EncryptedSharedPreferences.java:160)
       at androidx.security.crypto.EncryptedSharedPreferences.create(EncryptedSharedPreferences.java:120)
</code></pre>
<ol start=""4"">
<li>NullPointerException:</li>
</ol>
<pre><code>Fatal Exception: java.lang.NullPointerException: Attempt to invoke interface method 'android.security.keymaster.OperationResult android.security.IKeystoreService.begin(android.os.IBinder, java.lang.String, int, boolean, android.security.keymaster.KeymasterArguments, byte[], int)' on a null object reference
       at android.security.KeyStore.begin(KeyStore.java:501)
       at android.security.keystore.AndroidKeyStoreCipherSpiBase.ensureKeystoreOperationInitialized(AndroidKeyStoreCipherSpiBase.java:248)
       at android.security.keystore.AndroidKeyStoreCipherSpiBase.engineInit(AndroidKeyStoreCipherSpiBase.java:109)
       at javax.crypto.Cipher.tryTransformWithProvider(Cipher.java:2977)
       at javax.crypto.Cipher.tryCombinations(Cipher.java:2884)
       at javax.crypto.Cipher$SpiAndProviderUpdater.updateAndGetSpiAndProvider(Cipher.java:2789)
       at javax.crypto.Cipher.chooseProvider(Cipher.java:956)
       at javax.crypto.Cipher.init(Cipher.java:1199)
       at javax.crypto.Cipher.init(Cipher.java:1143)
       at com.google.crypto.tink.integration.android.AndroidKeystoreAesGcm.encryptInternal(AndroidKeystoreAesGcm.java:84)
       at com.google.crypto.tink.integration.android.AndroidKeystoreAesGcm.encrypt(AndroidKeystoreAesGcm.java:72)
       at com.google.crypto.tink.integration.android.AndroidKeystoreKmsClient.validateAead(AndroidKeystoreKmsClient.java:248)
       at com.google.crypto.tink.integration.android.AndroidKeystoreKmsClient.getAead(AndroidKeystoreKmsClient.java:165)
       at com.google.crypto.tink.integration.android.AndroidKeysetManager$Builder.readOrGenerateNewMasterKey(AndroidKeysetManager.java:267)
       at com.google.crypto.tink.integration.android.AndroidKeysetManager$Builder.build(AndroidKeysetManager.java:236)
       at androidx.security.crypto.EncryptedSharedPreferences.create(EncryptedSharedPreferences.java:155)
       at androidx.security.crypto.EncryptedSharedPreferences.create(EncryptedSharedPreferences.java:120)
</code></pre>
<h2>What I've tried</h2>
<p>Searching the Internet, I've found clues only for the first exception (GeneralSecurityException), that it might be that it occurs for custom ROMs, as they might not implement well the hardware keys for encryption.</p>
<p>And indeed, looking at the devices on Crashlytics, and looking at the Android version of each, I've found that they are ahead of what I see about the latest version that was supported for them.</p>
<p>For the second exception, sadly, I couldn't find any explanation and no solution either. I think it might be related to recovery of apps, but it's weird as it occurs quite often. On reddit (<a href=""https://www.reddit.com/r/android_devs/comments/kjgl3b/help_getting_a_weird_crash_when_using/ggwpy75/?utm_source=reddit&amp;utm_medium=web2x&amp;context=3"" rel=""noreferrer"">here</a>), someone wrote that in case of such an exception, he chose to <code>wrap the initialization of EncryptedSharedPreferences with &quot;clear all data if fails&quot; and bite the bullet</code>. Also suggested it might be related to having <code>android:allowBackup</code> being disabled (and indeed it is).</p>
<p>No idea about the rest.</p>
<h2>The question</h2>
<p>Why do these exceptions occur? What can I do against them?</p>
<p>Is clear-data the only thing that can be done? I'm not even sure it really helps, because if I choose to have it, it means the crash report will be gone each time it's about to happen...</p>
<p>Is it related to <code>android:allowBackup</code> being disabled?</p>
","878126","","878126","","2020-12-29 08:55:24","2022-03-23 05:42:20","Getting KeyStoreException and GeneralSecurityException by using EncryptedSharedPreferences, how can I solve those?","<android><encrypted-shared-preference>","2","5","8","","","CC BY-SA 4.0"
"224132","301381","2009-12-03 18:17:41","Peter Cordes","2022-10-30 05:40:59","","Halifax, Canada","<p>GNU/Linux hacker and command line junkie.</p>

<p>Primary maintainer of the Stackoverflow <a href=""/questions/tagged/x86"" class=""post-tag"" title=""show questions tagged &#39;x86&#39;"" rel=""tag"">x86</a> <a href=""http://stackoverflow.com/tags/x86/info"">tag wiki</a>.</p>

<p>I like efficient code, and knowing how things <em>really</em> work.</p>

<p>I mostly use C/C++ (and perl/bash) on Linux, but I mostly look at assembly-language stuff on SO because it's more interesting to me, and there are fewer people posting good asm answers.</p>

<p>(profile pic is from <a href=""https://xkcd.com/386/"" rel=""nofollow"">https://xkcd.com/386/</a>, and describes me perfectly.  Incomplete answers/explanations make me crazy.)</p>
","71995","32616","8011","https://i.stack.imgur.com/N4ivW.png?s=128&g=1","","78868","61521819","1","61534738","","2020-04-30 10:57:23","","19","2089","<p>What <em>really</em> happens on modern PC hardware booted in 16-bit legacy BIOS MBR mode when you store a byte such as <code>'1'</code> (0x31) into the <a href=""https://wiki.osdev.org/VGA_Hardware#Memory_Layout_in_text_modes"" rel=""noreferrer"">VGA text (mode 03)</a> framebuffer at physical linear address <code>B8000</code>?  <strong>How slow is a <code>mov [es:di], eax</code> store with the <a href=""https://en.wikipedia.org/wiki/Memory_type_range_register"" rel=""noreferrer"">MTRR</a> for that region set to UC?</strong>  (<a href=""https://stackoverflow.com/questions/61460126/optimizing-an-incrementing-ascii-decimal-counter-in-video-ram-on-7th-gen-intel-c/61481672?noredirect=1#comment108803831_61481672"">Experimental testing on one Kaby Lake iGPU laptop</a> indicates that clflushopt on WC was roughly the same speed as UC for VGA memory.  But without clflushopt, <code>mov</code> stores to WC memory never leave the CPU and don't update the screen at all, running super fast.)</p>

<p>If it's not an SMI for every store, is there any way to approximate this cost on a chunk of WB memory in user-space, for performance experiments without actually rebooting into real mode?  (e.g. using a BSS page as a pretend framebuffer that doesn't actually display anywhere).</p>

<p>The corresponding font glyph appears on screen in the next refresh, but is hardware scan-out really reading that ASCII char from VRAM (or DRAM for an iGPU) and mapping to bitmap font glyphs on the fly?  Or is there some software interception on each store or once per vblank so the real hardware only has to handle a bitmapped framebuffer?</p>

<hr>

<p>Legacy BIOS booting is <a href=""https://en.wikipedia.org/wiki/System_Management_Mode#Usage"" rel=""noreferrer"">well known to use System Management Mode (SMM)</a> to emulate USB kbd/mouse as a PS/2 devices.  I'm wondering if it's also used for the VGA text mode framebuffer.  I assume it <em>is</em> used for VGA I/O ports for mode-setting but it's plausible that a text framebuffer could be supported by hardware.  However, most computers spend all their time in graphics mode so leaving out HW support for text mode seems like something vendors might want to do.  (OTOH <a href=""https://ktln2.org/2018/06/17/vga-text-mode-verilog/"" rel=""noreferrer"">this blog</a> suggests that a homebrew verilog VGA controller can implement text mode fairly simply.)</p>

<p><strong>I'm specifically interested in systems using the iGPU in Intel Skylake,</strong> but would be interested in earlier / later iGPUs from Intel and AMD, and new or old discrete GPUs.</p>

<p>(Including vendors other than AMD and NVidia; there are some Skylake motherboards with PCI slots, not PCIe.  If modern GPU firmware drivers do emulate text mode, presumably there are some old PCI video cards with hardware VGA text mode.  And maybe such a card could make stores just be a PCI transaction instead of an SMI.)</p>

<p>My own desktop is an i7-6700k in an Asus Z170 Pro Gaming mobo, no add-on cards just iGPU with a 1920x1200 monitor on the DVI-D output.  I don't know the details of the Kaby Lake i5-7300HQ system @Eldan is testing on, only the CPU model.</p>

<hr>

<p>I found <strong>Phoenix BIOS's <a href=""https://patents.google.com/patent/US20120159520"" rel=""noreferrer"">patent US20120159520</a> from 2011</strong>, 
<em>Emulating legacy video using uefi</em>.  Instead of requiring video hardware vendors to supply both UEFI <em>and</em> native 16-bit real mode option-ROM drivers, they propose a real-mode VGA driver (<code>int 10h</code> functions and so on) that calls a vendor-supplied UEFI video driver via SMM hooks.</p>

<blockquote>
  <p><strong>Abstract</strong><br>
  [...] The generic video option ROM notifies a generic video SMM driver of the request for video services. Such notification may be performed using a software system management interrupt (SMI). Upon notification, the generic video SMM driver notifies a third party UEFI video driver of the request for video services. The third party video driver provides the requested video services to the operating system. In this way, a third party UEFI graphics driver may support a wide variety of operating systems, even those that do not natively support the UEFI display protocols.</p>
</blockquote>

<p>Much of the description covers handling <code>int 10h</code> calls and stuff like that which already obviously trap through the IVT, thus can easily run custom code that triggers an SMI on purpose.  The relevant part is what they describe for direct stores into the text-mode framebuffer which need to work even for code that doesn't trigger any software or hardware interrupts.  (Other than HW triggering SMI on such stores, which they say they can use if supported.)</p>

<blockquote>
  <p><strong>Text Buffer Support</strong></p>
  
  <p>[0066] In certain embodiments, <strong>applications may manipulate the VGA's
  text buffer directly</strong>. In such an embodiment, generic video SMM driver
  130 support this in one of two ways, <strong>depending on whether the hardware
  provides SMI trapping on read/write access</strong> to the 740 KB-768 KB memory
  region (where the text buffers are located).</p>
  
  <p>[0067] When SMI trapping is available, the hardware generates an SMI
  on each read or write access. Using the trap address of the SMI trap,
  the exact text column and row may be calculated and the corresponding
  row and column in the virtual text screen accessed.</p>
  
  <p>Alternately,
  normal memory is enabled for this region and, using a periodic SMI,
  generic video SMM driver 130 scans for changes in the emulated
  hardware text buffer and updates the corresponding virtual text screen
  maintained by the video driver. In both cases, when a change is
  detected, the character is redrawn on the virtual text screen.</p>
</blockquote>

<p>This is just one BIOS vendor's patent, and doesn't tell us which way most hardware actually works, or if other vendors do different things.  It does essentially confirm that <em>some</em> hardware exists which can trap on stores in that range, though.  (Unless that's just a hypothetical possibility that they decided to cover in their patent.)</p>

<p>For the use-case I have in mind, trapping only on screen refresh would be vastly faster than trapping on every store so I'm curious which hardware / firmware works which way.</p>

<hr>

<h2><strong>Motivation for this question</strong></h2>

<p><a href=""https://stackoverflow.com/questions/61460126/optimizing-an-incrementing-ascii-decimal-counter-in-video-ram-on-7th-gen-intel-c"">Optimizing an incrementing ASCII decimal counter in video RAM on 7th gen Intel Core</a> - repeatedly storing new digits for an ASCII text counter into the same few bytes of video RAM.</p>

<p>I tested a version of the code in 32-bit user-space under Linux, on WB memory, hoping to approximate the situation with <code>movnti</code> and different ways of getting the CPU to sync its WC buffer to video RAM after each store (or perhaps occasionally in a timer interrupt).  But this is not realistic if the real-mode bootloader situation isn't just storing to DRAM, but instead triggering an SMI.</p>

<p>On WB memory, flushing <code>movnti</code> stores with a <code>lock xor byte [esp], 0</code> is somewhat faster than flushing with <code>clflushopt</code>.  But @Eldan reports no speed improvement for those on VGA memory after programming an MTRR to make it WC.  (And the same speed as for the original doing normal stores, indicating that by default the VGA framebuffer was UC.  Some older BIOSes <a href=""https://www.techarp.com/bios-guide/video-memory-cache-mode/"" rel=""noreferrer"">had an option to make VGA memory WC</a>, which they called USWC = Uncached Speculative Write Combining.)</p>

<p><strong>It's not a real-world problem so I'm not looking for actual workarounds</strong>; although it would be interesting to know if manually storing pixel bytes into a VGA graphics mode could be much faster.</p>

<hr>

<h1>Summary</h1>

<ol>
<li>Do any / all real modern systems trigger an SMI on every store to the text-mode framebuffer?</li>
<li>If no, can we approximate a WC store+clflush to the framebuffer, using a movnti + something in user-space on WB memory?  So we can easily profile with <code>perf</code> for performance counters.</li>
<li>If different BIOSes and/or hardware use different strategies, what are those strategies?  (I don't want details, just a high level like ""SMI every vblank to sync the VGA framebuffer to the actual hardware framebuffer"")</li>
<li>Would a PCIe or PCI video card with hardware VGA textmode be faster than whatever integrated GPUs actually do?  I'm guessing an actual PCIe write transaction would be slower than waiting for a store to hit DRAM, but that a PCIe write would be cheaper than an SMI on every store.  A ballpark / order of magnitude comparison would be interesting.</li>
</ol>

<p>These questions are all highly related, but I can split this up if there isn't as much overlap as I expect.</p>
","224132","","","","","2020-05-02 09:33:35","Does modern PC video hardware support VGA text mode in HW, or does the BIOS emulate it (with System Management Mode)?","<performance><assembly><x86-16><bios><vga>","2","7","5","","","CC BY-SA 4.0"
"362536","155085","2010-06-09 14:24:09","Brad","2022-10-30 05:04:11","","Illinois, USA","<p>Software engineer.  Web evangelist.  Core competencies include:</p>
<ul>
<li>Audio</li>
<li>Streaming Media</li>
<li>Teaching</li>
<li>Oddball cross-systems integration</li>
<li>Newfangled browser APIs and standards</li>
</ul>
<p>I like to work on strange projects that enable people to do things in the real world that would be otherwise difficult or impossible.  Want to integrate GNSS with sonar sensors to make 3D maps of a river bed?  How about control MIDI synthesizers and DMX lighting with your brainwaves?  Perhaps you just want to build and deploy something reliable and scalable without unnecessary complexity?  This is what I do.</p>
<p>I also like to teach others anything I can.  I embed well with existing teams and can help up-level developers' skills in areas I have knowledge of.  Do you already have an effective web team that needs help adding streaming audio/video to your site?  Invite me to meet your folks to see if I can assist.</p>
<p>I am available for consulting.  You may contact me at brad@audiopump.co.  Thank you!</p>
","25440","16341","3340","https://i.stack.imgur.com/yt7Em.jpg","","149787","60583049","1","61245662","","2020-03-07 23:10:23","","18","5128","<p>How can I close/exit my PWA?</p>

<p>I had assumed I'd be able to do this:</p>

<pre><code>window.close();
</code></pre>

<p>Unfortunately, that results in the usual error:</p>

<blockquote>
  <p>Scripts may close only the windows that were opened by it.</p>
</blockquote>

<p>Is there any way to programmatically close my PWA?</p>
","362536","","","","","2020-04-17 16:10:29","Close/exit a PWA programmatically","<javascript><google-chrome><progressive-web-apps>","1","4","1","","","CC BY-SA 4.0"
"807126","280004","2011-06-20 17:45:35","Doug Stevenson","2022-10-29 18:31:03","https://www.chiselstrike.com/","127.0.0.1","<p>Developer Relations @ <a href=""https://www.chiselstrike.com/"" rel=""nofollow noreferrer"">ChiselStrike</a>.</p>
<p>I am also available as an <a href=""http://firebase-consultant.com"" rel=""nofollow noreferrer"">independent consultant specializing in Firebase</a> and can help you on an hourly, paid basis with Firebase products.</p>
<p>I dig ChiselStrike, web, Firebase, Android, Node.js, Google Cloud, TypeScript, Kotlin.</p>
","47425","175","908","https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1","","426109","60982068","1","60983361","","2020-04-01 23:44:45","","18","3981","<p>When deploying a docker container image to Cloud Run, I can choose a region, which is fine.  Cloud Run delegates the build to Cloud Build, which apparently creates two buckets to make this happen.  The unexpected behavior is that buckets aren't created in the region of the Cloud Run deployment, and instead default to multi-region US.</p>

<p><strong>How do I specify the region as ""us-east1"" so the cost of storage is absorbed by the ""always free"" tier?</strong>  (Apparently US multi-region storage buckets store data in regions outside of the free tier limits, which resulted in a surprise bill - I am trying to avoid that bill.)</p>

<p>If it matters, I am also using Firebase in this project.  I created the Firebase default storage bucket in the us-east1 region with the hopes that it might also become the default for other buckets, but this is not so.  The final bucket list looks like this, where you can see the two buckets created automatically with the undesirable multi-region setting.</p>

<p><a href=""https://i.stack.imgur.com/MRS5H.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/MRS5H.png"" alt=""enter image description here""></a></p>

<p>This is the shell script I'm using to build and deploy:</p>

<pre class=""lang-sh prettyprint-override""><code>#!/bin/sh

project_id=$1
service_id=$2

if [ -z ""$project_id"" ]; then
    echo ""First argument must be the Google Cloud project ID"" &gt;&amp;2
    exit 1
fi

if [ -z ""$service_id"" ]; then
    echo ""Second argument must be the Cloud Run app name"" &gt;&amp;2
    exit 1
fi

echo ""Deploying $service_id to $project_id""

tag=""gcr.io/$project_id/$service_id""

gcloud builds submit \
    --project ""$project_id"" \
    --tag ""$tag"" \
&amp;&amp; \
gcloud run deploy ""$service_id"" \
    --project ""$project_id"" \
    --image ""$tag"" \
    --platform managed \
    --update-env-vars ""GOOGLE_CLOUD_PROJECT=$project_id"" \
    --region us-central1 \
    --allow-unauthenticated
</code></pre>
","807126","","807126","","2020-04-02 02:07:44","2021-01-26 17:35:57","How can I specify a region for the Cloud Storage buckets used by Cloud Build for a Cloud Run deployment?","<google-cloud-platform><google-cloud-storage><google-cloud-build><google-cloud-run>","2","5","3","","","CC BY-SA 4.0"
"259769","108877","2010-01-27 03:57:55","Enigmativity","2022-10-19 10:19:35","","Adelaide, Australia","<p>C#, LINQ, Reactive Framework developer. Enjoy Prolog programming and am dabbling in F#.</p>
","12778","5262","4133","https://i.stack.imgur.com/0iE2z.jpg","","95372","67888049","1","67902834","","2021-06-08 13:33:49","","18","567","<p>I was looking at a question that was talking about a bad implementation of the Fisher-Yates shuffling algorithm and I was perplexed that there was a bias when implemented incorrectly.</p>
<p>The two algorithms are these:</p>
<pre><code>private Random _random = new Random();

public int[] FisherYates(int[] source)
{
    int[] output = source.ToArray();
    for (var i = 0; i &lt; output.Length; i++)
    {
        var j = _random.Next(i, output.Length);
        (output[i], output[j]) = (output[j], output[i]);
    }
    return output;
}

public int[] FisherYatesBad(int[] source)
{
    int[] output = source.ToArray();
    for (var i = 0; i &lt; output.Length; i++)
    {
        var j = _random.Next(0, output.Length);
        (output[i], output[j]) = (output[j], output[i]);
    }
    return output;
}
</code></pre>
<p>A really subtle different, but enough to cause a massive bias.</p>
<p>Good implementation:</p>
<p><a href=""https://i.stack.imgur.com/zW5VN.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/zW5VN.png"" alt=""Good Fisher-Yates"" /></a></p>
<p>Bad implementation:</p>
<p><a href=""https://i.stack.imgur.com/ogde9.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/ogde9.png"" alt=""Bad Fisher-Yates"" /></a></p>
<p>To be clear about these plots, I start with the numbers 0 to 99, create 10_000_000 shuffles using whichever algorithm and then I average the values in each of the shuffles to get a single set of figures. If the shuffle is trying random then all 100 figures would belong to the same normal distribution.</p>
<p>Now, that's all fine, but I thought I'd check to see if these methods produce valid results:</p>
<pre><code>public int[] OrderByRandomNext(int[] source) =&gt; source.OrderBy(x =&gt; _random.Next()).ToArray();

public int[] OrderByRandomNextDouble(int[] source) =&gt; source.OrderBy(x =&gt; _random.NextDouble()).ToArray();
</code></pre>
<p>Both nice a neat, but are they a fair shuffle?</p>
<p><code>OrderByRandomNext</code>:</p>
<p><a href=""https://i.stack.imgur.com/9XyOX.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/9XyOX.png"" alt=""OrderByRandomNext"" /></a></p>
<p><code>OrderByRandomNextDouble</code>:</p>
<p><a href=""https://i.stack.imgur.com/a6ETv.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/a6ETv.png"" alt=""OrderByRandomNextDouble"" /></a></p>
<p>Notice that the <code>1</code> and the <code>100</code> figures are significantly lower in each?</p>
<p>Well, I thought it might be an artefact of how <code>OrderBy</code> works. So I tested it with another random number generator - one brought to use from Eric Lippert in his improving Random series.</p>
<pre><code>public int[] OrderByBetterRandomNextDouble(int[] source) =&gt; source.OrderBy(x =&gt; BetterRandom.NextDouble()).ToArray();

public static class BetterRandom
{
    private static readonly ThreadLocal&lt;RandomNumberGenerator&gt; crng =
        new ThreadLocal&lt;RandomNumberGenerator&gt;(RandomNumberGenerator.Create);

    private static readonly ThreadLocal&lt;byte[]&gt; bytes =
        new ThreadLocal&lt;byte[]&gt;(() =&gt; new byte[sizeof(int)]);

    public static int NextInt()
    {
        crng.Value.GetBytes(bytes.Value);
        return BitConverter.ToInt32(bytes.Value, 0) &amp; int.MaxValue;
    }

    public static double NextDouble()
    {
        while (true)
        {
            long x = NextInt() &amp; 0x001FFFFF;
            x &lt;&lt;= 31;
            x |= (long)NextInt();
            double n = x;
            const double d = 1L &lt;&lt; 52;
            double q = n / d;
            if (q != 1.0)
                return q;
        }
    }
}
</code></pre>
<p>Well, here's the chart:</p>
<p><a href=""https://i.stack.imgur.com/EAdi0.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/EAdi0.png"" alt=""BetterRandom"" /></a></p>
<p>There's no bias!</p>
<p>Here's my code to generate the data (run in LINQPad):</p>
<pre><code>void Main()
{
    var n = 100;
    var s = 1000000;

    var numbers = Enumerable.Range(0, n).ToArray();

    var algorithms = new Func&lt;int[], int[]&gt;[]
    {
        FisherYates,
        OrderByRandomNext,
        OrderByRandomNextDouble,
        OrderByBetterRandomNextDouble,
    };

    var averages =
        algorithms
            .Select(algorithm =&gt;
                Enumerable
                    .Range(0, numbers.Length)
                    .Select(x =&gt;
                        Enumerable
                            .Range(0, s)
                            .Select(y =&gt; algorithm(numbers))
                            .Aggregate(0.0, (a, v) =&gt; a + (double)v[x] / s))
                    .ToArray())
            .Select(x =&gt; new
            {
                averages = x,
                distribution = Accord.Statistics.Distributions.Univariate.NormalDistribution.Estimate(x.Skip(1).SkipLast(1).ToArray()),
                first = x.First(),
                last = x.Last(),
            })
            .Select(x =&gt; new
            {
                x.averages,
                x.distribution,
                x.first,
                x.last,
                first_prob =x.distribution.DistributionFunction(x.first),
                last_prob = x.distribution.DistributionFunction(x.last),
            })
            .ToArray();

    var d = 

    averages.Dump();
}

private Random _random = new Random();

    public int[] FisherYates(int[] source)
    {
        int[] output = source.ToArray();
        for (var i = 0; i &lt; output.Length; i++)
        {
            var j = _random.Next(i, output.Length);
            (output[i], output[j]) = (output[j], output[i]);
        }
        return output;
    }

public int[] OrderByRandomNext(int[] source) =&gt; source.OrderBy(x =&gt; _random.Next()).ToArray();

public int[] OrderByRandomNextDouble(int[] source) =&gt; source.OrderBy(x =&gt; _random.NextDouble()).ToArray();

    public int[] OrderByBetterRandomNextDouble(int[] source) =&gt; source.OrderBy(x =&gt; BetterRandom.NextDouble()).ToArray();

    public static class BetterRandom
    {
        private static readonly ThreadLocal&lt;RandomNumberGenerator&gt; crng =
            new ThreadLocal&lt;RandomNumberGenerator&gt;(RandomNumberGenerator.Create);

        private static readonly ThreadLocal&lt;byte[]&gt; bytes =
            new ThreadLocal&lt;byte[]&gt;(() =&gt; new byte[sizeof(int)]);

        public static int NextInt()
        {
            crng.Value.GetBytes(bytes.Value);
            return BitConverter.ToInt32(bytes.Value, 0) &amp; int.MaxValue;
        }

        public static double NextDouble()
        {
            while (true)
            {
                long x = NextInt() &amp; 0x001FFFFF;
                x &lt;&lt;= 31;
                x |= (long)NextInt();
                double n = x;
                const double d = 1L &lt;&lt; 52;
                double q = n / d;
                if (q != 1.0)
                    return q;
            }
        }
    }
</code></pre>
<p>Here's the data that I generated:</p>
<pre>
distribution                                             | first              | last               | first_prob             | last_prob            
-------------------------------------------------------- | ------------------ | ------------------ | ---------------------- | ---------------------
N(x; μ = 49.50267467345823, σ² = 0.0008896228453062147)  | 49.505465999987585 | 49.49833699998965  | 0.5372807100387846     | 0.44218570467529394  
N(x; μ = 49.50503062243786, σ² = 0.0009954477334487531)  | 49.36330799998817  | 49.37124399998651  | 3.529550818615057E-06  | 1.115772521409486E-05
N(x; μ = 49.505720877539765, σ² = 0.0008257970106087029) | 49.37231699998847  | 49.386660999990106 | 1.7228855271333998E-06 | 1.712972513601141E-05
N(x; μ = 49.49994663264188, σ² = 0.0007518765247716318)  | 49.50191999998847  | 49.474235999989205 | 0.5286859991636343     | 0.17421285127499514  
</pre>
<p>Here's my question. What's up with <code>System.Random</code> and the bias it introduces?</p>
","259769","","259769","","2021-06-09 10:43:04","2021-06-09 19:31:21","Bug in .Net's `Random` class?","<c#><.net><random><fisher-yates-shuffle>","1","11","5","","","CC BY-SA 4.0"
"341994","497213","2010-05-15 16:05:56","matt","2022-10-30 03:13:44","http://www.apeth.net/matt/default.html","","<p>Author most recently of <a href=""https://learning.oreilly.com/library/view/ios-15-programming/9781098118495/"" rel=""nofollow noreferrer"">iOS 15 Programming Fundamentals with Swift</a> and of <a href=""https://www.oreilly.com/library/view/programming-ios-14/9781492092162/"" rel=""nofollow noreferrer"">Programming iOS 14</a>.</p>
<p>Code examples from the books available at <a href=""https://github.com/mattneub/Programming-iOS-Book-Examples"" rel=""nofollow noreferrer"">my github repository</a>.</p>
<p>A much earlier edition, <em>Programming iOS 6</em>, is available to read for free at <a href=""http://www.apeth.com/iOSBook/"" rel=""nofollow noreferrer"">http://www.apeth.com/iOSBook/</a>.</p>
<p>And the Swift language chapters of <em>iOS 10 Programming Fundamentals With Swift</em> are available at <a href=""http://www.apeth.com/swiftBook/"" rel=""nofollow noreferrer"">http://www.apeth.com/swiftBook/</a>.</p>
","68440","3276","34867","","","137658","61841254","1","61968621","","2020-05-16 17:57:32","","17","6504","<p>I'm having a bit of a mental block using the iOS Combine framework.</p>

<p>I'm converting some code from ""manual"" fetching from a remote API to using Combine. Basically, the API is SQL and REST (in actual fact it's Salesforce, but that's irrelevant to the question). What the code used to do is call a REST query method that takes a completion handler. What I'm doing is replacing this everywhere with a Combine Future. So far, so good.</p>

<p>The problem arises when the following scenario happens (and it happens a lot):</p>

<ol>
<li><p>We do a REST query and get back an array of ""objects"".</p></li>
<li><p>But these ""objects"" are not completely populated. Each one of them needs additional data from some related object. So for each ""object"", we do another REST query using information from that ""object"", thus giving us <em>another</em> array of ""objects"".</p></li>
<li><p>This might or might not allow us to finish populating the first ""objects"" — or else, we might have to do <em>another</em> REST query using information from each of the <em>second</em> ""object"", and so on.</p></li>
</ol>

<p>The result was a lot of code structured like this (this is pseudocode):</p>

<pre><code>func fetchObjects(completion: @escaping ([Object] -&gt; Void) {
    let restQuery = ...
    RESTClient.performQuery(restQuery) { results in
        let partialObjects = results.map { ... }
        let group = DispatchGroup()
        for partialObject in partialObjects {
            let restQuery = ... // something based on partialObject
            group.enter()
            RESTClient.performQuery(restQuery) { results in
                group.leave()
                let partialObjects2 = results.map { ... }
                partialObject.property1 = // something from partialObjects2
                partialObject.property2 = // something from partialObjects2
                // and we could go down yet _another_ level in some cases
            }
        }
        group.notify {
            completion([partialObjects])
        }
    }
}
</code></pre>

<p>Every time I say <code>results in</code> in the pseudocode, that's the completion handler of an asynchronous networking call.</p>

<p>Okay, well, I see well enough how to chain asynchronous calls in Combine, for example by using Futures and <code>flatMap</code> (pseudocode again):</p>

<pre><code>let future1 = Future...
future1.map {
    // do something
}.flatMap {
    let future2 = Future...
    return future2.map {
        // do something
    }
}
// ...
</code></pre>

<p>In that code, the way we form <code>future2</code> can depend upon the value we received from the execution of <code>future1</code>, and in the <code>map</code> on <code>future2</code> we can modify what we received from upstream before it gets passed on down the pipeline. No problem. It's all quite beautiful.</p>

<p>But that doesn't give me what I was doing in the pre-Combine code, namely <em>the loop</em>. Here I was, doing <em>multiple</em> asynchronous calls in a <em>loop</em>, held in place by a DispatchGroup before proceeding. The question is:</p>

<p><em>What is the Combine pattern for doing that?</em></p>

<p>Remember the situation. I've got an <em>array</em> of some object. I want to <em>loop</em> through that array, doing an asynchronous call for <em>each</em> object in the loop, fetching new info asynchronously and modifying that object on that basis, before proceeding on down the pipeline. And each loop might involve a further <em>nested</em> loop gathering even <em>more</em> information asynchronously:</p>

<pre><code>Fetch info from online database, it's an array
   |
   V
For each element in the array, fetch _more_ info, _that's_ an array
   |
   V
For each element in _that_ array, fetch _more_ info
   |
   V
Loop thru the accumulated info and populate that element of the original array 
</code></pre>

<p>The old code for doing this was horrible-looking, full of nested completion handlers and loops held in place by DispatchGroup <code>enter</code>/<code>leave</code>/<code>notify</code>. <em>But it worked</em>. I can't get my Combine code to work the same way. How do I do it? Basically my pipeline output is an array of something, I feel like I need to split up that array into individual elements, do something <em>asynchronously</em> to each element, and put the elements back together into an array. How?</p>

<hr>

<p>The way I've been solving this works, but doesn't scale, especially when an asynchronous call needs information that arrived several steps <em>back</em> in the pipeline chain. I've been doing something like this (I got this idea from <a href=""https://stackoverflow.com/a/58708381/341994"">https://stackoverflow.com/a/58708381/341994</a>):</p>

<ol>
<li><p>An array of objects arrives from upstream.</p></li>
<li><p>I enter a <code>flatMap</code> and <code>map</code> the array to an array of publishers, each headed by a Future that fetches further online stuff related to <em>one</em> object, and followed by a pipeline that produces the <em>modified</em> object.</p></li>
<li><p>Now I have an array of pipelines, each producing a single object. I <code>merge</code> that array and produce that publisher (a MergeMany) from the <code>flatMap</code>.</p></li>
<li><p>I <code>collect</code> the resulting values back into an array.</p></li>
</ol>

<p>But this still seems like a lot of work, and even worse, it doesn't scale when each sub-pipeline itself needs to spawn an array of sub-pipelines. It all becomes incomprehensible, and information that used to arrive easily into a completion block (because of Swift's scoping rules) no longer arrives into a subsequent step in the main pipeline (or arrives only with difficulty because I pass bigger and bigger tuples down the pipeline).</p>

<p>There must be some simple Combine pattern for doing this, but I'm completely missing it. Please tell me what it is.</p>
","341994","","341994","","2020-05-23 20:43:38","2020-08-18 16:48:45","Combine framework: how to process each element of array asynchronously before proceeding","<ios><swift><combine>","2","7","8","","","CC BY-SA 4.0"
"341994","497213","2010-05-15 16:05:56","matt","2022-10-30 03:13:44","http://www.apeth.net/matt/default.html","","<p>Author most recently of <a href=""https://learning.oreilly.com/library/view/ios-15-programming/9781098118495/"" rel=""nofollow noreferrer"">iOS 15 Programming Fundamentals with Swift</a> and of <a href=""https://www.oreilly.com/library/view/programming-ios-14/9781492092162/"" rel=""nofollow noreferrer"">Programming iOS 14</a>.</p>
<p>Code examples from the books available at <a href=""https://github.com/mattneub/Programming-iOS-Book-Examples"" rel=""nofollow noreferrer"">my github repository</a>.</p>
<p>A much earlier edition, <em>Programming iOS 6</em>, is available to read for free at <a href=""http://www.apeth.com/iOSBook/"" rel=""nofollow noreferrer"">http://www.apeth.com/iOSBook/</a>.</p>
<p>And the Swift language chapters of <em>iOS 10 Programming Fundamentals With Swift</em> are available at <a href=""http://www.apeth.com/swiftBook/"" rel=""nofollow noreferrer"">http://www.apeth.com/swiftBook/</a>.</p>
","68440","3276","34867","","","137658","67954414","1","","","2021-06-13 02:48:08","","16","4444","<p>This is sort of a follow-up to my earlier <a href=""https://stackoverflow.com/questions/67913756/asyncdetached-falling-back-into-main-thread-after-mainactor-call"">asyncDetached falling back into main thread after MainActor call</a>.</p>
<p>Here's the complete code of an iOS view controller:</p>
<pre><code>import UIKit

func test1() {
    print(&quot;test1&quot;, Thread.isMainThread) // true
    Task {
        print(&quot;test1 task&quot;, Thread.isMainThread) // false
    }
}
class ViewController: UIViewController {
    override func viewDidLoad() {
        super.viewDidLoad()
        test1()
        test2()
    }

    func test2() {
        print(&quot;test2&quot;, Thread.isMainThread) // true
        Task {
            print(&quot;test2 task&quot;, Thread.isMainThread) // true
        }
    }
}
</code></pre>
<p>The two functions <code>test1</code> and <code>test2</code> are identical, and are being called from the very same place. Yet one of them runs its Task initializer <code>operation:</code> function on a background thread, and the other runs on the main thread.</p>
<p>What determines this? I can only think it has to do with where the method is declared. But <em>what</em> does it have to do with where the method is declared?</p>
","341994","","341994","","2021-09-22 13:02:25","2022-08-27 08:00:21","What determines whether a Swift 5.5 Task initializer runs on the main thread?","<swift><async-await><swift5>","2","0","4","","","CC BY-SA 4.0"
"341994","497213","2010-05-15 16:05:56","matt","2022-10-30 03:13:44","http://www.apeth.net/matt/default.html","","<p>Author most recently of <a href=""https://learning.oreilly.com/library/view/ios-15-programming/9781098118495/"" rel=""nofollow noreferrer"">iOS 15 Programming Fundamentals with Swift</a> and of <a href=""https://www.oreilly.com/library/view/programming-ios-14/9781492092162/"" rel=""nofollow noreferrer"">Programming iOS 14</a>.</p>
<p>Code examples from the books available at <a href=""https://github.com/mattneub/Programming-iOS-Book-Examples"" rel=""nofollow noreferrer"">my github repository</a>.</p>
<p>A much earlier edition, <em>Programming iOS 6</em>, is available to read for free at <a href=""http://www.apeth.com/iOSBook/"" rel=""nofollow noreferrer"">http://www.apeth.com/iOSBook/</a>.</p>
<p>And the Swift language chapters of <em>iOS 10 Programming Fundamentals With Swift</em> are available at <a href=""http://www.apeth.com/swiftBook/"" rel=""nofollow noreferrer"">http://www.apeth.com/swiftBook/</a>.</p>
","68440","3276","34867","","","137658","69439301","1","69439302","","2021-10-04 16:20:51","","16","4740","<p>My code is very simple; I have an outlet to a UIButton, <code>button</code>, and I am setting its image in code:</p>
<pre><code>    let jack = UIImage(named:&quot;jack.png&quot;)
    self.button.setImage(jack, for:.normal)
</code></pre>
<p>The problem is that this is not behaving as I expect. I expect the button image to be sized down to the button size, and I expect it to be a <em>template</em> image (tinted with the inherited tint color). Instead, I'm seeing the <em>original</em> image and it is full-sized. Is this a change in iOS 15?</p>
<p>It seems to be, because if I set my project's deployment target to iOS 14 and run it on an iOS 14 simulator, I do get the behavior that I expect.</p>
","341994","","","","","2021-12-28 16:00:53","UIButton image behavior changed in iOS 15?","<ios><uibutton><ios15>","1","0","3","","","CC BY-SA 4.0"
"3731501","190784","2014-06-11 19:11:43","Estus Flask","2022-10-30 00:22:59","","","","11315","5034","414","https://www.gravatar.com/avatar/e4783dfa8ec98c884e61d29f2192ac97?s=128&d=identicon&r=PG&f=1","","4600649","61772822","1","","","2020-05-13 10:57:18","","16","19503","<p>I accidentally witnessed that this causes an error in V8 (Chrome, Node.js, etc):</p>
<pre><code>for (let val of Symbol()) { /*...*/ }
</code></pre>
<blockquote>
<p>TypeError: Symbol is not a function or its return value is not iterable</p>
</blockquote>
<p>It appears that any other non-iterable value (including a function) causes another error:</p>
<pre><code>for (let val of function () { throw 'never called' }) { /*...*/ }
</code></pre>
<blockquote>
<p>TypeError: (intermediate value) is not iterable</p>
</blockquote>
<p>As <a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/is_not_iterable"" rel=""noreferrer"">the reference</a> states, the error is specific to Chrome:</p>
<blockquote>
<p>TypeError: 'x' is not a function or its return value is not iterable (Chrome)</p>
<p>...</p>
<p>The value which is given as the right hand-side of for…of or as argument of a function such as Promise.all or TypedArray.from, is not an iterable object.  An iterable can be a built-in iterable type such as Array, String or Map, a generator result, or an object implementing the iterable protocol.</p>
</blockquote>
<p>It seems that none of listed things are expected to accept a function instead of iterable as an argument so it's unclear why the error puts emphasis on function type.</p>
<p>Is there any meaning to this error? Are there circumstances under which <code>is not a function</code> remark makes sense in its context?</p>
","3731501","","-1","","2020-06-20 09:12:55","2021-04-21 17:18:44","The meaning of ""'x' is not a function or its return value is not iterable"" error","<javascript><node.js><google-chrome><v8><for-of-loop>","2","5","1","","","CC BY-SA 4.0"
"341994","497213","2010-05-15 16:05:56","matt","2022-10-30 03:13:44","http://www.apeth.net/matt/default.html","","<p>Author most recently of <a href=""https://learning.oreilly.com/library/view/ios-15-programming/9781098118495/"" rel=""nofollow noreferrer"">iOS 15 Programming Fundamentals with Swift</a> and of <a href=""https://www.oreilly.com/library/view/programming-ios-14/9781492092162/"" rel=""nofollow noreferrer"">Programming iOS 14</a>.</p>
<p>Code examples from the books available at <a href=""https://github.com/mattneub/Programming-iOS-Book-Examples"" rel=""nofollow noreferrer"">my github repository</a>.</p>
<p>A much earlier edition, <em>Programming iOS 6</em>, is available to read for free at <a href=""http://www.apeth.com/iOSBook/"" rel=""nofollow noreferrer"">http://www.apeth.com/iOSBook/</a>.</p>
<p>And the Swift language chapters of <em>iOS 10 Programming Fundamentals With Swift</em> are available at <a href=""http://www.apeth.com/swiftBook/"" rel=""nofollow noreferrer"">http://www.apeth.com/swiftBook/</a>.</p>
","68440","3276","34867","","","137658","59637100","1","59692095","","2020-01-07 22:40:39","","15","2695","<p><strong>Ground of Being</strong>: It will help, before reading, to know that you cannot assign a UIImage to an image view outlet's <code>image</code> property through the keypath <code>\UIImageView.image</code>. Here's the property:</p>

<pre><code>@IBOutlet weak var iv: UIImageView!
</code></pre>

<p>Now, will this compile?</p>

<pre><code>    let im = UIImage()
    let kp = \UIImageView.image
    self.iv[keyPath:kp] = im // error
</code></pre>

<p>No!</p>

<blockquote>
  <p>Value of optional type 'UIImage?' must be unwrapped to a value of type 'UIImage'</p>
</blockquote>

<p>Okay, now we're ready for the actual use case.</p>

<hr>

<p>What I'm actually trying to understand is how the Combine framework <code>.assign</code> subscriber works behind the scenes. To experiment, I tried using my own Assign object. In my example, my publisher pipeline produces a UIImage object, and I assign it to the <code>image</code> property of a UIImageView property <code>self.iv</code>.</p>

<p>If we use the <code>.assign</code> method, this compiles and works:</p>

<pre><code>URLSession.shared.dataTaskPublisher(for: url)
    .map {$0.data}
    .replaceError(with: Data())
    .compactMap { UIImage(data:$0) }
    .receive(on: DispatchQueue.main)
    .assign(to: \.image, on: self.iv)
    .store(in:&amp;self.storage)
</code></pre>

<p>So, says I to myself, to see how this works, I'll remove the <code>.assign</code> and replace it with my own Assign object:</p>

<pre><code>let pub = URLSession.shared.dataTaskPublisher(for: url)
    .map {$0.data}
    .replaceError(with: Data())
    .compactMap { UIImage(data:$0) }
    .receive(on: DispatchQueue.main)

let assign = Subscribers.Assign(object: self.iv, keyPath: \UIImageView.image)
pub.subscribe(assign) // error
// (and we will then wrap in AnyCancellable and store)
</code></pre>

<p>Blap! We can't do that, because <code>UIImageView.image</code> is an Optional UIImage, and my publisher produces a UIImage plain and simple.</p>

<p>I tried to work around this by unwrapping the Optional in the key path:</p>

<pre><code>let assign = Subscribers.Assign(object: self.iv, keyPath: \UIImageView.image!)
pub.subscribe(assign)
</code></pre>

<p>Cool, that compiles. But it crashes at runtime, presumably because the image view's image is initially <code>nil</code>.</p>

<p>Now I can work around all of this just fine by adding a <code>map</code> to my pipeline that wraps the UIImage up in an Optional, so that all the types match correctly. But my question is, how does this <em>really</em> work? I mean, why don't I have to do that in the first code where I use <code>.assign</code>? Why am I able to specify the <code>.image</code> keypath there? There seems to be some trickery about how key paths work with Optional properties but I don't know what it is.</p>

<hr>

<p>After some input from Martin R I realized that if we type <code>pub</code> explicitly as producing <code>UIImage?</code> we get the same effect as adding a <code>map</code> that wraps the UIImage in an Optional. So this compiles and works</p>

<pre><code>let pub : AnyPublisher&lt;UIImage?,Never&gt; = URLSession.shared.dataTaskPublisher(for: url)
    .map {$0.data}
    .replaceError(with: Data())
    .compactMap { UIImage(data:$0) }
    .receive(on: DispatchQueue.main)
    .eraseToAnyPublisher()

let assign = Subscribers.Assign(object: self.iv, keyPath: \UIImageView.image)
pub.subscribe(assign)
let any = AnyCancellable(assign)
any.store(in:&amp;self.storage)
</code></pre>

<p>This still doesn't explain how the original <code>.assign</code> works. It appears that it is able to <em>push</em> the optionality of the type <em>up</em> the pipeline into the <code>.receive</code> operator. But I don't see how that is possible.</p>
","341994","","341994","","2020-01-08 20:16:59","2022-08-03 15:40:43","How does Swift ReferenceWritableKeyPath work with an Optional property?","<swift><option-type><combine><swift-keypath>","1","7","5","","","CC BY-SA 4.0"
"2357112","243261","2013-05-07 06:17:28","user2357112","2022-10-30 04:35:31","","","","37449","3414","20057","","","2734060","64012057","1","","","2020-09-22 14:37:45","","15","288","<p>For shuffling two vectors in the same order, it's tempting to do something like</p>
<pre><code>whatever_rng_type rng2(rng1);

std::shuffle(vec1.begin(), vec1.end(), rng1);
std::shuffle(vec2.begin(), vec2.end(), rng2);
</code></pre>
<p>where identical RNG states are used for the two shuffles. However, I don't see any requirement that these shuffles actually produce the same order in the <a href=""http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3690.pdf"" rel=""noreferrer"">standard draft</a> I checked.</p>
<p><code>std::shuffle</code> must use the provided RNG as its source of randomness, but the implementation might also do something like take a different code path for different element sizes. Maybe an implementation might use AVX512 gather/scatter instructions for some types and a generic, non-vectorized code path for others, and that could affect the result ordering.</p>
<p>Is performing two shuffles with the same seed actually a safe way to get the same order? Is there something I missed in a later standard version, or a defect report or something?</p>
","2357112","","2357112","","2020-09-22 18:47:03","2020-09-23 14:08:39","Can the order of std::shuffle depend on anything but the RNG?","<c++><random><language-lawyer>","1","5","2","","","CC BY-SA 4.0"
"57695","518206","2009-01-21 21:27:38","Peter Lawrey","2022-10-28 16:11:20","http://vanilla-java.github.io/","Surrey, UK","<p>Architect and CEO for Chronicle Software <a href=""http://chronicle.software"" rel=""nofollow noreferrer"">http://chronicle.software</a></p>

<p>Blog has had 4 million hits <a href=""http://vanilla-java.github.io"" rel=""nofollow noreferrer"">http://vanilla-java.github.io</a></p>

<p>Most answer for Java, JVM, concurrency, file-io and memory on Stackoverflow.com</p>

<p>Founder of the Performance Java User's Group.</p>

<p>Java Champion</p>
","80705","16878","392","","","23121","65614890","1","65626792","","2021-01-07 15:06:29","","14","400","<p>Does this have a purpose <code>static @NotNull @Other My.@NotNull @Other Builder createBuilder()</code></p>
<pre><code>import java.lang.annotation.ElementType;
import java.lang.annotation.Target;

public class A {
    static class My {
        static class Builder {
            public My build() {
                return new My(); } } }

    @Target({ElementType.METHOD, ElementType.TYPE_USE})
    public @interface NotNull { }

    @Target({ElementType.METHOD, ElementType.TYPE_USE})
    public @interface Other { }

    public static @NotNull @Other My.@NotNull @Other Builder createBuilder() {
        return new My.Builder();
    }
}
</code></pre>
","57695","","1746118","","2021-01-08 09:47:00","2021-01-09 16:36:01","What is the purpose of having annotation tmesis/inside Java qualified types?","<java><java-8><annotations>","1","2","2","","","CC BY-SA 4.0"
"7429447","164096","2017-01-17 08:59:30","undetected Selenium","2022-10-29 19:54:10","","Pune, Maharashtra, India","<p>A full stack test automation engineer and a web security analyst working with Selenium (Java/Python).</p>
<ul>
<li>Owner of <a href=""https://chat.stackoverflow.com/rooms/223360/selenium""><em><strong>Selenium</strong></em></a> room &amp; top answerer in <a href=""https://stackoverflow.com/tags/selenium/topusers""><strong>selenium</strong></a> and <a href=""https://stackoverflow.com/tags/selenium-webdriver/topusers""><strong>selenium-webdriver</strong></a> tags.</li>
<li>For <a href=""/questions/tagged/selenium"" class=""post-tag"" title=""show questions tagged &#39;selenium&#39;"" rel=""tag"">selenium</a> related <em>assignments</em> and <em>business queries</em> I'm reachable through <em><strong>debanjan.selenium@gmail.com</strong></em>.</li>
<li>If any of my discussion / article was helpful, you may like to...</li>
</ul>
<p><a href=""https://www.paypal.com/paypalme/debanjan786"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/Ou6Ha.png"" alt=""Buy me a coffee"" /></a> | <em>or you can also</em> |<strong>GPay</strong><img src=""https://i.stack.imgur.com/oqdR3s.jpg"" alt=""UPI ID IDBI"" /></p>
<ul>
<li>You can <a href=""https://saythanks.io/to/debanjan.selenium"" rel=""nofollow noreferrer""><em>Send a Thank You note to me!</em></a> too...</li>
<li>I'm available through <a href=""https://www.linkedin.com/in/debanjanb/"" rel=""nofollow noreferrer""><em><strong>LinkedIn</strong></em></a> as well.</li>
</ul>
","31606","7428","5679","https://i.stack.imgur.com/w4d7E.png?s=128&g=1","","10049107","65080685","1","65134639","","2020-11-30 20:27:14","","14","60723","<p>We recently upgraded our <em>Windows 10</em> test environment with ChromeDriver v87.0.4280.20 and Chrome v87.0.4280.66 (Official Build) (64-bit) and after the up-gradation even the minimal program is producing this ERROR log:</p>
<pre><code>[9848:10684:1201/013233.169:ERROR:device_event_log_impl.cc(211)] [01:32:33.170] USB: usb_device_handle_win.cc:1020 Failed to read descriptor from node connection: A device attached to the system is not functioning. (0x1F)
</code></pre>
<p>Minimum Code Block:</p>
<pre><code>from selenium import webdriver

options = webdriver.ChromeOptions() 
options.add_argument(&quot;start-maximized&quot;)
driver = webdriver.Chrome(options=options, executable_path=r'C:\WebDrivers\chromedriver.exe')
driver.get('https://www.google.com/')
</code></pre>
<p>Console Output:</p>
<pre><code>DevTools listening on ws://127.0.0.1:64170/devtools/browser/2fb4bb93-79ab-4131-9e4a-3b65c08dbffb
[9848:10684:1201/013233.169:ERROR:device_event_log_impl.cc(211)] [01:32:33.170] USB: usb_device_handle_win.cc:1020 Failed to read descriptor from node connection: A device attached to the system is not functioning. (0x1F)
[9848:10684:1201/013233.172:ERROR:device_event_log_impl.cc(211)] [01:32:33.173] USB: usb_device_handle_win.cc:1020 Failed to read descriptor from node connection: A device attached to the system is not functioning. (0x1F)
</code></pre>
<p>Anyone facing the same? Was there any change in ChromeDriver/Chrome v87 with respect to ChromeDriver/Chrome v86? Any clues?</p>
","7429447","","","","","2022-09-22 20:58:09","USB: usb_device_handle_win.cc:1020 Failed to read descriptor from node connection error with ChromeDriver v87 / Chrome v87 using Selenium on Windows10","<python><selenium><google-chrome><selenium-chromedriver><webusb>","6","0","8","","","CC BY-SA 4.0"
"560648","372705","2011-01-02 22:20:15","Lightness Races in Orbit","2021-02-19 18:09:37","","","<p>Retired.</p>

<hr>

<p>Pet hates:</p>

<ul>
<li>Answers in the comments section</li>
<li>""Ternary operator""</li>
<li>Comma splices</li>
</ul>
","190954","13431","14422","https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1","","270599","59603086","1","59603115","","2020-01-05 18:45:20","","14","312","<p><a href=""http://eel.is/c++draft/expr.rel#4"" rel=""noreferrer"">Comparing pointers to unrelated objects has unspecified results.</a></p>

<p>That would seem to suggest that this program may have undefined behaviour, at the very least because we cannot guarantee a strict weak ordering on the key type:</p>

<pre><code>#include &lt;map&gt;

int main()
{
    int x = 0, y = 1;
    bool arbitrary = false;

    std::map&lt;int*, bool&gt; m{
       {&amp;x, arbitrary},
       {&amp;y, arbitrary}
    };
}
</code></pre>

<p>More generally, then, can we say that a map with pointer keys is a dangerous* proposition? Or is there some special rule we can lean on here?</p>

<p><sup>* Academically speaking, that is; in reality I'm not aware of mainstream implementations that will actually raise hell over comparing arbitrary pointers.</sup></p>
","560648","","963864","","2020-01-05 19:05:51","2020-01-05 19:05:51","Does a program with std::map<T*, U> have well-defined behaviour?","<c++><sorting><pointers><language-lawyer><strict-weak-ordering>","4","2","5","2020-01-06 02:00:26","","CC BY-SA 4.0"
"155423","347433","2009-08-12 21:18:55","Shepmaster","2022-10-29 18:21:46","http://jakegoulding.com","Pittsburgh, PA","<p>Cofounder of the world's first <a href=""http://integer32.com/"" rel=""nofollow noreferrer"">Rust consultancy</a> — we are available to help you and your company with any and everything related to Rust! We also produce the <a href=""https://www.manning.com/livevideo/rust-in-motion?a_aid=jgoulding&amp;a_bid=6a993c2e"" rel=""nofollow noreferrer"">Rust in Motion video series</a> for Manning.</p>
<p>I enjoy programming in a variety of languages, starting in C, touching on Java, moving to Ruby and most recently Rust. I also dabble in frontend frameworks like React and Redux.</p>
<p>I love helping other people one-on-one and seeing them learn.</p>
<p>To make sure that the software I write is useful and used, I am interested in interpersonal communication, as well as methodologies like Agile.</p>
","33648","6877","4462","https://i.stack.imgur.com/hjwrE.png","","879267","64830671","1","","","2020-11-14 03:30:43","","14","1728","<p>I have a simple C application:</p>
<pre class=""lang-c prettyprint-override""><code>#include &lt;stdio.h&gt;

int main() {
  printf(&quot;Hello, world!\n&quot;);
}
</code></pre>
<p>When I:</p>
<ol>
<li>build this on an Apple Silicon device</li>
<li>targeting arm64</li>
<li>using a build system that is compiled for x86_64</li>
<li>replace an existing binary (such as during a rebuild)</li>
</ol>
<p>The final binary cannot be executed and is reported as &quot;killed&quot; according to the shell:</p>
<pre class=""lang-none prettyprint-override""><code>% rm hello

# arch simulates the build system which is still compiled for x86_64
% arch -x86_64 cc -arch arm64 hello.c -o hello

% ./hello
Hello, world!

% arch -x86_64 cc -arch arm64 hello.c -o hello

% ./hello
zsh: killed     ./hello
</code></pre>
<p>If my build system is native arm64 (or arm64e), then there's no problem:</p>
<pre class=""lang-none prettyprint-override""><code>% rm hello

% arch -arm64e cc -arch arm64 hello.c -o hello

% ./hello
Hello, world!

% arch -arm64e cc -arch arm64 hello.c -o hello

% ./hello
Hello, world!
</code></pre>
<p>If I <a href=""https://github.com/Homebrew/brew/issues/9082#issuecomment-727246564"" rel=""noreferrer""><strong>copy</strong> the binary to a new path</a> and then replace the code signature, then it works:</p>
<pre class=""lang-none prettyprint-override""><code>% cp hello hello2

% codesign -s - -f hello2
hello2: replacing existing signature

% ./hello2
Hello, world!
</code></pre>
<hr />
<h1>Original reproduction steps and debugging</h1>
<p>When I build this on an Apple Silicon device, targeting arm64, but using a build system that is compiled for x86_64, the final binary cannot be executed and is reported as &quot;killed&quot; according to the shell:</p>
<pre class=""lang-none prettyprint-override""><code># arch simulates the build system which is still compiled for x86_64
% arch -x86_64 cc -arch arm64 hello.c -o hello

% file hello
hello: Mach-O 64-bit executable arm64

% ./hello
zsh: killed     ./hello
</code></pre>
<p>Even attempting to debug it fails:</p>
<pre class=""lang-none prettyprint-override""><code>% lldb hello
(lldb) target create &quot;hello&quot;
zsh: killed     lldb hello
</code></pre>
<p>As a workaround, I can <a href=""https://stackoverflow.com/q/64830635/155423"">use a shim compiler</a> to &quot;reset&quot; back to an arm64 environment before calling <code>cc</code>, but that's inelegant and it feels like I'm missing some configuration to avoid jumping through so many hoops.</p>
<pre class=""lang-none prettyprint-override""><code>% cc --version
Apple clang version 12.0.0 (clang-1200.0.32.27)
Target: arm64-apple-darwin20.1.0
Thread model: posix
InstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin
</code></pre>
<p>This is on macOS Big Sur 11.0.1.</p>
<h2>Cross compiling from x86_64</h2>
<p>If I cross-compile from an x86_64 machine and scp the binary around, the file executes fine:</p>
<pre class=""lang-none prettyprint-override""><code>% SDKROOT=$(xcrun -sdk macosx11.0 --show-sdk-path) \
MACOSX_DEPLOYMENT_TARGET=$(xcrun -sdk macosx11.0 --show-sdk-platform-version) \
cc -arch arm64 hello.c -o hello

% scp hello silicon:/tmp/hello-cross
</code></pre>
<p>Switch machines...</p>
<pre class=""lang-none prettyprint-override""><code>% file /tmp/hello-cross
/tmp/hello-cross: Mach-O 64-bit executable arm64

% /tmp/hello-cross
Hello, world!
</code></pre>
<h2>Tracing child processes</h2>
<p>Adding <code>--verbose</code> to the <code>cc</code> invocation prints out the child processes (I added newlines to highlight those among the other debugging):</p>
<pre class=""lang-none prettyprint-override""><code>% arch -x86_64 cc --verbose -arch arm64 hello.c -o hello
Apple clang version 12.0.0 (clang-1200.0.32.27)
Target: aarch64-apple-darwin20.1.0
Thread model: posix
InstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin

 &quot;/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang&quot; -cc1 -triple arm64-apple-macosx11.0.0 -Wdeprecated-objc-isa-usage -Werror=deprecated-objc-isa-usage -Werror=implicit-function-declaration -emit-obj -mrelax-all -disable-free -disable-llvm-verifier -discard-value-names -main-file-name hello.c -mrelocation-model pic -pic-level 2 -mthread-model posix -mframe-pointer=non-leaf -fno-strict-return -masm-verbose -munwind-tables -target-sdk-version=11.0 -target-cpu vortex -target-feature +v8.3a -target-feature +fp-armv8 -target-feature +neon -target-feature +crc -target-feature +crypto -target-feature +fullfp16 -target-feature +ras -target-feature +lse -target-feature +rdm -target-feature +rcpc -target-feature +zcm -target-feature +zcz -target-feature +sha2 -target-feature +aes -target-abi darwinpcs -fallow-half-arguments-and-returns -dwarf-column-info -debugger-tuning=lldb -target-linker-version 609.6 -v -resource-dir /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/clang/12.0.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk -I/usr/local/include -internal-isystem /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/local/include -internal-isystem /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/clang/12.0.0/include -internal-externc-isystem /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/include -internal-externc-isystem /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -Wno-reorder-init-list -Wno-implicit-int-float-conversion -Wno-c99-designator -Wno-final-dtor-non-final-class -Wno-extra-semi-stmt -Wno-misleading-indentation -Wno-quoted-include-in-framework-header -Wno-implicit-fallthrough -Wno-enum-enum-conversion -Wno-enum-float-conversion -fdebug-compilation-dir /tmp/example -ferror-limit 19 -fmessage-length 237 -stack-protector 1 -fstack-check -mdarwin-stkchk-strong-link -fblocks -fencode-extended-block-signature -fregister-global-dtors-with-atexit -fgnuc-version=4.2.1 -fobjc-runtime=macosx-11.0.0 -fmax-type-align=16 -fdiagnostics-show-option -fcolor-diagnostics -o /var/folders/j2/g4_hr3jd2sz415vrf7b1d6300000gp/T/hello-232f6b.o -x c hello.c

clang -cc1 version 12.0.0 (clang-1200.0.32.27) default target x86_64-apple-darwin20.1.0
ignoring nonexistent directory &quot;/usr/local/include&quot;
ignoring nonexistent directory &quot;/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/local/include&quot;
ignoring nonexistent directory &quot;/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/Library/Frameworks&quot;
#include &quot;...&quot; search starts here:
#include &lt;...&gt; search starts here:
 /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/clang/12.0.0/include
 /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/include
 /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include
 /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/System/Library/Frameworks (framework directory)
End of search list.

 &quot;/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/ld&quot; -demangle -lto_library /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/libLTO.dylib -no_deduplicate -dynamic -arch arm64 -platform_version macos 11.0.0 11.0 -syslibroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk -o hello -L/usr/local/lib /var/folders/j2/g4_hr3jd2sz415vrf7b1d6300000gp/T/hello-232f6b.o -lSystem /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/clang/12.0.0/lib/darwin/libclang_rt.osx.a
</code></pre>
<p>The compiler invocation has <code>-triple arm64-apple-macosx11.0.0</code> and the linker invocation has <code>-arch arm64</code>, so it seems like appropriate values are being passed.</p>
<h2>Comparing failing and successful binaries</h2>
<p>As suggested in a comment, I've tried comparing the two binary files. Unfortunately, the suggested <a href=""https://www.scootersoftware.com/"" rel=""noreferrer"">Beyond Compare</a> tool <em>also</em> crashes as soon as the failing executable is opened. I suspect that it's for the same underlying reason that LLDB reports being killed.</p>
<p>In the meantime, here's the output of comparing the raw hex data:</p>
<pre class=""lang-none prettyprint-override""><code>--- /tmp/hello-cross.hex        2020-11-14 05:07:04.000000000 -0800
+++ ./hello.hex 2020-11-14 05:06:52.000000000 -0800
@@ -74,10 +74,10 @@
 00000490: 0000 0000 0000 0000 0000 0000 0000 0000  ................
 000004a0: 0e00 0000 2000 0000 0c00 0000 2f75 7372  .... ......./usr
 000004b0: 2f6c 6962 2f64 796c 6400 0000 0000 0000  /lib/dyld.......
-000004c0: 1b00 0000 1800 0000 7b34 532d f414 3f99  ........{4S-..?.
-000004d0: a866 f4d8 29bf f7ce 3200 0000 2000 0000  .f..)...2... ...
+000004c0: 1b00 0000 1800 0000 0ad8 b6d9 c6c4 32f0  ..............2.
+000004d0: 9522 80e2 f036 54f7 3200 0000 2000 0000  .&quot;...6T.2... ...
 000004e0: 0100 0000 0000 0b00 0000 0b00 0100 0000  ................
-000004f0: 0300 0000 0006 6102 2a00 0000 1000 0000  ......a.*.......
+000004f0: 0300 0000 0007 6102 2a00 0000 1000 0000  ......a.*.......
 00000500: 0000 0000 0000 0000 2800 0080 1800 0000  ........(.......
 00000510: 543f 0000 0000 0000 0000 0000 0000 0000  T?..............
 00000520: 0c00 0000 3800 0000 1800 0000 0200 0000  ....8...........
@@ -3094,9 +3094,9 @@
 0000c150: 0000 0000 0000 0000 0000 0000 0000 0000  ................
 0000c160: 0000 0000 0000 0000 0000 0000 0000 0000  ................
 0000c170: 0000 4000 0000 0000 0000 0001 6865 6c6c  ..@.........hell
-0000c180: 6f00 e40f cd6f 1abe f672 0c10 0915 8b30  o....o...r.....0
-0000c190: 5c9a 4a69 c9eb efdd a655 11c8 f5dc 3d86  \.Ji.....U....=.
-0000c1a0: b3d5 ad7f acb2 586f c6e9 66c0 04d7 d1d1  ......Xo..f.....
+0000c180: 6f00 29f3 685d 60bf c358 4179 1735 b8b0  o.).h]`..XAy.5..
+0000c190: d018 3ec5 aa3c 0f60 cc8b a4f2 23bf b37d  ..&gt;..&lt;.`....#..}
+0000c1a0: 9ee8 ad7f acb2 586f c6e9 66c0 04d7 d1d1  ......Xo..f.....
 0000c1b0: 6b02 4f58 05ff 7cb4 7c7a 85da bd8b 4889  k.OX..|.|z....H.
 0000c1c0: 2ca7 ad7f acb2 586f c6e9 66c0 04d7 d1d1  ,.....Xo..f.....
 0000c1d0: 6b02 4f58 05ff 7cb4 7c7a 85da bd8b 4889  k.OX..|.|z....H.
</code></pre>
<p>Running <code>otool -fahlLDtvV</code> on both files and comparing the outputs yields:</p>
<pre class=""lang-none prettyprint-override""><code>--- /tmp/hello-cross.dump       2020-11-14 05:41:10.000000000 -0800
+++ hello.dump  2020-11-14 05:41:22.000000000 -0800
@@ -226,7 +226,7 @@
 Load command 9
      cmd LC_UUID
  cmdsize 24
-    uuid 7B34532D-F414-3F99-A866-F4D829BFF7CE
+    uuid 0AD8B6D9-C6C4-32F0-9522-80E2F03654F7
 Load command 10
        cmd LC_BUILD_VERSION
    cmdsize 32
@@ -235,7 +235,7 @@
      minos 11.0
     ntools 1
       tool ld
-   version 609.6
+   version 609.7
 Load command 11
       cmd LC_SOURCE_VERSION
   cmdsize 16
</code></pre>
<p>This seems to correspond to the first hunk of the raw hex dump, suggesting that the important difference is in the second hunk.</p>
<h2>Code signing</h2>
<p><a href=""https://sourceforge.net/projects/machoview/"" rel=""noreferrer"">MachOView</a> indicates that address <code>0xc180</code> occurs within the &quot;Code Signature&quot; section. However, it appears that the signature is valid enough:</p>
<pre class=""lang-none prettyprint-override""><code>% codesign --verify --verbose hello
hello: valid on disk
hello: satisfies its Designated Requirement
</code></pre>
<p>Looking at Console.app, I do see these lines:</p>
<pre class=""lang-none prettyprint-override""><code>CODE SIGNING: cs_invalid_page(0x10439c000): p=32470[hello] final status 0x23020200, denying page sending SIGKILL
CODE SIGNING: process 32470[hello]: rejecting invalid page at address 0x10439c000 from offset 0x0 in file &quot;/private/tmp/example/hello&quot; (cs_mtime:1605366572.426749233 == mtime:1605366572.426749233) (signed:1 validated:1 tainted:1 nx:0 wpmapped:1 dirty:0 depth:0)
</code></pre>
","155423","","155423","","2020-11-14 18:47:42","2020-11-14 18:47:42","Why does my native arm64 application built using an x86_64 build system fail to be code signed unless I remove the previous executable?","<macos><native><apple-silicon>","0","11","1","","","CC BY-SA 4.0"
"1271826","400279","2012-03-15 14:45:16","Rob","2022-10-30 04:30:53","http://robertmryan.com","Los Angeles, CA, USA","","31669","8064","1275","https://i.stack.imgur.com/duhm9.jpg?s=128&g=1","","1327250","67978028","1","67978029","","2021-06-14 22:50:04","","14","1430","<p>My intent is to understand the “cooperative thread pool” used by Swift 5.5’s async-await, and how task groups automatically constrain the degree of concurrency: Consider the following task group code, doing 32 calculations in parallel:</p>
<pre class=""lang-swift prettyprint-override""><code>func launchTasks() async {
    await withTaskGroup(of: Void.self) { group in
        for i in 0 ..&lt; 32 {
            group.addTask { [self] in
                let value = await doSomething(with: i)
                // do something with `value`
            }
        }
    }
}
</code></pre>
<p>While I hoped it would constrain the degree of concurrency, as advertised, I'm only getting two (!) concurrent tasks at a time. That is far more constrained than I would have expected:</p>
<p><a href=""https://i.stack.imgur.com/EcLkn.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/EcLkn.png"" alt=""enter image description here"" /></a></p>
<p>If I use the old GCD <code>concurrentPerform</code> ...</p>
<pre class=""lang-swift prettyprint-override""><code>func launchTasks2() {
    DispatchQueue.global().async {
        DispatchQueue.concurrentPerform(iterations: 32) { [self] i in
            let value = doSomething(with: i)
            // do something with `value`
        }
    }
}
</code></pre>
<p>... I get twelve at a time, taking full advantage of the device (iOS 15 simulator on my 6-core i9 MacBook Pro) while avoiding thread-explosion:</p>
<p><a href=""https://i.stack.imgur.com/V1T6R.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/V1T6R.png"" alt=""enter image description here"" /></a></p>
<p>(FWIW, both of these were profiled in Xcode 13.0 beta 1 (13A5154h) running on Big Sur. And please disregard the minor differences in the individual “jobs” in these two runs, as the function in question is just spinning for a random duration; the key observation is the degree of concurrency is what we would have expected.)</p>
<p>It is excellent that this new async-await (and task groups) automatically limits the degree of parallelism, but the cooperative thread pool of async-await is far more constrained than I would have expected. And I see of no way to adjust these parameters of that pool. How can we better take advantage of our hardware while still avoiding thread explosion (without resorting to old techniques like non-zero semaphores or operation queues)?</p>
","1271826","","1271826","","2021-08-29 00:25:54","2021-08-29 00:25:54","Maximum number of threads with async-await task groups","<ios><swift><async-await><grand-central-dispatch><swift5>","1","0","1","","","CC BY-SA 4.0"
"3358272","116640","2014-02-26 23:58:52","r2evans","2022-10-29 22:28:55","","","<p>(he/him)</p>
<p>The &quot;r&quot; in my display name has nothing to do with the R programming language, though it seems convenient.</p>
<p><em>Preferred tools</em>: emacs/ess, knitr, LaTeX, linux<br />
<em>Preferred languages</em>: R, python, GAMS/CPLEX, pyomo<br />
<em>Interests</em>: optimization, datavis, network analysis, security, robotics</p>
<hr />
<h3>Popular answers (for good or bad ...)</h3>
<p>These are mostly for my reference, saves searching again and again ...</p>
<ul>
<li><a href=""https://stackoverflow.com/q/5963269/3358272"">reproducible questions</a></li>
<li><a href=""https://stackoverflow.com/a/2276001/3358272"">apply versus loops</a></li>
<li><a href=""https://stackoverflow.com/a/24376207/3358272"">list of dataframes</a></li>
<li>more about the <a href=""https://stackoverflow.com/q/3505701/3358272"">various <code>*apply</code> functions</a></li>
<li><a href=""https://cran.r-project.org/bin/windows/base/rw-FAQ.html#How-do-I-install-R-for-Windows_003f"" rel=""nofollow noreferrer"">R on Windows with spaces in paths</a> (a weak argument for custom installation directory such as <code>C:/R/</code>)</li>
<li><a href=""https://stackoverflow.com/a/51263513/3358272""><code>require</code> vs <code>library</code></a></li>
</ul>
","10038","2986","314","https://i.stack.imgur.com/gteVQ.jpg?s=128&g=1","","4090011","63550588","1","63556918","","2020-08-23 18:25:02","","14","1110","<p><code>coord_cartesian</code> doesn't allow one to set per-facet coordinates, and using other range-limiting tends to produce a straight-line on the specific extreme. Since we have widelay-varying y-ranges, we can't set the limits on all facets identically; limiting the data before plot is not as friendly with <code>geom_line</code>/<code>geom_path</code> (<a href=""https://stackoverflow.com/a/27319786/3358272"">https://stackoverflow.com/a/27319786/3358272</a>), as it takes a lot more effort to interpolate data to get to the edge and then insert <code>NA</code>s in order to break up the line. (Ultimately, the <em>only</em> way to get the desired result is to do exactly this, which can be a bit onerous with other data.)</p>
<p>One workaround is suggested in <a href=""https://gist.github.com/burchill/d780d3e8663ad15bcbda7869394a348a"" rel=""noreferrer"">https://gist.github.com/burchill/d780d3e8663ad15bcbda7869394a348a</a>, where it starts with</p>
<pre class=""lang-r prettyprint-override""><code>test_data %&gt;%
  ggplot(aes(x=Nsubjects, y = Odds, color=EffectSize)) +
  facet_wrap(DataType ~ ExpType, labeller = label_both, scales=&quot;free&quot;) +
  geom_line(size=2) +
  geom_ribbon(aes(ymax=Upper, ymin=Lower, fill=EffectSize, color=NULL), alpha=0.2)
</code></pre>
<p><a href=""https://i.stack.imgur.com/8i3BC.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/8i3BC.png"" alt=""ggplot2 with one facet needing better limits"" /></a></p>
<p>and in previous versions of <code>ggplot2</code>, that gist defined <code>coord_panel_ranges</code> and was able to control coordinates per-facet. The two right facets should narrow down to a 1-6(ish) y-axis so that the exploding confidence interval goes off-screen and allows the facet to focus primarily on the &quot;normal range&quot; of data. (Note: the <code>test_data</code> and this vis is not mine, it's taken from the gist. While my needs are somewhat similar, I thought it better to stay within the confines of the gist's data and code.)</p>
<p>Unfortunately, this now fails for me with <code>ggplot2-3.3.0</code>. Initial errors related to the recent loss of <code>ggplot2::scale_range</code>, which I tried to mitigate with this adaptation of burchill's code (that uses other <code>ggplot2:::</code> internal functions):</p>
<pre class=""lang-r prettyprint-override""><code>UniquePanelCoords &lt;- ggplot2::ggproto(
  &quot;UniquePanelCoords&quot;, ggplot2::CoordCartesian,
  
  num_of_panels = 1,
  panel_counter = 1,
  panel_ranges = NULL,
  
  setup_layout = function(self, layout, params) {
    self$num_of_panels &lt;- length(unique(layout$PANEL))
    self$panel_counter &lt;- 1
    layout
  },
  
  setup_panel_params =  function(self, scale_x, scale_y, params = list()) {
    if (!is.null(self$panel_ranges) &amp; length(self$panel_ranges) != self$num_of_panels)
      stop(&quot;Number of panel ranges does not equal the number supplied&quot;)
    
    train_cartesian &lt;- function(scale, limits, name, given_range = NULL) {
      if (is.null(given_range)) {
        expansion &lt;- ggplot2:::default_expansion(scale, expand = self$expand)
        range &lt;- ggplot2:::expand_limits_scale(scale, expansion,
                                               coord_limits = self$limits[[name]])
      } else {
        range &lt;- given_range
      }
      
      out &lt;- scale$break_info(range)
      out$arrange &lt;- scale$axis_order()
      names(out) &lt;- paste(name, names(out), sep = &quot;.&quot;)
      out
    }
    
    cur_panel_ranges &lt;- self$panel_ranges[[self$panel_counter]]
    if (self$panel_counter &lt; self$num_of_panels)
      self$panel_counter &lt;- self$panel_counter + 1
    else
      self$panel_counter &lt;- 1
    
    c(train_cartesian(scale_x, self$limits$x, &quot;x&quot;, cur_panel_ranges$x),
      train_cartesian(scale_y, self$limits$y, &quot;y&quot;, cur_panel_ranges$y))
  }
)

coord_panel_ranges &lt;- function(panel_ranges, expand = TRUE, default = FALSE, clip = &quot;on&quot;) {
  ggplot2::ggproto(NULL, UniquePanelCoords, panel_ranges = panel_ranges, 
          expand = expand, default = default, clip = clip)
}
</code></pre>
<p>but this is still failing with</p>
<pre class=""lang-r prettyprint-override""><code>test_data %&gt;%
  ggplot(aes(x=Nsubjects, y = Odds, color=EffectSize)) +
  facet_wrap(DataType ~ ExpType, labeller = label_both, scales=&quot;free&quot;) +
  geom_line(size=2) +
  geom_ribbon(aes(ymax=Upper, ymin=Lower, fill=EffectSize, color=NULL), alpha=0.2) +
  coord_panel_ranges(panel_ranges = list(
    list(x=c(8,64), y=c(1,4)), # Panel 1
    list(x=c(8,64), y=c(1,6)), # Panel 2
    list(NULL),                # Panel 3, an empty list falls back on the default values
    list(x=c(8,64), y=c(1,7))  # Panel 4
  ))
# Error in panel_params$x$break_positions_minor() : 
#   attempt to apply non-function
</code></pre>
<p>I'm not very familiar with extending <code>ggplot2</code>, and I suspect there is something I'm missing from the ggproto. Here's what the return value from the proto looks like:</p>
<pre class=""lang-r prettyprint-override""><code>str(c(train_cartesian(scale_x, self$limits$x, &quot;x&quot;, cur_panel_ranges$x),
      train_cartesian(scale_y, self$limits$y, &quot;y&quot;, cur_panel_ranges$y)))
# List of 14
#  $ x.range       : num [1:2] 8 64
#  $ x.labels      : chr [1:3] &quot;20&quot; &quot;40&quot; &quot;60&quot;
#  $ x.major       : num [1:3] 0.214 0.571 0.929
#  $ x.minor       : num [1:6] 0.0357 0.2143 0.3929 0.5714 0.75 ...
#  $ x.major_source: num [1:3] 20 40 60
#  $ x.minor_source: num [1:6] 10 20 30 40 50 60
#  $ x.arrange     : chr [1:2] &quot;secondary&quot; &quot;primary&quot;
#  $ y.range       : num [1:2] 1 4
#  $ y.labels      : chr [1:4] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot;
#  $ y.major       : num [1:4] 0 0.333 0.667 1
#  $ y.minor       : num [1:7] 0 0.167 0.333 0.5 0.667 ...
#  $ y.major_source: num [1:4] 1 2 3 4
#  $ y.minor_source: num [1:7] 1 1.5 2 2.5 3 3.5 4
#  $ y.arrange     : chr [1:2] &quot;primary&quot; &quot;secondary&quot;
</code></pre>
<p>Do I need to have an <code>x</code> element that's a list with at least a <code>break_positions_minor</code> function, or is there something else that needs to be inherited in order to ensure <code>panel_params$x$break_positions_minor</code> exists or a reasonable default is used?</p>
<hr />
<p>Data:</p>
<pre class=""lang-r prettyprint-override""><code>test_data &lt;- structure(list(DataType = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L), .Label = c(&quot;A&quot;, &quot;B&quot;), class = &quot;factor&quot;), 
    ExpType = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 
    2L, 2L, 2L, 2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
    2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L), .Label = c(&quot;X&quot;, &quot;Y&quot;), class = &quot;factor&quot;), 
    EffectSize = structure(c(1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 
    1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 
    2L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L), .Label = c(&quot;15&quot;, &quot;35&quot;
    ), class = &quot;factor&quot;), Nsubjects = c(8, 16, 32, 64, 8, 16, 
    32, 64, 8, 16, 32, 64, 8, 16, 32, 64, 8, 16, 32, 64, 8, 16, 
    32, 64, 8, 16, 32, 64, 8, 16, 32, 64), Odds = c(1.06248116259846, 
    1.09482076720863, 1.23086993413208, 1.76749340505612, 1.06641831731573, 
    1.12616954196688, 1.48351814320987, 3.50755080416964, 1.11601399761081, 
    1.18352602009495, 1.45705466646283, 2.53384744810515, 1.13847061762186, 
    1.24983742407086, 1.97075900741022, 6.01497152563726, 1.02798821372378, 
    1.06297006279249, 1.19432835697453, 1.7320754674107, 1.02813271730924, 
    1.09355953747203, 1.44830680332583, 3.4732692664923, 1.06295915758305, 
    1.12008443626365, 1.3887632112682, 2.46321037334, 1.06722652223114, 
    1.1874936754725, 1.89870184372054, 5.943747409114), Upper = c(1.72895843644471, 
    2.09878774769559, 2.59771794965346, 5.08513435549015, 1.72999898901071, 
    1.8702196882561, 3.85385388850167, 5.92564404180303, 1.99113042576373, 
    2.61074135841984, 3.45852331828636, 4.83900142207583, 1.57897154221764, 
    1.8957409107653, 10, 75, 2.3763918424135, 2.50181951057562, 
    3.45037180395673, 3.99515276392065, 2.04584535265976, 2.39317394040066, 
    2.832526733659, 5.38414183471915, 1.40569501856836, 2.6778044191832, 
    2.98023068052396, 4.75934650422069, 1.54116883311054, 2.50647989271592, 
    3.48517589981551, 100), Lower = c(0.396003888752214, 0.0908537867216577, 
    -0.135978081389309, -1.55014754537791, 0.40283764562075, 
    0.382119395677663, -0.88681760208193, 1.08945756653624, 0.240897569457892, 
    -0.243689318229938, -0.544413985360706, 0.228693474134466, 
    0.69796969302609, 0.603933937376415, 0.183548809738402, 3.57236968943798, 
    -0.320415414965949, -0.375879384990643, -1.06171509000767, 
    -0.531001829099242, 0.010420081958713, -0.206054865456611, 
    0.0640868729926525, 1.56239669826544, 0.720223296597732, 
    -0.437635546655903, -0.202704257987574, 0.167074242459314, 
    0.593284211351745, -0.131492541770921, 0.312227787625573, 
    3.76692741957876)), .Names = c(&quot;DataType&quot;, &quot;ExpType&quot;, &quot;EffectSize&quot;, 
&quot;Nsubjects&quot;, &quot;Odds&quot;, &quot;Upper&quot;, &quot;Lower&quot;), class = c(&quot;tbl_df&quot;, &quot;tbl&quot;, 
&quot;data.frame&quot;), row.names = c(NA, -32L))
</code></pre>
","3358272","","","","","2021-02-11 16:32:56","ggplot2::coord_cartesian on facets","<r><ggplot2><facet><ggproto>","3","3","6","","","CC BY-SA 4.0"
"3962914","362914","2014-08-21 06:24:03","Ronak Shah","2022-10-28 08:49:03","https://shahronak.shinyapps.io/my_shiny_app/","Kuala Lumpur, Federal Territory of Kuala Lumpur, Malaysia","<p>Open for R freelance work.</p>
<p>Contact - shahronak47@yahoo.in
<br>
<br></p>
<p>If my answers helped you can <a href=""https://www.buymeacoffee.com/shahronak47"" rel=""nofollow noreferrer"">buy me a coffee.</a></p>
","69078","6088","5792","https://i.stack.imgur.com/tGgv6.jpg?s=128&g=1","","4920129","59918865","1","59921493","","2020-01-26 13:36:46","","14","2351","<p>We know that <code>prob</code> argument in <code>sample</code> is used to assign a probability of weights. </p>

<p>For example, </p>

<pre><code>table(sample(1:4, 1e6, replace = TRUE, prob = c(0.2, 0.4, 0.3, 0.1)))/1e6

#  1   2   3   4 
#0.2 0.4 0.3 0.1 


table(sample(1:4, 1e6, replace = TRUE, prob = c(0.2, 0.4, 0.3, 0.1)))/1e6

#    1     2     3     4 
#0.200 0.400 0.299 0.100 
</code></pre>

<p>In this example, the sum of probability is exactly 1 (0.2 + 0.4 + 0.3 + 0.1), hence it gives the expected ratio but what if the probability does not sum to 1? What output would it give? I thought it would result in an error but it gives some value. </p>

<p>When the probability sums up to more than 1.</p>

<pre><code>table(sample(1:4, 1e6, replace = TRUE, prob = c(0.2, 0.5, 0.5, 0.1)))/1e6

#     1      2      3      4 
#0.1544 0.3839 0.3848 0.0768 

table(sample(1:4, 1e6, replace = TRUE, prob = c(0.2, 0.5, 0.5, 0.1)))/1e6

#     1      2      3      4 
#0.1544 0.3842 0.3848 0.0767 
</code></pre>

<p>When the probability sums up to less than 1</p>

<pre><code>table(sample(1:4, 1e6, replace = TRUE, prob = c(0.1, 0.1, 0.5, 0.1)))/1e6

#    1     2     3     4 
#0.124 0.125 0.625 0.125 

table(sample(1:4, 1e6, replace = TRUE, prob = c(0.1, 0.1, 0.5, 0.1)))/1e6

#    1     2     3     4 
#0.125 0.125 0.625 0.125 
</code></pre>

<p>As we can see, running multiple times gives the output which is not equal to <code>prob</code> but the results are not random as well. How are the numbers distributed in this case? Where is it documented?</p>

<p>I tried searching on the internet but didn't find any relevant information. I looked through the documentation at <code>?sample</code> which has</p>

<blockquote>
  <p>The optional prob argument can be used to give a vector of weights for obtaining the elements of the vector being sampled. They need not sum to one, but they should be non-negative and not all zero. If replace is true, Walker's alias method (Ripley, 1987) is used when there are more than 200 reasonably probable values: this gives results incompatible with those from R &lt; 2.2.0.</p>
</blockquote>

<p>So it says that the <code>prob</code> argument need not sum to 1 but doesn't tell what is expected when it doesn't sum to 1? I am not sure if I am missing any part of the documentation. Does anybody have any idea? </p>
","3962914","","","","","2020-01-27 12:20:01","What happens when prob argument in sample sums to less/greater than 1?","<r><sample>","2","4","1","","","CC BY-SA 4.0"
"341994","497213","2010-05-15 16:05:56","matt","2022-10-30 03:13:44","http://www.apeth.net/matt/default.html","","<p>Author most recently of <a href=""https://learning.oreilly.com/library/view/ios-15-programming/9781098118495/"" rel=""nofollow noreferrer"">iOS 15 Programming Fundamentals with Swift</a> and of <a href=""https://www.oreilly.com/library/view/programming-ios-14/9781492092162/"" rel=""nofollow noreferrer"">Programming iOS 14</a>.</p>
<p>Code examples from the books available at <a href=""https://github.com/mattneub/Programming-iOS-Book-Examples"" rel=""nofollow noreferrer"">my github repository</a>.</p>
<p>A much earlier edition, <em>Programming iOS 6</em>, is available to read for free at <a href=""http://www.apeth.com/iOSBook/"" rel=""nofollow noreferrer"">http://www.apeth.com/iOSBook/</a>.</p>
<p>And the Swift language chapters of <em>iOS 10 Programming Fundamentals With Swift</em> are available at <a href=""http://www.apeth.com/swiftBook/"" rel=""nofollow noreferrer"">http://www.apeth.com/swiftBook/</a>.</p>
","68440","3276","34867","","","137658","67913756","1","67962899","","2021-06-10 02:17:19","","13","1596","<p>I'm trying out the new async/await stuff. My goal here is to run the <code>test()</code> method in the background, so I use <code>Task.detached</code>; but during <code>test()</code> I need to make a call on the main thread, so I'm using MainActor.</p>
<p>(I realize that this may look convoluted in isolation, but it's pared down from a much better real-world case.)</p>
<p>Okay, so test code looks like this (in a view controller):</p>
<pre><code>override func viewDidLoad() {
    super.viewDidLoad()
    Task.detached(priority: .userInitiated) {
        await self.test()
    }
}
@MainActor func getBounds() async -&gt; CGRect {
    let bounds = self.view.bounds
    return bounds
}
func test() async {
    print(&quot;test 1&quot;, Thread.isMainThread) // false
    let bounds = await self.getBounds()
    print(&quot;test 2&quot;, Thread.isMainThread) // true
}
</code></pre>
<p>The first <code>print</code> says I'm not on the main thread. That's what I expect.</p>
<p>But the second <code>print</code> says I <em>am</em> on the main thread. That <em>isn't</em> what I expect.</p>
<p>It feels as if I've mysteriously fallen back into the main thread just because I called a MainActor function. I thought I would be waiting for the main thread and then resuming in the background thread I was already on.</p>
<p>Is this a bug, or are my expectations mistaken? If the latter, how <em>do</em> I step out to the main thread during <code>await</code> but then come back to the thread I was on? I thought this was exactly what async/await would make easy...?</p>
<p>(I can &quot;solve&quot; the problem, in a way, by calling <code>Task.detached</code> again after the call to <code>getBounds</code>; but at that point my code looks so much like nested GCD that I have to wonder why I'm using async/await at all.)</p>
<p>Maybe I'm being premature but I went ahead and filed this as a bug: <a href=""https://bugs.swift.org/browse/SR-14756"" rel=""noreferrer"">https://bugs.swift.org/browse/SR-14756</a>.</p>
<hr />
<p><strong>More notes</strong>:</p>
<p>I can solve the problem by replacing</p>
<pre><code>    let bounds = await self.getBounds()
</code></pre>
<p>with</p>
<pre><code>    async let bounds = self.getBounds()
    let thebounds = await bounds
</code></pre>
<p>But that seems unnecessarily elaborate, and doesn't convince me that the original phenomenon is not a bug.</p>
<hr />
<p>I can also solve the problem by using actors, and this is starting to look like the best approach. But again, that doesn't persuade me that the phenomenon I'm noting here is not a bug.</p>
<hr />
<p>I'm more and more convinced that this is a bug. I just encountered (and reported) the following:</p>
<pre><code>override func viewDidLoad() {
    super.viewDidLoad()
    // Do any additional setup after loading the view.
    async {
        print(&quot;howdy&quot;)
        await doSomeNetworking()
    }
}
func doSomeNetworking() async {
    print(Thread.isMainThread)
}
</code></pre>
<p>This prints <code>howdy</code> and then the second <code>print</code> prints <code>true</code>. But if we comment out the first print, the remaining (second) <code>print</code> prints <code>false</code>!</p>
<p>How can merely adding or removing a print statement change what thread we're on? Surely that's not intended.</p>
","341994","","341994","","2021-09-22 14:09:04","2022-08-30 04:50:06","asyncDetached falling back into main thread after MainActor call","<swift><async-await><swift5><mainactor>","6","6","4","","","CC BY-SA 4.0"
"341994","497213","2010-05-15 16:05:56","matt","2022-10-30 03:13:44","http://www.apeth.net/matt/default.html","","<p>Author most recently of <a href=""https://learning.oreilly.com/library/view/ios-15-programming/9781098118495/"" rel=""nofollow noreferrer"">iOS 15 Programming Fundamentals with Swift</a> and of <a href=""https://www.oreilly.com/library/view/programming-ios-14/9781492092162/"" rel=""nofollow noreferrer"">Programming iOS 14</a>.</p>
<p>Code examples from the books available at <a href=""https://github.com/mattneub/Programming-iOS-Book-Examples"" rel=""nofollow noreferrer"">my github repository</a>.</p>
<p>A much earlier edition, <em>Programming iOS 6</em>, is available to read for free at <a href=""http://www.apeth.com/iOSBook/"" rel=""nofollow noreferrer"">http://www.apeth.com/iOSBook/</a>.</p>
<p>And the Swift language chapters of <em>iOS 10 Programming Fundamentals With Swift</em> are available at <a href=""http://www.apeth.com/swiftBook/"" rel=""nofollow noreferrer"">http://www.apeth.com/swiftBook/</a>.</p>
","68440","3276","34867","","","137658","60624851","1","60627981","","2020-03-10 19:43:03","","13","5494","<p>I see how to use <code>.retry</code> directly, to resubscribe after an error, like this:</p>

<pre><code>    URLSession.shared.dataTaskPublisher(for:url)
        .retry(3)
</code></pre>

<p>But that seems awfully simple-minded. What if I think that this error might go away if I wait awhile? I could insert a <code>.delay</code> operator, but then the delay operates even if there is no error. And there doesn't seem to be a way to apply an operator conditionally (i.e. only when there's an error).</p>

<p>I see how I could work around this by writing a RetryWithDelay operator from scratch, and indeed such an operator has been written by third parties. But is there a way to say ""delay if there's an error"", purely using the operators we're given?</p>

<p>My thought was that I could use <code>.catch</code>, because its function runs only if there is an error. But the function needs to return a publisher, and what publisher would we use? If we return <code>somePublisher.delay(...)</code> followed by <code>.retry</code>, we'd be applying <code>.retry</code> to the wrong publisher, wouldn't we?</p>
","341994","","341994","","2020-03-11 13:29:05","2021-04-02 08:19:42","Combine framework retry after delay?","<ios><swift><combine>","4","0","3","","","CC BY-SA 4.0"
"816620","656446","2011-06-26 23:59:00","jfriend00","2022-10-30 04:42:33","","","<p>25 years of software coding and management.  Now, retired.</p>
","40225","4290","5853","https://i.stack.imgur.com/Xu7hp.jpg","","432092","62184501","1","62193239","","2020-06-03 23:37:37","","13","2135","<p>In node v14.3.0, I discovered (while doing some coding work with very large arrays) that sub-classing an array can cause <code>.slice()</code> to slow down by a factor 20x.  While, I could imagine that there might be some compiler optimizations around a non-subclassed array, what I do not understand at all is how <code>.slice()</code> can be more than 2x slower than just manually copying elements from one array to another.  That does not make sense to me at all.  Anyone have any ideas?  Is this a bug or is there some aspect to this that would/could explain it?</p>

<p>For the test, I created a 100,000,000 unit array filled with increasing numbers.  I made a copy of the array with <code>.slice()</code> and I made a copy manually by then iterating over the array and assigning values to a new array.  I then ran those two tests for both an <code>Array</code> and my own empty subclass <code>ArraySub</code>.  Here are the numbers:</p>

<pre><code>Running with Array(100,000,000)
sliceTest: 436.766ms
copyTest: 4.821s

Running with ArraySub(100,000,000)
sliceTest: 11.298s
copyTest: 4.845s
</code></pre>

<p>The manual copy is about the same both ways.  The <code>.slice()</code> copy is 26x slower on the sub-class and more than 2x slower than the manual copy.  Why would that be?</p>

<p>And, here's the code:</p>

<pre><code>// empty subclass for testing purposes
class ArraySub extends Array {

}

function test(num, cls) {
    let name = cls === Array ? ""Array"" : ""ArraySub"";
    console.log(`--------------------------------\nRunning with ${name}(${num})`);
    // create array filled with unique numbers
    let source = new cls(num);
    for (let i = 0; i &lt; num; i++) {
        source[i] = i;
    }

    // now make a copy with .slice()
    console.time(""sliceTest"");
    let copy = source.slice();
    console.timeEnd(""sliceTest"");

    console.time(""copyTest"");
    // these next 4 lines are a lot faster than this.slice()
    const manualCopy = new cls(num);
    for (let [i, item] of source.entries()) {
        manualCopy[i] = item;
    }
    console.timeEnd(""copyTest"");
}

[Array, ArraySub].forEach(cls =&gt; {
    test(100_000_000, cls);
});
</code></pre>

<p>FYI, there's a similar result in this <a href=""https://jsperf.com/array-slice-on-subclass/1"" rel=""noreferrer"">jsperf.com test</a> when run in the Chrome browser.  Running the jsperf in Firefox shows a similar trend, but not as much of a difference as in Chrome.</p>
","816620","","816620","","2020-06-04 01:00:37","2020-06-04 11:14:19","Why is array.prototype.slice() so slow on sub-classed arrays?","<javascript><arrays><performance-testing><subclass><v8>","1","11","0","","","CC BY-SA 4.0"
"3001761","110312","2013-11-17 14:20:38","jonrsharpe","2022-10-29 21:21:13","https://blog.jonrshar.pe","London, United Kingdom","<p>he/him or they/them</p>
<p>Software developer, guitarist, cyclist &amp; photographer based in London, UK. These are my opinions; if you don't like them, I have others.</p>
<p>Should you be overwhelmed by gratitude, you can <a href=""https://ko-fi.com/textbook"" rel=""nofollow noreferrer"">buy me a coffee</a>!</p>
<hr />
<p>The following premium content is only available to 10k-plus users (and therefore can't be revenge-downvoted):</p>
<ul>
<li><a href=""https://stackoverflow.com/q/57498273/3001761"">Is it possible to migrate a Heroku addon from one app to another?</a></li>
<li><a href=""https://stackoverflow.com/q/58683135/3001761"">Installing Google Chrome in the Travis Bionic build environment</a></li>
<li><a href=""https://stackoverflow.com/q/72999443/3001761"">&quot;Only file and data URLs are supported by the default ESM loader&quot; in Node 14</a></li>
</ul>
<p>If you wish you had access to this but don't have the requisite rep, blame the garbage human beings who vote on <em>people</em> rather than <em>content</em>. If you're reading this because you <em>are</em> one of those people looking for something to downvote, please throw yourself and your computer into separate bins.</p>
","58368","1391","121923","https://i.stack.imgur.com/feZwC.jpg?s=128&g=1","","3597514","69859509","1","69859510","","2021-11-05 21:37:43","","13","22756","<p>When testing components with <code>&lt;Link&gt;</code>s, for example in my answer to <a href=""https://stackoverflow.com/q/65270992/3001761"">Recommended approach for route-based tests within routes of react-router</a>, I often use the following pattern to get access to the current <code>location</code> for testing purposes:</p>
<pre class=""lang-js prettyprint-override""><code>const renderInRouter = () =&gt; {
  const history = createMemoryHistory();
  const wrapper = render(
    &lt;Router history={history}&gt;
      &lt;MyPage /&gt;
    &lt;/Router&gt;
  );
  return { ...wrapper, history };
}
</code></pre>
<p>This worked fine up to v5.3, but after upgrading to v6 I get:</p>
<pre><code> FAIL  ./demo.test.js
  ✕ works (205 ms)

  ● works

    TypeError: Cannot read properties of undefined (reading 'pathname')

      at Router (../packages/react-router/index.tsx:281:5)

      ...
</code></pre>
<p>This use-case isn't covered in the <a href=""https://reactrouter.com/docs/en/v6/upgrading/v5#upgrade-to-react-router-v6"" rel=""noreferrer"">migration docs</a>, v6 has no testing guides so far and, although the <a href=""https://reactrouter.com/docs/en/v6/api#router"" rel=""noreferrer"">API reference</a> does show that the <code>history</code> prop is no longer expected:</p>
<pre><code>interface RouterProps {
  basename?: string;
  children?: React.ReactNode;
  location: Partial&lt;Location&gt; | string;
  navigationType?: NavigationType;
  navigator: Navigator;
  static?: boolean;
}
</code></pre>
<p>it's not clear what the v6 equivalent is; I tried switching to <code>navigator={history}</code> but still got the same error.</p>
<p>To reproduce, copy the following files into a new directory and run <code>npm install</code> then <code>npm test</code>:</p>
<p><code>package.json</code></p>
<pre class=""lang-json prettyprint-override""><code>{
  &quot;name&quot;: &quot;router6-demo&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;description&quot;: &quot;&quot;,
  &quot;main&quot;: &quot;index.js&quot;,
  &quot;scripts&quot;: {
    &quot;test&quot;: &quot;jest&quot;
  },
  &quot;jest&quot;: {
    &quot;testEnvironment&quot;: &quot;jsdom&quot;
  },
  &quot;babel&quot;: {
    &quot;presets&quot;: [
      &quot;@babel/preset-react&quot;
    ]
  },
  &quot;keywords&quot;: [],
  &quot;author&quot;: &quot;&quot;,
  &quot;license&quot;: &quot;ISC&quot;,
  &quot;devDependencies&quot;: {
    &quot;@babel/preset-react&quot;: &quot;^7.16.0&quot;,
    &quot;@testing-library/react&quot;: &quot;^12.1.2&quot;,
    &quot;jest&quot;: &quot;^27.3.1&quot;,
    &quot;react&quot;: &quot;^17.0.2&quot;,
    &quot;react-dom&quot;: &quot;^17.0.2&quot;,
    &quot;react-router-dom&quot;: &quot;^6.0.0&quot;
  }
}

</code></pre>
<p><code>index.test.js</code>:</p>
<pre class=""lang-js prettyprint-override""><code>const { render } = require(&quot;@testing-library/react&quot;);
const { createMemoryHistory } = require(&quot;history&quot;);
const React = require(&quot;react&quot;);
const { Router } = require(&quot;react-router-dom&quot;);

it(&quot;used to work&quot;, () =&gt; {
  render(
    &lt;Router history={createMemoryHistory()}&gt;&lt;/Router&gt;
  );
});
</code></pre>
<p>If you <code>npm install --save-dev react-router@5</code> and run <code>npm test</code> again, you can see that this passes in v5.</p>
","3001761","","8690857","","2022-02-03 00:48:42","2022-09-20 19:05:08","""Cannot read properties of undefined (reading 'pathname')"" when testing pages in the v6 React Router","<reactjs><jestjs><react-router><react-router-dom><react-testing-library>","2","0","5","","","CC BY-SA 4.0"
"3358272","116640","2014-02-26 23:58:52","r2evans","2022-10-29 22:28:55","","","<p>(he/him)</p>
<p>The &quot;r&quot; in my display name has nothing to do with the R programming language, though it seems convenient.</p>
<p><em>Preferred tools</em>: emacs/ess, knitr, LaTeX, linux<br />
<em>Preferred languages</em>: R, python, GAMS/CPLEX, pyomo<br />
<em>Interests</em>: optimization, datavis, network analysis, security, robotics</p>
<hr />
<h3>Popular answers (for good or bad ...)</h3>
<p>These are mostly for my reference, saves searching again and again ...</p>
<ul>
<li><a href=""https://stackoverflow.com/q/5963269/3358272"">reproducible questions</a></li>
<li><a href=""https://stackoverflow.com/a/2276001/3358272"">apply versus loops</a></li>
<li><a href=""https://stackoverflow.com/a/24376207/3358272"">list of dataframes</a></li>
<li>more about the <a href=""https://stackoverflow.com/q/3505701/3358272"">various <code>*apply</code> functions</a></li>
<li><a href=""https://cran.r-project.org/bin/windows/base/rw-FAQ.html#How-do-I-install-R-for-Windows_003f"" rel=""nofollow noreferrer"">R on Windows with spaces in paths</a> (a weak argument for custom installation directory such as <code>C:/R/</code>)</li>
<li><a href=""https://stackoverflow.com/a/51263513/3358272""><code>require</code> vs <code>library</code></a></li>
</ul>
","10038","2986","314","https://i.stack.imgur.com/gteVQ.jpg?s=128&g=1","","4090011","61825087","1","62162579","","2020-05-15 17:29:33","","13","1053","<p>Is there a way to <em>programmatically</em> discover the named arguments for ODBC connections?</p>

<p>For instance, using the ""ODBC Driver 17 for SQL Server"", the ODBC Data Source Administrator (in Windows) allows for authentication using a ""Login ID"" and ""Password"", yet when connecting programmatically, we need to use <code>uid=</code> and <code>pwd=</code>, respectively. These two configuration points are clearly listed in configuration documentation (e.g., <a href=""https://db.rstudio.com/databases/microsoft-sql-server/"" rel=""noreferrer"">https://db.rstudio.com/databases/microsoft-sql-server/</a>), but there are several other configuration options that the driver supports that are less- or un-documented.</p>

<p>(For SQL Server, there are more docs, including <a href=""https://learn.microsoft.com/en-us/sql/connect/odbc/windows/driver-aware-connection-pooling-in-the-odbc-driver-for-sql-server?view=sql-server-ver15"" rel=""noreferrer"">https://learn.microsoft.com/en-us/sql/connect/odbc/windows/driver-aware-connection-pooling-in-the-odbc-driver-for-sql-server?view=sql-server-ver15</a>, that lists several other arguments (though not their possible values). That works for <em>this</em> driver, though since this page has not been updated for Driver 17 we have to assume that all options are unchanged.)</p>

<p>There are programmatic ways to learn what drivers are available, and what pre-defined data sources are available:</p>

<pre class=""lang-r prettyprint-override""><code>odbc::odbcListDrivers()
#                             name        attribute value
# ...truncated...
# 33 ODBC Driver 17 for SQL Server       UsageCount     1
# 34 ODBC Driver 17 for SQL Server         APILevel     2
# 35 ODBC Driver 17 for SQL Server ConnectFunctions   YYY
# 36 ODBC Driver 17 for SQL Server        CPTimeout    60
# 37 ODBC Driver 17 for SQL Server    DriverODBCVer 03.80
# 38 ODBC Driver 17 for SQL Server        FileUsage     0
# 39 ODBC Driver 17 for SQL Server         SQLLevel     1

odbc::odbcListDataSources()
#                 name                   description
# 1             somedb ODBC Driver 17 for SQL Server
# 2 SQLite3 Datasource           SQLite3 ODBC Driver
</code></pre>

<p>but nothing to discover connection <em>arguments</em>. Perhaps something akin to this non-existent function:</p>

<pre class=""lang-r prettyprint-override""><code>discover_odbc_arguments(""ODBC Driver 17 for SQL Server"")
# [1] ""Address""                ""AnsiNPW""                ""App""                   
# [4] ""Database""               ""Encrypt""                ""PWD""                   
# [7] ""Trusted_Connection""     ""TrustServerCertificate"" ""UID""                   
</code></pre>

<p>(I used SQL Server as an example here, but I'm interested in more general methods. And since I'm looking for programmatic mechanisms, I'd prefer to avoid suggestions to read the docs for each driver.)</p>

<p>(I am not opposed to non-R methods.)</p>

<hr>

<p>Some non-R attempts that did not work. Using a mssql odbc driver library as an example with known parameter patterns.</p>

<pre class=""lang-sh prettyprint-override""><code>$ strings /opt/microsoft/msodbcsql17/lib64/libmsodbcsql-17.5.so.2.1  \
  | egrep -i 'Trusted.Conn|AnsiDPW|TrustServer'
### &lt;no output&gt;
$ grep -rli 'Trusted.Conn|AnsiDPW|TrustServer' /opt/microsoft/msodbcsql17/
### &lt;no output&gt;
</code></pre>
","3358272","","3358272","","2020-05-27 15:30:20","2020-06-02 22:46:40","how to find ODBC driver-specific arguments","<r><odbc><dbi><nanodbc>","1","7","4","","","CC BY-SA 4.0"
"642706","277874","2011-03-03 09:33:32","Basil Bourque","2022-10-30 00:53:19","","","<h1>SOreadytohelp</h1>
","34518","24703","6004","https://i.stack.imgur.com/ZWEI3.jpg?s=128&g=1","","322981","62352043","1","62352121","","2020-06-12 20:31:24","","12","1712","<p>Somehow I did something to make IntelliJ indicate a number of usages for each variable on a class. Text such as ""1 usage"" appears above each variable declaration.</p>

<p>How can I turn this off?</p>
","642706","","","","","2022-08-05 21:09:36","Hide the ""1 usage"" indicator floating in code editor in IntelliJ 2020","<intellij-idea>","1","0","","","","CC BY-SA 4.0"
"1745001","177778","2012-10-14 14:07:47","Ed Morton","2022-10-30 00:18:40","https://www.codementor.io/@edmorton","Cisco, Chicago","<p>If you appreciate my help more than an upvote, buy me a coffee - <a href=""https://www.buymeacoffee.com/EdMorton"" rel=""nofollow noreferrer"">https://www.buymeacoffee.com/EdMorton</a></p>

<p>For more information or if you'd like more support than I can provide in this forum, see <a href=""https://www.codementor.io/@edmorton"" rel=""nofollow noreferrer"">https://www.codementor.io/@edmorton</a></p>
","20406","6922","3909","","","1938048","65621325","1","65621326","","2021-01-07 23:20:21","","12","883","<p><strong>NOTE:</strong> This is not a duplicate of any existing question, it's intended to show why such an extremely common and seemingly simple question is unanswerable and provide guidance on how people posting such questions can modify them to make them answerable so we don't have to keep providing the same guidance in comments almost every day and can just refer to this instead.</p>
<p>Given the following input file:</p>
<pre><code>foo
o.b
bar
</code></pre>
<p>I need to output all lines that match the pattern <code>o.b</code> so my expected output is:</p>
<pre><code>o.b
</code></pre>
<p>and I have tried <code>awk '&quot;o.b&quot;' file</code> but that output all lines (this part just added to avoid complaints that no attempted solution was posted in the question).</p>
","1745001","","1745001","","2021-01-07 23:36:05","2021-01-28 22:22:13","How do I find the text that matches a pattern?","<awk>","1","0","7","","","CC BY-SA 4.0"
"2402272","144360","2013-05-20 15:31:09","John Bollinger","2022-10-29 18:20:21","","","","10670","5515","2051","","","2792262","68505026","1","68597084","","2021-07-23 21:05:18","","12","471","<p>The OP of <a href=""https://stackoverflow.com/q/68484935/2402272"">a recent question</a> added a comment to it linking a paper entitled <a href=""https://fzn.fr/readings/c11comp.pdf"" rel=""nofollow noreferrer""><em>Common Compiler Optimisations are Invalid in the C11 Memory Model and what we can do about it</em></a>, which apparently was presented at POPL 2015.  Among other things, it purports to show several unexpected and counterintuitive conclusions derived from the specifications for what it calls the &quot;C11 memory model&quot;, which I take to consist largely of the provisions of <a href=""https://port70.net/%7Ensz/c/c11/n1570.html#5.1.2.4"" rel=""nofollow noreferrer"">section 5.1.2.4</a> of the C11 language specification.</p>
<p>The paper is somewhat lengthy, but for the purposes of this question I focus on the discussion of scheme &quot;SEQ&quot; on the second page.  This concerns a multithreaded program in which ...</p>
<ul>
<li><code>a</code> is non-atomic (for example, an <code>int</code>),</li>
<li><code>x</code> and <code>y</code> are atomic (for example, <code>_Atomic int</code>), and</li>
<li><code>a</code>, <code>x</code>, and <code>y</code> all initially have value <code>0</code>,</li>
</ul>
<p>... and the following occurs (transliterated from pseudocode):</p>
<hr />
<p><strong>Thread 1</strong></p>
<pre><code>a = 1;
</code></pre>
<p><strong>Thread 2</strong></p>
<pre><code>if (atomic_load_explicit(&amp;x, memory_order_relaxed))
    if (a)
        atomic_store_explicit(&amp;y, 1, memory_order_relaxed);
</code></pre>
<p><strong>Thread 3</strong></p>
<pre><code>if (atomic_load_explicit(&amp;y, memory_order_relaxed))
    atomic_store_explicit(&amp;x, 1, memory_order_relaxed);
</code></pre>
<hr />
<p>The paper makes this argument:</p>
<blockquote>
<p>First, notice that there is no execution (<em>consistent execution</em> in
the terminology of Section 2) in which the load of <code>a</code> occurs. We show this
by contradiction. Suppose that there is an execution in which a load
of <code>a</code> occurs. In such an execution the load of <code>a</code> can only return <code>0</code> (the
initial value of <code>a</code>) because the store <code>a=1</code> does not happen before it
(because it is in a different thread that has not been synchronised
with) and non-atomic loads must return the latest write that happens
before them. Therefore, in this execution the store to <code>y</code> does not happen,
which in turn means that the load of <code>y</code> cannot return <code>1</code> and the store
to <code>x</code> also does not happen. Then, <code>x</code> cannot read <code>1</code>, and thus the load of <code>a</code> does
not occur. As a consequence this program is <em>not racy</em>: since the load
of <code>a</code> does not occur in any execution, there are no executions with
conflicting accesses on the same non-atomic variable. We conclude that
the only possible final state is <code>a=1 ∧ x=y=0</code>.</p>
</blockquote>
<p>(Question 1) <strong>But isn't that argument fatally flawed?</strong></p>
<p>The assertion that the load of <code>a</code> can only return 0 is made subject to the assumption that <code>a</code> is in fact read, which the argument intends to contradict.  But in that case, as the paper observes, there is no <em>happens before</em> relationship between the store to <code>a</code> in thread 1 and the load from <code>a</code> in thread 2.  These are conflicting accesses, neither is atomic, and one is a write.  Therefore, per paragraph 5.1.2.4/25, the program contains a data race resulting in undefined behavior.  Because the behavior is undefined, nothing can be concluded about the value loaded from <code>a</code> by thread 2, and in particular, it cannot be concluded from the specification that the load must return <code>0</code>.  The rest of the argument then collapses.</p>
<p>Although the paper claims that the argument shows that the program does not contain a data race (&quot;is not racy&quot;), in fact that is not a consequence of the argument but rather a hidden assumption.  Only if, contrary to 5.1.2.4/25, the program did not contain a data race would the argument stand up.</p>
<p>Now perhaps the key is that the argument above considers only &quot;consistent executions&quot;, a term defined in a later section of the paper.  I confess that it gets a little deep for me at that point, but if in fact constraining the behavior to consistent executions is sufficient to support the assertion that the load of <code>a</code> must return 0, then it seems that it is no longer (just) the rules of the C11 memory model that we are talking about.</p>
<p>This matters because the authors conclude that a source-to-source translation combining threads 1 &amp; 2 to yield ...</p>
<hr />
<p><strong>Thread 2'</strong></p>
<pre><code>a = 1;
if (atomic_load_explicit(&amp;x, memory_order_relaxed))
    if (a)
        atomic_store_explicit(&amp;y, 1, memory_order_relaxed);
</code></pre>
<hr />
<p>... is not permitted of implementations by the C11 memory model, on the basis that it allows executions in which the final state is <code>a = x = y = 1</code>.  That this and various other code transformations and optimizations are invalid is the thesis of the paper.</p>
<p>(Question 2) <strong>But isn't it indeed valid for a C11 implementation to treat the original three-threaded program as if it were the two-threaded program consisting of threads 2' and 3?</strong></p>
<p>If that allows &quot;consistent executions&quot; with results that could not be produced by any consistent execution of the original program, then I think that just shows that C11 does not constrain programs to exhibiting consistent executions.  Am I missing something here?</p>
","2402272","","2402272","","2021-07-26 00:28:58","2021-08-01 23:55:11","Does the C11 memory model really conflict with common optimizations?","<c><language-lawyer>","1","12","3","","","CC BY-SA 4.0"
"1505939","136326","2012-07-06 06:35:47","M.M","2022-10-30 00:58:58","","New Zealand","<p>Professional C programmer for 21 years, mostly on embedded systems. Some Windows C++ development also.</p>
","15931","14261","5652","","","1631513","60627249","1","60627915","","2020-03-10 23:23:53","","12","346","<p>This question refers to the addition of <a href=""https://wg21.link/P0593"" rel=""noreferrer"">P0593</a> to the <a href=""https://eel.is/c++draft/basic#intro.object-10"" rel=""noreferrer"">latest C++20 draft</a> .</p>

<p>Here is my example:</p>

<pre><code>#include &lt;cstdlib&gt;
#include &lt;cstdio&gt;

void foo(void *p)
{
    if ( std::getchar() == 'i' )
    {
        *(int *)p = 2;
        std::printf(""%d\n"", *(int *)p);
    }
    else
    {
        *(float *)p = 2;
        std::printf(""%f\n"", *(float *)p);
    }
}

int main()
{
    void *a = std::malloc( sizeof(int) + sizeof(float) );
    if ( !a ) return EXIT_FAILURE;

    foo(a);
    // foo(a);    [2]
}
</code></pre>

<p>Is this code well-defined for all inputs under the latest draft?</p>

<p>The rationale expressed in P0593 makes it fairly clear that uncommenting <code>[2]</code> would lead to undefined behaviour due to strict aliasing violation, if the two user input items differ .  The implicit object creation is supposed to happen just once, at the point of <code>malloc</code>; it isn't triggered by the assignment statement in <code>foo</code>.</p>

<p>For any actual run of the program , there exists a member of the unspecified set of implicit objects that would make the program well-defined .  But it's not clear to me whether the choice of implicit object creation mentioned in [intro.object]/10 must be made when the <code>malloc</code> happens; or whether the decision can ""time travel"" .</p>

<p>The same issue may arise for a program that reads a binary blob into a buffer and then makes a runtime decision of how to access it (e.g.  deserialization; and the header tells us whether a float or an int is coming up). </p>
","1505939","","1505939","","2020-03-10 23:49:54","2020-03-11 02:18:50","Can there be different implicit objects based on a later runtime decision in C++20?","<c++><language-lawyer><c++20>","1","0","3","","","CC BY-SA 4.0"
"1505939","136326","2012-07-06 06:35:47","M.M","2022-10-30 00:58:58","","New Zealand","<p>Professional C programmer for 21 years, mostly on embedded systems. Some Windows C++ development also.</p>
","15931","14261","5652","","","1631513","61114929","1","61122329","","2020-04-09 06:07:42","","12","246","<p>Since C++20 we can have:</p>

<pre><code>constexpr bool is_little_endian = std::endian::native == std::endian::little;
</code></pre>

<p>I would like to have code that does this if it is available, otherwise does runtime detection. Is this possible?</p>

<p>Maybe the code would look like:</p>

<pre><code>template&lt;bool b = std_endian_exists_v&gt; constexpr bool is_little_endian;
template&lt;&gt; constexpr bool is_little_endian&lt;true&gt; = std::endian::native == std::endian::little;
template&lt;&gt; constexpr bool is_little_endian&lt;false&gt; = runtime_detection();
</code></pre>

<p>I am aware that testing <code>__cplusplus</code> via preprocessor  is possible, however compilers phase in C++20 support in various stages so this is not a reliable indicator in either direction. </p>
","1505939","","2949645","","2020-04-13 21:08:15","2020-04-13 21:08:15","Is it possible to use std::endian if it is available, otherwise do something else?","<c++><endianness><constexpr><c++20>","1","10","3","","","CC BY-SA 4.0"
"298225","177184","2010-03-21 00:38:50","Eric Postpischil","2022-10-30 01:52:45","https://edp.org","","<p>Senior software engineer in Apple’s Vector and Numerics Group (retired).</p>
","15172","3452","6637","","","113187","70042442","1","70283057","","2021-11-20 01:02:17","","12","465","<p>C 2018 6.7.6.1 1 says:</p>
<blockquote>
<p>If, in the declaration “<strong>T D1</strong>”, <strong>D1</strong> has the form</p>
<p>    <strong>*</strong> <i>type-qualifier-list</i><sub>opt</sub> <strong>D</strong></p>
<p>and the type specified for <em>ident</em> in the declaration “<strong>T D</strong>” is
“<em>derived-declarator-type-list</em> <em>T</em>”, then the type specified for <em>ident</em>
is “<em>derived-declarator-type-list</em> <em>type-qualifier-list</em> pointer to <em>T</em>”.
For each type qualifier in the list, <em>ident</em> is a so-qualified pointer.</p>
</blockquote>
<p>This question is about the final sentence, but let’s work through the first one first.</p>
<p>Consider the declaration <code>int * const * foo</code>. Here <strong>T</strong> is <code>int</code>, <strong>D1</strong> is <code>* const * foo</code>, <em>type-qualifier-list</em> is <code>const</code>, and <strong>D</strong> is <code>* foo</code>.</p>
<p>Then <strong>T D</strong> is <code>int * foo</code>, and that specifies “pointer to <code>int</code>” for the <em>ident</em> <code>foo</code>, so <em>derived-declarator-type-list</em> is “pointer to”. (There is no overt explanation of <em>derived-declarator-type-list</em> in the standard, but 6.7.8 3, discussing <code>typedef</code>, says it “is specified by the declarators of <strong>D</strong>.”)</p>
<p>Substituting these into the final clause of the first sentence tells us that <strong>T D1</strong> specifies the type for <code>foo</code> is “pointer to <code>const</code> pointer to <code>int</code>”. Fine so far.</p>
<p>But then the final sentence tells us that for each type qualifier in the list (which is <code>const</code>), <em>ident</em> is a so-qualified pointer. So it says <code>foo</code> is a <code>const</code> pointer.</p>
<p>But it is not; we commonly interpret <code>int * const * foo</code> to declare <code>foo</code> to be a non-<code>const</code> pointer to a <code>const</code> pointer to <code>int</code>.</p>
<p>Is this a mistake in the standard or is there another interpretation for the final sentence?</p>
","298225","","298225","","2021-12-04 00:52:08","2021-12-12 20:54:38","Is there a mistake in the C standard description of pointer declarators?","<c><language-lawyer>","3","3","3","","","CC BY-SA 4.0"
"23528","183691","2008-09-29 17:08:04","Daniel A. White","2022-10-30 01:23:45","https://dev.to/daniel","McCordsville, IN, USA","<p>I'm a Software Engineer in Indianapolis, Indiana who is <code>#SOreadytohelp</code>!</p>
<p>Member of the .NET Foundation.</p>
","28107","1926","21534","","","12046","61151278","1","61151900","","2020-04-11 02:13:09","","12","1290","<p>Is there a mechanism for the new c# 8 <code>using</code> statement to work without a local variable?</p>

<p>Given <code>ScopeSomething()</code> returns a <code>IDisposable</code> (or <code>null</code>)...</p>

<p>Previously:</p>

<pre><code>using (ScopeSomething())
{
    // ...
}
</code></pre>

<p>However in C# 8 with the using statement, it requires a variable name:</p>

<pre><code>using var _ = ScopeSomething();
</code></pre>

<p>The <code>_</code> here is not treated as a discard.</p>

<p>I would have expected this to have worked:</p>

<pre><code>using ScopeSomething();
</code></pre>
","23528","","","","","2020-04-11 04:28:26","using statement in C# 8 without a variable","<c#><idisposable><c#-8.0>","1","12","","","","CC BY-SA 4.0"
"2410359","131470","2013-05-22 16:03:50","chux - Reinstate Monica","2022-10-30 05:52:30","","USA","<p>Picture:<br />
f(x) = -(x<em>x</em>x +x + 1)<br />
(0,0) = center<br />
color(x,y) = arctan2(x, f(x))<br />
lum(x,y) = sin(hypot(x, f(x))/alpha)</p>
<p>See also
<a href=""https://meta.stackoverflow.com/questions/393046/who-or-what-is-monica-and-why-so-much-notice-from-se-users"">Who or what is Monica and why so much notice from SE users?</a>.</p>
","17241","22059","2114","https://i.stack.imgur.com/pIl9T.png?s=128&g=1","","2802349","66631288","1","66631298","","2021-03-15 01:32:58","","11","319","<p>Applying an <code>f</code> to a floating point constant does not seem to make a difference when assigning the constant to a <code>float</code>.</p>
<pre><code>int main(void) {
  float f;
  //  1 2345678901234567
  f = 3.1415926535897932;
  printf(&quot;%.6a  %.8f  pi 3.1415926535897932\n&quot;, f, f);
  f = 3.1415926535897932f;              // v
  printf(&quot;%.6a  %.8f  pi 3.1415926535897932f\n&quot;, f, f);
}
</code></pre>
<p>With or without the <code>f</code>, the value is the same</p>
<pre><code>// value       value          code 
0x1.921fb6p+1  3.14159274  pi 3.1415926535897932
0x1.921fb6p+1  3.14159274  pi 3.1415926535897932f
</code></pre>
<p>Why ever use <code>f</code>?</p>
","2410359","","2410359","","2021-04-25 12:28:23","2021-10-29 14:29:00","When does appending an 'f' change the value of a floating constant when assigned to a `float`?","<c><floating-point>","2","0","2","","","CC BY-SA 4.0"
"2877241","279611","2013-10-13 23:45:02","Vlad from Moscow","2022-10-29 12:09:21","http://cpp.forum24.ru/","Moscow, Russia","<p><strong>Unemployed.</strong><br />Do you need a programmer? Email me at vlad.moscow@mail.ru</p>
<hr />
I liked the IBM mainframe PL/X language. It is me who wrote CTRACE record filtering for the IBM mainframe NFS server using the OOP features of the language.
<hr />
***News:*** The defect of the C++ STL relative to class std::basic_string was rectified as I proposed. See [Defect of the C++ Standard relative to basic_string][1]
<p><em><strong>News:</strong></em> In the ACCU Overload #126 (April, 2015) there is published my article <strong>&quot;iterator_pair - A Simple and Useful Iterator Adapter&quot;</strong>. I hope it will be interesting for C++ programmers.<a href=""https://accu.org/journals/overload/23/126/overload126.pdf"" rel=""nofollow noreferrer"">See it here</a>  You may leave your comments to the article <a href=""http://cpp.forum24.ru/?1-10-0-00000000-000-0-0-1428232189"" rel=""nofollow noreferrer"">in this thread</a></p>
","22446","4931","2861","https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1","","3433601","59787879","1","59788538","","2020-01-17 12:59:47","","11","299","<p>Consider the following program.</p>

<pre><code>#include &lt;iostream&gt;

template &lt;typename T&gt;
void f( void ( *fn )( T ) )
{
    fn( 42 );
}

void g( int x )
{
    std::cout &lt;&lt; ""g( "" &lt;&lt; x &lt;&lt; "" );\n"";
}

int main()
{
    f( g );
}
</code></pre>

<p>The program compiles successfully and its output is</p>

<pre><code>g( 42 );
</code></pre>

<p>Now let's rename the non-template function <code>g</code> to <code>f</code>.</p>

<pre><code>#include &lt;iostream&gt;

template &lt;typename T&gt;
void f( void ( *fn )( T ) )
{
    fn( 42 );
}

void f( int x )
{
    std::cout &lt;&lt; ""f( "" &lt;&lt; x &lt;&lt; "" );\n""; 
}

int main()
{
    f( f );
}
</code></pre>

<p>Now the program is not compiled by gcc HEAD 10.0.0 20200 and clang HEAD 10.0.0 but compiled successfully by Visual C++ 2019.. </p>

<p>For example the compiler gcc issues the following set of messages.</p>

<pre><code>prog.cc: In function 'int main()':
prog.cc:22:10: error: no matching function for call to 'f(&lt;unresolved overloaded function type&gt;)'
   22 |     f( f );
      |          ^
prog.cc:4:6: note: candidate: 'template&lt;class T&gt; void f(void (*)(T))'
    4 | void f( void ( *fn )( T ) )
      |      ^
prog.cc:4:6: note:   template argument deduction/substitution failed:
prog.cc:22:10: note:   couldn't deduce template parameter 'T'
   22 |     f( f );
      |          ^
prog.cc:14:6: note: candidate: 'void f(int)'
   14 | void f( int x )
      |      ^
prog.cc:14:13: note:   no known conversion for argument 1 from '&lt;unresolved overloaded function type&gt;' to 'int'
   14 | void f( int x )
      |         ~~~~^
</code></pre>

<p>So a question arises: should the code be compiled and what is the reason that the code is not compiled by gcc and clang?</p>
","2877241","","5945883","","2020-01-17 13:26:23","2020-01-17 16:16:59","Template argument deduction for an argument of a function type","<c++><templates><language-lawyer><c++17><template-argument-deduction>","2","2","4","","","CC BY-SA 4.0"
"5133585","189020","2015-07-20 03:49:47","Sweeper","2022-10-29 20:14:55","http://sweeper777.github.io","UK","<p>I specialise in four programming languages: C#, Java, Kotlin and Swift.</p>
<p><a href=""https://stackrating.com/user/5133585"" rel=""nofollow noreferrer""><img src=""https://stackrating.com/badge/5133585"" /></a></p>
<p>I don't know what to say here, so let me show you some of my apps, as well as <a href=""https://sweepersblog.herokuapp.com"" rel=""nofollow noreferrer"">my blog</a>. Also you can <a href=""https://www.paypal.com/donate?hosted_button_id=5KGJ2BPJFV8JY"" rel=""nofollow noreferrer"">donate</a> to me if you'd like :D</p>
<p>iOS Apps:</p>
<ul>
<li><a href=""https://itunes.apple.com/us/app/pocket-cheque-helper/id1072718086?ls=1&amp;mt=8"" rel=""nofollow noreferrer"">Pocket Cheque Helper</a></li>
<li><a href=""https://itunes.apple.com/us/app/custimer/id1145514135?l=ja&amp;ls=1&amp;mt=8"" rel=""nofollow noreferrer"">CusTimer</a></li>
<li><a href=""https://itunes.apple.com/us/app/pushy-squares/id1296569593?l=ja&amp;ls=1&amp;mt=8"" rel=""nofollow noreferrer"">Pushy Squares</a></li>
<li><a href=""https://itunes.apple.com/us/app/math-toolbox-free/id1080062807?ls=1&amp;mt=8"" rel=""nofollow noreferrer"">Math Toolbox Free</a></li>
<li><a href=""https://itunes.apple.com/us/app/color-bible/id1099386875?ls=1&amp;mt=8"" rel=""nofollow noreferrer"">Color Bible</a></li>
<li><a href=""https://itunes.apple.com/us/app/ezdiary-my-diary/id1128083826?ls=1&amp;mt=8"" rel=""nofollow noreferrer"">EZDiary</a></li>
<li><a href=""https://itunes.apple.com/us/app/tzoney/id1273711937?l=ja&amp;ls=1&amp;mt=8"" rel=""nofollow noreferrer"">TZoney</a></li>
<li><a href=""https://itunes.apple.com/us/app/directional-snake/id1190418610?l=ja&amp;ls=1&amp;mt=8"" rel=""nofollow noreferrer"">Directional Snake</a></li>
<li><a href=""https://itunes.apple.com/us/app/longlatmap/id1159244120?l=ja&amp;ls=1&amp;mt=8"" rel=""nofollow noreferrer"">LongLatMap</a></li>
<li><a href=""https://itunes.apple.com/us/app/not-really-color-blind/id1173887147?l=ja&amp;ls=1&amp;mt=8"" rel=""nofollow noreferrer"">Not Really Color Blind?</a></li>
<li><a href=""https://apps.apple.com/us/app/%E5%9F%8E%E8%BF%B9%E5%8D%95/id1508727434"" rel=""nofollow noreferrer"">城迹单</a></li>
</ul>
","10881","6027","849","https://i.stack.imgur.com/dfqcw.png?s=128&g=1","","6651855","66075419","1","66107953","","2021-02-06 09:38:07","","11","189","<p>(This question is inspired by <a href=""https://stackoverflow.com/q/66037939/5133585"">this question</a>, which I incorrectly answered.)</p>
<p>This code does not compile:</p>
<pre><code>List&lt;? extends List&lt;Number&gt;&gt; list = new ArrayList&lt;&gt;();
List&lt;List&lt;Double&gt;&gt; anotherList = (List&lt;List&lt;Double&gt;&gt;) list;
</code></pre>
<p>Note that IntelliJ doesn't report any errors. It only fails to compile when I click &quot;Run&quot;.</p>
<p>I understand why this doesn't compile on a conceptual level. <code>list</code> is a list of &quot;something that extends <code>List&lt;Number&gt;</code>&quot;, and that &quot;something&quot; can never be <code>List&lt;Double&gt;</code>, because <code>List&lt;Double&gt;</code> is not a subtype of <code>List&lt;Number&gt;</code>, and because no type can implement both since they have the same erasure.</p>
<p>However, when I tried to follow the wording in the language specification to determine whether this cast is valid, I found that the language spec seems to say that this is a valid cast!</p>
<p>Here is my reasoning:</p>
<p>The cast fulfils all three requirements for there to be a Narrowing Reference Conversion from <code>S</code> (<code>List&lt;? extends List&lt;Number&gt;&gt;</code>) to <code>T</code> (<code>List&lt;List&lt;Double&gt;&gt;</code>).</p>
<blockquote>
<p><strong><a href=""https://docs.oracle.com/javase/specs/jls/se14/html/jls-5.html#jls-5.1.6.1"" rel=""nofollow noreferrer"">5.1.6.1</a>. Allowed Narrowing Reference Conversion</strong></p>
<p>A narrowing reference conversion exists from reference type S to
reference type T if all of the following are true:</p>
<ul>
<li><p>S is not a subtype of T</p>
</li>
<li><p>If there exists a parameterized type X that is a supertype of T, and a parameterized type Y that is a supertype of S, such that the
erasures of X and Y are the same, then X and Y are not provably
distinct (§4.5).</p>
</li>
<li><p>One of the following cases applies:</p>
<ul>
<li>S and T are interface types.</li>
<li>[...]</li>
</ul>
</li>
</ul>
</blockquote>
<p>The first and third points are trivially true. To show that the second point is true, we take <code>Collection&lt;List&lt;Double&gt;&gt;</code> to be a parameterised super type of <code>List&lt;List&lt;Double&gt;&gt;</code>, and <code>Collection&lt;? extends List&lt;Number&gt;&gt;</code> to be a parameterised super type of <code>List&lt;? extends List&lt;Number&gt;&gt;</code>. They both erase to the same type <code>Collection</code>. Now we need to show that <code>Collection&lt;? extends List&lt;Number&gt;&gt;</code> and <code>Collection&lt;List&lt;Double&gt;&gt;</code> are not <a href=""https://docs.oracle.com/javase/specs/jls/se14/html/jls-4.html#jls-4.5"" rel=""nofollow noreferrer"">provably distinct (§4.5)</a>. The same argument also works for <code>Iterable&lt;...&gt;</code>.</p>
<p><sub>Edit: I just realised that the supertypes of <code>List&lt;List&lt;Double&gt;&gt;</code> also include things like <code>List&lt;? extends List&lt;Double&gt;&gt;</code>, not just the superinterfaces of <code>List</code>. But I don't think that will invalidate this argument, as the point is that 1. out of <code>X</code> and <code>Y</code> there is at least one wildcard 2. the wildcard bounds/type arguments of <code>X</code> and <code>Y</code> are subtypes of each other.</sub></p>
<blockquote>
<p>Two parameterized types are provably distinct if either of the
following is true:</p>
<ul>
<li><p>They are parameterizations of distinct generic type declarations.</p>
</li>
<li><p>Any of their type arguments are provably distinct.</p>
</li>
</ul>
</blockquote>
<p>Clearly, since they both erase to the same type, the first condition can't be true. We only need to show that the second condition is false.</p>
<p>In <a href=""https://docs.oracle.com/javase/specs/jls/se14/html/jls-4.html#jls-4.5.1"" rel=""nofollow noreferrer"">§4.5.1</a>, the spec defines &quot;type arguments are provably distinct&quot;:</p>
<blockquote>
<p>Two type arguments are provably distinct if one of the following is
true:</p>
<ul>
<li>[...]</li>
<li>One type argument is a type variable or wildcard, with an upper bound (from capture conversion (§5.1.10), if necessary) of S; and the
other type argument T is not a type variable or wildcard; and neither
|S| &lt;: |T| nor |T| &lt;: |S| (§4.8, §4.10).</li>
</ul>
</blockquote>
<p>(The other (trivially false) conditions are not shown for brevity) Here, <code>S</code> is <code>List&lt;Number&gt;</code> and <code>T</code> is <code>List&lt;Double&gt;</code>. Both |S| &lt;: |T| and |T| &lt;: |S| holds, as |S| and |T| are the same type. Yes, the subtype relation is reflexive, because the super type relation is reflexive (it's defined as the reflexive and transitive closure on the <em>direct</em> supertype relation).</p>
<p>Therefore the type arguments of <code>Collection&lt;? extends List&lt;Number&gt;&gt;</code> and <code>Collection&lt;List&lt;Double&gt;&gt;</code> are not provably distinct, and so <code>List&lt;? extends List&lt;Number&gt;&gt;</code> and <code>List&lt;List&lt;Double&gt;&gt;</code> are not provably distinct, and so there is (or <em>should be</em>) a conversion from <code>List&lt;? extends List&lt;Number&gt;&gt;</code> to <code>List&lt;List&lt;Double&gt;&gt;</code>!</p>
<p>Where is the error in my reasoning? Is there some other part of the spec that I missed?</p>
","5133585","","5133585","","2021-02-07 13:24:32","2021-02-08 22:35:00","Which part of the JLS specifies that you can't cast from List<? extends List<Superclass>> to List<List<Subclass>>?","<java><language-lawyer>","1","4","5","","","CC BY-SA 4.0"
"298225","177184","2010-03-21 00:38:50","Eric Postpischil","2022-10-30 01:52:45","https://edp.org","","<p>Senior software engineer in Apple’s Vector and Numerics Group (retired).</p>
","15172","3452","6637","","","113187","59724711","1","59725362","","2020-01-13 21:53:06","","11","237","<p>Can <code>int (*)[]</code> be an incomplete type?</p>

<p>C 2018 6.2.5 1 says:</p>

<blockquote>
  <p>At various points within a translation unit an object type may be <em>incomplete</em> (lacking sufficient information to determine the size of objects of that type) or <em>complete</em> (having sufficient information).</p>
</blockquote>

<p>Thus it seems that if the size of a type is known, the type is complete. 6.2.6.1 28 specifies that certain types of pointers must have the same sizes (pointers to <code>void</code> and characters, pointers to compatible types, pointers to structures, and pointers to unions), but pointers to other types may vary.</p>

<p>In a C implementation where all pointers, or all pointers to arrays of <code>int</code>, have the same size, then the size of <code>int (*)[]</code> is known, so it would be complete. In an implementation that, say, uses different pointers for large arrays, the size would not be known, so it is incomplete.</p>

<p>As <a href=""https://stackoverflow.com/questions/59724078/a-pointer-to-array-of-forward-declared-structures-in-c/59724372?noredirect=1#comment105599413_59724372"">M.M points out</a>, a structure must not contain a member with incomplete type, except a final flexible array member, per a constraint in 6.7.2.1 3. This suggests that an implementation with one size of pointers must accept <code>struct { int (*p)[]; }</code> while an implementation that has different sizes for such arrays must diagnose a constraint violation. (This in turn means such a declaration is not part of strictly conforming C.)</p>
","298225","","3723423","","2020-01-13 22:58:47","2020-01-13 23:06:21","Can a pointer to an incomplete type be incomplete?","<c><pointers><language-lawyer><incomplete-type>","1","5","2","","","CC BY-SA 4.0"
"918959","126014","2011-08-30 04:12:50","Antti Haapala -- Слава Україні","2022-10-28 11:38:04","https://interjektio.fi","Oulu, Finland","<p>Preferred pronouns he/him/his/himself if you're wondering (or <a href=""http://www.montypython.net/scripts/petshop.php"" rel=""nofollow noreferrer"">'e/'im/'is/'imself</a>), or you can use singular &quot;they&quot;. Being a native speaker of Finno-Ugric language, which do not separate gender in pronouns, I am kind of deaf to the gendered pronouns anyway.</p>
<p>Master of Science in Industrial Engineering and Management who has worked in various software projects over a decade. Has worked as a software engineer for both multinational corporations and small private companies. A self-proclaimed guru, has gained a good understanding of various aspects and levels of software engineering, project management, SW product development and leadership tasks.</p>
<p>Nowadays I'm mostly involved in bootstrapping, designing, writing new information system products/projects - preferably in Python if I have a say; not shying away from data engineering either.</p>
<p>I've also worked with in operating system kernels and system-level simulations, social networking sites, MS-DOS games, multi-user games, GUIs, 3D sound, cryptocurrencies and smart contracts and a CAD for designing <a href=""https://en.wikipedia.org/wiki/Interlocking"" rel=""nofollow noreferrer"">railway signalling interlockings</a>.</p>
<p>Expert in <strong>Python</strong>, C, C++, Java, JS/ES/AS/TS, x86 assembler.</p>
<p>I've written Pascal, Basic, Perl5, PHP, LPC, Kotlin, Basics etc quite a lot too.</p>
<p>Scheme, CL, Ruby, Forth, Prolog, C#, Perl6, Erlang, Haskell, Objective-C, ARMv6 and 6502 assemblers: I've played with them but I've never done almost anything useful in these languages.</p>
<p>Where I am at home: Python. Linux. AWS.  Did I mention Python?</p>
","26054","5911","15773","https://i.stack.imgur.com/GvgaU.jpg","","556766","59859095","1","59866805","","2020-01-22 11:47:09","","11","798","<p>I've got several virtual environments (dozens) lying on my disk made by the <code>venv</code> module of Python 3.6. Now I've upgraded to Ubuntu 19.10 in a haste and only afterwards noticed that 3.6 is not available at all for Ubuntu 19.10 from the generally acknowledged sources. I've managed to upgrade the <em>Python versions</em> of these virtual environments by locating <code>bin/python3</code> under my home directory and running <code>python3.7 -mvenv --upgrade</code> on the containing folders. </p>

<p>Now, while <code>python3.7 -mvenv --upgrade</code> upgrades the Python in the virtual environment, it does nothing to reinstall my previous package versions in the <code>lib/python3.7/site-packages</code> under that <code>venv</code>. I guess I could have done this by installing Python 3.6, <code>pip freeze</code>ing the requirements from the <code>venv</code> and then upgrading the venv to Python 3.7, <code>pip install -r</code>ing - <em>if only</em> there was Python 3.6 install available for my new OS.</p>

<p>Is there any other way to do this in a rather automated fashion (perhaps mainly the <code>pip freeze</code> using the old <code>lib/python3.6</code> directory) without me having to install Python 3.6 from source, using conda or installing 3.6 from some random PPAs? I want to upgrade all environments en masse so that in the future when I need to do something with a random environment it would continue working with Python 3.7.</p>
","918959","","","","","2020-02-07 00:24:11","Reinstall packages automatically into virtual environment after Python major version upgrade","<python><python-3.x><python-venv>","1","0","1","","","CC BY-SA 4.0"
"115145","967227","2009-05-31 16:20:08","CommonsWare","2022-10-29 23:14:28","https://commonsware.com","Pennsylvania, United States","<p>Mark Murphy, founder of CommonsWare, writes a lot.</p>
<h2>Books</h2>
<p>From 2008 through 2021, Mark wrote a series of books on Android app development. These books are now available for free download from <a href=""https://commonsware.com/catalog"" rel=""nofollow noreferrer"">the CommonsWare site</a>.</p>
<p>His most recent books have been focused on second-generation Android app development (Kotlin and the Android Jetpack):</p>
<ul>
<li><p><a href=""https://commonsware.com/Jetpack"" rel=""nofollow noreferrer""><em>Elements of Android Jetpack</em></a>, a new introductory book on Android app development, focused on second-generation techniques.</p>
</li>
<li><p><a href=""https://commonsware.com/AndExplore"" rel=""nofollow noreferrer""><em>Exploring Android</em></a>, a series of step-by-step tutorials for building an Android app from scratch. This book demonstrates app development using Kotlin, coroutines, and the Jetpack libraries.</p>
</li>
<li><p><a href=""https://commonsware.com/Room"" rel=""nofollow noreferrer""><em>Elements of Android Room</em></a>, to help you incorporate Google's reactive object wrapper around SQLite.</p>
</li>
<li><p><a href=""https://commonsware.com/R"" rel=""nofollow noreferrer""><em>Elements of Android R</em></a>, to help you deal with the changes introduced by Android 11 (code-named &quot;R&quot;). It covers everything from scoped storage changes to data access auditing to sharing UIs between apps to bubbles.</p>
</li>
<li><p><a href=""https://commonsware.com/Kotlin"" rel=""nofollow noreferrer""><em>Elements of Kotlin</em></a>, a guide to the Kotlin programming language, which is rapidly gaining in popularity for Android app development.</p>
</li>
<li><p><a href=""https://commonsware.com/Coroutines"" rel=""nofollow noreferrer""><em>Elements of Kotlin Coroutines</em></a>, exploring Kotlin's new
first-class reactive programming system.</p>
</li>
</ul>
<p>In the beginning, Android development was focused on Java and, partially, on the Android Support Library. Mark's earliest books share that focus:</p>
<ul>
<li><p><a href=""https://commonsware.com/Android"" rel=""nofollow noreferrer""><em>The Busy Coder's Guide to Android Development</em></a>, the first and largest book on Android app programming</p>
</li>
<li><p><a href=""https://commonsware.com/AndroidArch"" rel=""nofollow noreferrer""><em>Android's Architecture Components</em></a></p>
</li>
<li><p><a href=""https://commonsware.com/GraphQL"" rel=""nofollow noreferrer""><em>GraphQL and Android</em></a></p>
</li>
</ul>
<h2>Things Other Than Books</h2>
<p>He runs the <a href=""https://jetc.dev"" rel=""nofollow noreferrer""><code>jetc.dev</code></a> weekly newsletter for Jetpack Compose.</p>
<p>Heck, he even has <a href=""http://commonsware.com/blog"" rel=""nofollow noreferrer"">a blog</a>.</p>
<p>All code in Stack Overflow questions, answers, or comments written by Mark Murphy are hereby licensed under <a href=""http://www.apache.org/licenses/LICENSE-2.0"" rel=""nofollow noreferrer"">the Apache Software License 2.0</a>, unless otherwise noted where that code appears on Stack Overflow.</p>
","269231","13193","7886","https://i.stack.imgur.com/wDnd8.png?s=128&g=1","","39846","63237657","1","63298314","","2020-08-03 22:16:55","","11","1913","<p>In Milena Nikolic's <a href=""https://www.youtube.com/watch?v=cMr-b660Esw"" rel=""noreferrer"">&quot;What's New in Google Play&quot;</a>
presentation as part of Google's <code>#android11</code> launch, she said:</p>
<blockquote>
<p>As we continue to improve the App Bundle, we expect it to become a requirement for all new apps sometime in 2021.</p>
</blockquote>
<p>Everything I have seen in the documentation suggests that the only way to work with App Bundles in the Play Store is to use their Play App Signing service, such as:</p>
<blockquote>
<p>Enroll into app Play App Signing. Otherwise, you can't upload your app bundle to the Play Console.</p>
</blockquote>
<p>(from <a href=""https://developer.android.com/guide/app-bundle"" rel=""noreferrer"">https://developer.android.com/guide/app-bundle</a>)</p>
<blockquote>
<p>If you build and upload an Android App Bundle, you must enroll in app Play App Signing.</p>
</blockquote>
<p>(from <a href=""https://developer.android.com/studio/publish/upload-bundle"" rel=""noreferrer"">https://developer.android.com/studio/publish/upload-bundle</a>)</p>
<blockquote>
<p>And, because app bundles defer building and signing APKs to the Google Play Store, you need to opt in to Play App Signing before you upload your app bundle.</p>
</blockquote>
<p>(from <a href=""https://developer.android.com/studio/publish/app-signing"" rel=""noreferrer"">https://developer.android.com/studio/publish/app-signing</a>)</p>
<p>But, Google's documentation has many gaps.</p>
<p>So, is there an option that I'm missing, whereby I can distribute an app via an App Bundle <em>without</em> using Play App Signing? For example, perhaps I could use <code>bundletool</code> to build the individual APK bits, sign them locally, then upload those results.</p>
","115145","","","","","2020-08-07 08:42:24","How Can I Ship an App Bundle Without Giving Google Signing Authority?","<android><google-play>","2","2","4","","","CC BY-SA 4.0"
"878126","114239","2011-08-04 08:05:33","android developer","2022-10-29 09:41:55","","Israel","<p>Really like to develop Android apps &amp; libraries on my spare time.</p>

<p>Github website:
<a href=""https://github.com/AndroidDeveloperLB/"" rel=""nofollow noreferrer"">https://github.com/AndroidDeveloperLB/</a> </p>

<p>My spare time apps:
<a href=""https://play.google.com/store/apps/developer?id=AndroidDeveloperLB"" rel=""nofollow noreferrer"">https://play.google.com/store/apps/developer?id=AndroidDeveloperLB</a></p>
","54765","1073","47","https://i.stack.imgur.com/D5dZW.jpg","","796053","60565299","1","","","2020-03-06 13:41:48","","10","1066","<h2>Background</h2>

<p>I wanted to get information about APK files(including split APK files), even if they are inside compressed zip files (without de-compressing them). In my case, this include various things, such as package name, version-code, version-name, app-label, app-icon, and if it's a split APK file or not.</p>

<p>Do note that I want to do it all inside an Android app, not using a PC, so some tools might not be possible to be used.</p>

<h2>The problem</h2>

<p>This means I can't use the <a href=""https://developer.android.com/reference/android/content/pm/PackageManager#getPackageArchiveInfo(java.lang.String,%20int)"" rel=""noreferrer""><strong>getPackageArchiveInfo</strong></a> function, as this function requires a path to the APK file, and works only on non-split-apk files.</p>

<p>In short, there is no framework function to do it, so I have to find a way of how to do it by going into the zipped file, using the InputStream as input for parsing it in a function.</p>

<p>There are various solutions online, including outside of Android, but I don't know of one that is stable and works for all cases. Many might be good even for Android (example <a href=""https://github.com/hsiafan/apk-parser"" rel=""noreferrer""><strong>here</strong></a>), but might fail parsing and might require a file path instead of Uri/InputStream.</p>

<h2>What I've found&amp;tried</h2>

<p>I've found <a href=""https://stackoverflow.com/a/57073201/878126""><strong>this</strong></a> on StackOverflow, but sadly according to my tests, it always generates content, but in some rare cases it's not a valid XML content.</p>

<p>So far, I've found these apps package names and their version codes that the parser fails to parse, as the output XML content is invalid:</p>

<ol>
<li><a href=""https://play.google.com/store/apps/details?id=com.farproc.wifi.analyzer&amp;hl=en"" rel=""noreferrer""><strong>com.farproc.wifi.analyzer</strong></a> 139</li>
<li><a href=""https://www.apkmirror.com/apk/teslacoil-software/nova-google-companion/nova-google-companion-1-1-release/nova-google-companion-1-1-android-apk-download/"" rel=""noreferrer""><strong>com.teslacoilsw.launcherclientproxy</strong></a> 2</li>
<li><a href=""https://play.google.com/store/apps/details?id=com.hotornot.app&amp;hl=en"" rel=""noreferrer""><strong>com.hotornot.app</strong></a> 3072</li>
<li>android 29 (that's the ""Android System"" system app itself)</li>
<li><a href=""https://play.google.com/store/apps/details?id=com.google.android.videos&amp;hl=en"" rel=""noreferrer""><strong>com.google.android.videos</strong></a> 41300042</li>
<li><a href=""https://play.google.com/store/apps/details?id=com.facebook.katana&amp;hl=en"" rel=""noreferrer""><strong>com.facebook.katana</strong></a> 201518851</li>
<li><a href=""https://play.google.com/store/apps/details?id=com.keramidas.TitaniumBackupPro&amp;hl=en"" rel=""noreferrer""><strong>com.keramidas.TitaniumBackupPro</strong></a> 10</li>
<li><a href=""https://play.google.com/store/apps/details?id=com.google.android.apps.tachyon&amp;hl=en"" rel=""noreferrer""><strong>com.google.android.apps.tachyon</strong></a> 2985033</li>
<li><a href=""https://play.google.com/store/apps/details?id=com.google.android.apps.photos&amp;hl=en"" rel=""noreferrer""><strong>com.google.android.apps.photos</strong></a> 3594753</li>
</ol>

<p>Using an <a href=""https://codebeautify.org/xmlviewer"" rel=""noreferrer""><strong>XML viewer</strong></a> and <a href=""https://play.google.com/store/apps/details?id=com.farproc.wifi.analyzer&amp;hl=en"" rel=""noreferrer""><strong>XML validator</strong></a>, here are the issues with these apps:</p>

<ul>
<li>For #1,#2, I got a very weird content, starting with <code>&lt;mnfs</code> .</li>
<li>For #3, it doesn't like the ""&amp;"" in <code>&lt;activity theme=""resourceID 0x7f13000b"" label=""Features &amp; Tests"" ...</code></li>
<li>For #4, it missed the end tag of ""manifest"" in the end.</li>
<li>For #5, it missed multiple end tags, at least of ""intent-filter"",""receiver"" and ""manifest"". Maybe more.</li>
<li>For #6, it got ""allowBackup"" attribute twice in the ""application"" tag for some reason.</li>
<li>For #7, it got a value without attribute in the manifest tag: <code>&lt;manifest versionCode=""resourceID 0xa"" =""1.3.2""</code>.</li>
<li>For #8, it missed a lot of content after getting some ""uses-feature"" tags, and didn't have an ending tag for ""manifest"".</li>
<li>For #9, it missed a lot of content after getting some ""uses-permission"" tags, and didn't have an ending tag for ""manifest""</li>
</ul>

<p>Surprisingly, I didn't find any issue with split APK files. Only with main APK files.</p>

<p>Here's the code (also available <a href=""https://github.com/AndroidDeveloperLB/ApkManifestFetcher"" rel=""noreferrer""><strong>here</strong></a>) :</p>

<p><strong>MainActivity .kt</strong></p>

<pre><code>class MainActivity : AppCompatActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        thread {
            val problematicApkFiles = HashMap&lt;ApplicationInfo, HashSet&lt;String&gt;&gt;()
            val installedApplications = packageManager.getInstalledPackages(0)
            val startTime = System.currentTimeMillis()
            for ((index, packageInfo) in installedApplications.withIndex()) {
                val applicationInfo = packageInfo.applicationInfo
                val packageName = packageInfo.packageName
//                Log.d(""AppLog"", ""$index/${installedApplications.size} parsing app $packageName ${packageInfo.versionCode}..."")
                val mainApkFilePath = applicationInfo.publicSourceDir
                val parsedManifestOfMainApkFile =
                        try {
                            val parsedManifest = ManifestParser.parse(mainApkFilePath)
                            if (parsedManifest?.isSplitApk != false)
                                Log.e(""AppLog"", ""$packageName - parsed normal APK, but failed to identify it as such"")
                            parsedManifest?.manifestAttributes
                        } catch (e: Exception) {
                            Log.e(""AppLog"", e.toString())
                            null
                        }
                if (parsedManifestOfMainApkFile == null) {
                    problematicApkFiles.getOrPut(applicationInfo, { HashSet() }).add(mainApkFilePath)
                    Log.e(""AppLog"", ""$packageName - failed to parse main APK file $mainApkFilePath"")
                }
                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP)
                    applicationInfo.splitPublicSourceDirs?.forEach {
                        val parsedManifestOfSplitApkFile =
                                try {
                                    val parsedManifest = ManifestParser.parse(it)
                                    if (parsedManifest?.isSplitApk != true)
                                        Log.e(""AppLog"", ""$packageName - parsed split APK, but failed to identify it as such"")
                                    parsedManifest?.manifestAttributes
                                } catch (e: Exception) {
                                    Log.e(""AppLog"", e.toString())
                                    null
                                }
                        if (parsedManifestOfSplitApkFile == null) {
                            Log.e(""AppLog"", ""$packageName - failed to parse main APK file $it"")
                            problematicApkFiles.getOrPut(applicationInfo, { HashSet() }).add(it)
                        }
                    }
            }
            val endTime = System.currentTimeMillis()
            Log.d(""AppLog"", ""done parsing. number of files we failed to parse:${problematicApkFiles.size} time taken:${endTime - startTime} ms"")
            if (problematicApkFiles.isNotEmpty()) {
                Log.d(""AppLog"", ""list of files that we failed to get their manifest:"")
                for (entry in problematicApkFiles) {
                    Log.d(""AppLog"", ""packageName:${entry.key.packageName} , files:${entry.value}"")
                }
            }
        }
    }
}
</code></pre>

<p><strong>ManifestParser.kt</strong></p>

<pre><code>class ManifestParser{
    var isSplitApk: Boolean? = null
    var manifestAttributes: HashMap&lt;String, String&gt;? = null

    companion object {
        fun parse(file: File) = parse(java.io.FileInputStream(file))
        fun parse(filePath: String) = parse(File(filePath))
        fun parse(inputStream: InputStream): ManifestParser? {
            val result = ManifestParser()
            val manifestXmlString = ApkManifestFetcher.getManifestXmlFromInputStream(inputStream)
                    ?: return null
            val factory: DocumentBuilderFactory = DocumentBuilderFactory.newInstance()
            val builder: DocumentBuilder = factory.newDocumentBuilder()
            val document: Document? = builder.parse(manifestXmlString.byteInputStream())
            if (document != null) {
                document.documentElement.normalize()
                val manifestNode: Node? = document.getElementsByTagName(""manifest"")?.item(0)
                if (manifestNode != null) {
                    val manifestAttributes = HashMap&lt;String, String&gt;()
                    for (i in 0 until manifestNode.attributes.length) {
                        val node = manifestNode.attributes.item(i)
                        manifestAttributes[node.nodeName] = node.nodeValue
                    }
                    result.manifestAttributes = manifestAttributes
                }
            }
            result.manifestAttributes?.let {
                result.isSplitApk = (it[""android:isFeatureSplit""]?.toBoolean()
                        ?: false) || (it.containsKey(""split""))
            }
            return result
        }

    }
}
</code></pre>

<p><strong>ApkManifestFetcher.kt</strong></p>

<pre><code>object ApkManifestFetcher {
    fun getManifestXmlFromFile(apkFile: File) = getManifestXmlFromInputStream(FileInputStream(apkFile))
    fun getManifestXmlFromFilePath(apkFilePath: String) = getManifestXmlFromInputStream(FileInputStream(File(apkFilePath)))
    fun getManifestXmlFromInputStream(ApkInputStream: InputStream): String? {
        ZipInputStream(ApkInputStream).use { zipInputStream: ZipInputStream -&gt;
            while (true) {
                val entry = zipInputStream.nextEntry ?: break
                if (entry.name == ""AndroidManifest.xml"") {
//                    zip.getInputStream(entry).use { input -&gt;
                    return decompressXML(zipInputStream.readBytes())
//                    }
                }
            }
        }
        return null
    }

    /**
     * Binary XML doc ending Tag
     */
    private var endDocTag = 0x00100101

    /**
     * Binary XML start Tag
     */
    private var startTag = 0x00100102

    /**
     * Binary XML end Tag
     */
    private var endTag = 0x00100103


    /**
     * Reference var for spacing
     * Used in prtIndent()
     */
    private var spaces = ""                                             ""

    /**
     * Parse the 'compressed' binary form of Android XML docs
     * such as for AndroidManifest.xml in .apk files
     * Source: http://stackoverflow.com/questions/2097813/how-to-parse-the-androidmanifest-xml-file-inside-an-apk-package/4761689#4761689
     *
     * @param xml Encoded XML content to decompress
     */
    private fun decompressXML(xml: ByteArray): String {

        val resultXml = StringBuilder()

        // Compressed XML file/bytes starts with 24x bytes of data,
        // 9 32 bit words in little endian order (LSB first):
        //   0th word is 03 00 08 00
        //   3rd word SEEMS TO BE:  Offset at then of StringTable
        //   4th word is: Number of strings in string table
        // WARNING: Sometime I indiscriminently display or refer to word in
        //   little endian storage format, or in integer format (ie MSB first).
        val numbStrings = lew(xml, 4 * 4)

        // StringIndexTable starts at offset 24x, an array of 32 bit LE offsets
        // of the length/string data in the StringTable.
        val sitOff = 0x24  // Offset of start of StringIndexTable

        // StringTable, each string is represented with a 16 bit little endian
        // character count, followed by that number of 16 bit (LE) (Unicode) chars.
        val stOff = sitOff + numbStrings * 4  // StringTable follows StrIndexTable

        // XMLTags, The XML tag tree starts after some unknown content after the
        // StringTable.  There is some unknown data after the StringTable, scan
        // forward from this point to the flag for the start of an XML start tag.
        var xmlTagOff = lew(xml, 3 * 4)  // Start from the offset in the 3rd word.
        // Scan forward until we find the bytes: 0x02011000(x00100102 in normal int)
        run {
            var ii = xmlTagOff
            while (ii &lt; xml.size - 4) {
                if (lew(xml, ii) == startTag) {
                    xmlTagOff = ii
                    break
                }
                ii += 4
            }
        } // end of hack, scanning for start of first start tag

        // XML tags and attributes:
        // Every XML start and end tag consists of 6 32 bit words:
        //   0th word: 02011000 for startTag and 03011000 for endTag
        //   1st word: a flag?, like 38000000
        //   2nd word: Line of where this tag appeared in the original source file
        //   3rd word: FFFFFFFF ??
        //   4th word: StringIndex of NameSpace name, or FFFFFFFF for default NS
        //   5th word: StringIndex of Element Name
        //   (Note: 01011000 in 0th word means end of XML document, endDocTag)

        // Start tags (not end tags) contain 3 more words:
        //   6th word: 14001400 meaning??
        //   7th word: Number of Attributes that follow this tag(follow word 8th)
        //   8th word: 00000000 meaning??

        // Attributes consist of 5 words:
        //   0th word: StringIndex of Attribute Name's Namespace, or FFFFFFFF
        //   1st word: StringIndex of Attribute Name
        //   2nd word: StringIndex of Attribute Value, or FFFFFFF if ResourceId used
        //   3rd word: Flags?
        //   4th word: str ind of attr value again, or ResourceId of value

        // TMP, dump string table to tr for debugging
        //tr.addSelect(""strings"", null);
        //for (int ii=0; ii&lt;numbStrings; ii++) {
        //  // Length of string starts at StringTable plus offset in StrIndTable
        //  String str = compXmlString(xml, sitOff, stOff, ii);
        //  tr.add(String.valueOf(ii), str);
        //}
        //tr.parent();

        // Step through the XML tree element tags and attributes
        var off = xmlTagOff
        var indent = 0
//        var startTagLineNo = -2
        while (off &lt; xml.size) {
            val tag0 = lew(xml, off)
            //int tag1 = LEW(xml, off+1*4);
//            val lineNo = lew(xml, off + 2 * 4)
            //int tag3 = LEW(xml, off+3*4);
//            val nameNsSi = lew(xml, off + 4 * 4)
            val nameSi = lew(xml, off + 5 * 4)

            if (tag0 == startTag) { // XML START TAG
//                val tag6 = lew(xml, off + 6 * 4)  // Expected to be 14001400
                val numbAttrs = lew(xml, off + 7 * 4)  // Number of Attributes to follow
                //int tag8 = LEW(xml, off+8*4);  // Expected to be 00000000
                off += 9 * 4  // Skip over 6+3 words of startTag data
                val name = compXmlString(xml, sitOff, stOff, nameSi)
                //tr.addSelect(name, null);
//                startTagLineNo = lineNo

                // Look for the Attributes
                val sb = StringBuffer()
                for (ii in 0 until numbAttrs) {
//                    val attrNameNsSi = lew(xml, off)  // AttrName Namespace Str Ind, or FFFFFFFF
                    val attrNameSi = lew(xml, off + 1 * 4)  // AttrName String Index
                    val attrValueSi = lew(xml, off + 2 * 4) // AttrValue Str Ind, or FFFFFFFF
//                    val attrFlags = lew(xml, off + 3 * 4)
                    val attrResId = lew(xml, off + 4 * 4)  // AttrValue ResourceId or dup AttrValue StrInd
                    off += 5 * 4  // Skip over the 5 words of an attribute

                    val attrName = compXmlString(xml, sitOff, stOff, attrNameSi)
                    val attrValue = if (attrValueSi != -1)
                        compXmlString(xml, sitOff, stOff, attrValueSi)
                    else
                        ""resourceID 0x"" + Integer.toHexString(attrResId)
                    sb.append("" $attrName=\""$attrValue\"""")
                    //tr.add(attrName, attrValue);
                }
                resultXml.append(prtIndent(indent, ""&lt;$name$sb&gt;""))
                indent++

            } else if (tag0 == endTag) { // XML END TAG
                indent--
                off += 6 * 4  // Skip over 6 words of endTag data
                val name = compXmlString(xml, sitOff, stOff, nameSi)
                resultXml.append(prtIndent(indent, ""&lt;/$name&gt;"")) //  (line $startTagLineNo-$lineNo)
                //tr.parent();  // Step back up the NobTree

            } else if (tag0 == endDocTag) {  // END OF XML DOC TAG
                break

            } else {
//                println(""  Unrecognized tag code '"" + Integer.toHexString(tag0)
//                        + ""' at offset "" + off
//                )
                break
            }
        } // end of while loop scanning tags and attributes of XML tree
//        println(""    end at offset $off"")

        return resultXml.toString()
    } // end of decompressXML


    /**
     * Tool Method for decompressXML();
     * Compute binary XML to its string format
     * Source: Source: http://stackoverflow.com/questions/2097813/how-to-parse-the-androidmanifest-xml-file-inside-an-apk-package/4761689#4761689
     *
     * @param xml Binary-formatted XML
     * @param sitOff
     * @param stOff
     * @param strInd
     * @return String-formatted XML
     */
    private fun compXmlString(xml: ByteArray, @Suppress(""SameParameterValue"") sitOff: Int, stOff: Int, strInd: Int): String? {
        if (strInd &lt; 0) return null
        val strOff = stOff + lew(xml, sitOff + strInd * 4)
        return compXmlStringAt(xml, strOff)
    }


    /**
     * Tool Method for decompressXML();
     * Apply indentation
     *
     * @param indent Indentation level
     * @param str String to indent
     * @return Indented string
     */
    private fun prtIndent(indent: Int, str: String): String {

        return spaces.substring(0, min(indent * 2, spaces.length)) + str
    }


    /**
     * Tool method for decompressXML()
     * Return the string stored in StringTable format at
     * offset strOff.  This offset points to the 16 bit string length, which
     * is followed by that number of 16 bit (Unicode) chars.
     *
     * @param arr StringTable array
     * @param strOff Offset to get string from
     * @return String from StringTable at offset strOff
     */
    private fun compXmlStringAt(arr: ByteArray, strOff: Int): String {
        val strLen = (arr[strOff + 1] shl (8 and 0xff00)) or (arr[strOff].toInt() and 0xff)
        val chars = ByteArray(strLen)
        for (ii in 0 until strLen) {
            chars[ii] = arr[strOff + 2 + ii * 2]
        }
        return String(chars)  // Hack, just use 8 byte chars
    } // end of compXmlStringAt


    /**
     * Return value of a Little Endian 32 bit word from the byte array
     * at offset off.
     *
     * @param arr Byte array with 32 bit word
     * @param off Offset to get word from
     * @return Value of Little Endian 32 bit word specified
     */
    private fun lew(arr: ByteArray, off: Int): Int {
        return (arr[off + 3] shl 24 and -0x1000000 or ((arr[off + 2] shl 16) and 0xff0000)
                or (arr[off + 1] shl 8 and 0xff00) or (arr[off].toInt() and 0xFF))
    } // end of LEW

    private infix fun Byte.shl(i: Int): Int = (this.toInt() shl i)
//    private infix fun Int.shl(i: Int): Int = (this shl i)
}

</code></pre>

<h2>The questions</h2>

<ol>
<li>How come I get an invalid XML content for some APK manifest files (hence getting the XML parsing fail for them) ?</li>
<li>How can I get it to work, always?</li>
<li>Is there a better way to parse the manifest file into a valid XML ? Maybe a better alternative, that could work with all kinds of APK files, including inside zipped files, without decompressing them?</li>
</ol>
","878126","","878126","","2020-03-14 22:44:07","2020-03-28 10:53:40","How to get a reliable&valid manifest content of APK file, even using InputStream?","<android><xml><parsing><apk><android-manifest>","2","16","1","","","CC BY-SA 4.0"
"878126","114239","2011-08-04 08:05:33","android developer","2022-10-29 09:41:55","","Israel","<p>Really like to develop Android apps &amp; libraries on my spare time.</p>

<p>Github website:
<a href=""https://github.com/AndroidDeveloperLB/"" rel=""nofollow noreferrer"">https://github.com/AndroidDeveloperLB/</a> </p>

<p>My spare time apps:
<a href=""https://play.google.com/store/apps/developer?id=AndroidDeveloperLB"" rel=""nofollow noreferrer"">https://play.google.com/store/apps/developer?id=AndroidDeveloperLB</a></p>
","54765","1073","47","https://i.stack.imgur.com/D5dZW.jpg","","796053","67267094","1","","","2021-04-26 12:58:13","","10","887","<h2>Background</h2>
<p>After a lot of researching and trying out, and also asking for help, I've succeeded publishing a private Github repository using maven on Jitpack (written <a href=""https://stackoverflow.com/a/67071394/878126""><strong>here</strong></a>).</p>
<p>So, currently the files that I put on the repository for Jitpack are just these:</p>
<ul>
<li>jitpack.yml - tells which files to use</li>
<li>library-release.aar - the (obfuscated) code itself</li>
<li>pom-default.xml - the dependencies and some other configurations.</li>
</ul>
<h2>The problem</h2>
<p>While dependencies issues and the AAR file itself are fine and I can use the library, I've noticed I can't find a way to offer what I wrote there as KDoc (like JavaDocs, but for Kotlin) to whoever uses it.</p>
<h2>What I've tried</h2>
<p>Besides the various gradle tasks, I've also tried the simple operation of Android Studio itself to produce it. Since there is no mention of KDoc, I used <code>Tools</code>-&gt;<code>Generate JavaDocs</code> instead.</p>
<p>Sadly, it told me there are none, and indeed it was reported <a href=""https://youtrack.jetbrains.com/issue/KTIJ-4679"" rel=""noreferrer""><strong>here</strong></a>.</p>
<p>But even if it did succeed, I wouldn't have known how to publish it together with the rest of the files.</p>
<h2>The question</h2>
<p>I hope it's possible, but how can I generate&amp;public KDoc using maven on Jitpack?</p>
","878126","","","","","2022-08-11 00:24:28","How do you publish KDoc for a Kotlin library using maven on Jitpack?","<android><maven><kotlin><jitpack><kdoc>","2","0","5","","","CC BY-SA 4.0"
"335858","704068","2010-05-07 21:54:10","Sergey Kalinichenko","2022-10-30 01:42:35","http://stackoverflow.com/users/335858/dasblinkenlight","United States","<p>Full-stack software architect with 25+ years of diverse experience in bridging the gap between complex business requirements and innovative software solutions.</p>
","72544","33240","3145","","","134022","60286204","1","60436565","","2020-02-18 17:15:33","","10","4254","<p>I host a small web site at an external host provider. When I open it from my iPhone, I get different results depending on how my iPhone is connected to the internet:</p>

<ul>
<li>When connection is made through WiFi, my page always opens and runs as expected</li>
<li>When connection is made through Cellular, my page always produces the following error message:</li>
</ul>

<p>On mobile Safari:</p>

<blockquote>
  <p>Safari cannot open the page because too many redirects occurred.</p>
</blockquote>

<p>On mobile Chrome:</p>

<blockquote>
  <p>This page isn't working / redirected you too many times.</p>
</blockquote>

<p>On mobile Opera:</p>

<blockquote>
  <p>This site can't be reached / too many HTTP redirects.</p>
</blockquote>

<p>As far as I can tell, the only difference that decides the outcome is the internet connection type - WiFi vs. Cellular. I cannot find any other differences.</p>

<p>Since the site works fine through WiFi network, I ruled out a redirect loop on my site (that is the most commonly mentioned cause of ""too many redirects"" error). I also tried turning off cross-site tracking prevention, but the results remained the same. Am I missing something? What could be the cause of this strange behavior?</p>

<p>In case it is relevant, here are a few things about the web site itself:</p>

<ul>
<li>Web site is developed with ASP.NET Core</li>
<li>I access site using https in both cases (via WiFi and via Cellular)</li>
<li>Site is on a subdomain, which uses a wildcard certificate from the ""top"" domain</li>
<li>Site uses ASP.NET Core ""scaffold-ed"" authentication, which uses redirects and cookies, and has ""remember me"" functionality.</li>
</ul>
","335858","","335858","","2020-02-19 17:47:38","2020-02-28 12:05:32","The same site produces ""too many redirects"" only via cellular, not via WiFi","<ios><mobile><mobile-safari><mobile-chrome>","5","6","2","","","CC BY-SA 4.0"
"477037","105486","2010-10-15 15:06:40","Stefan","2022-10-28 08:24:35","http://stefanschuessler.de/","Bremen, Germany","<p>Ruby developer from Bremen. If you're feeling generous, you can <a href=""https://ko-fi.com/sos4nt"" rel=""nofollow noreferrer"">buy me a coffee</a> ☕️</p>
","7076","5136","227","","","658903","62738704","1","62856104","","2020-07-05 08:54:28","","10","816","<p>Since a proc is an object, can I create a proc in the scope of its own instance?</p>
<p>For example:</p>
<pre><code>prc = Proc.new do
  foo
end

def prc.foo
  123
end

prc.call
# NameError: undefined local variable or method `foo' for main:Object
</code></pre>
<p>Either by changing <code>self</code> or by having an explicit <code>receiver</code> referring to the proc.</p>
<p>That receiver has to be evaluated dynamically, e.g. the following should work:</p>
<pre><code>other_prc = prc.clone

def other_prc.foo
  456
end

other_prc.call
#=&gt; 456  &lt;- not 123
</code></pre>
<p>Which means that I cannot just &quot;hard-code&quot; it via:</p>
<pre><code>prc = Proc.new do
  prc.foo
end
</code></pre>
<p>In other words: is there any way to refer to the procs instance from within the proc?</p>
<hr />
<p>Another example without <code>foo</code>: (what to put for <code># ???</code>)</p>
<pre><code>prc = Proc.new do
  # ???
end

prc == prc.call #=&gt; true

other_prc = prc.clone
other_prc == other_prc.call #=&gt; true
</code></pre>
<p>Replacing <code># ???</code> with <code>prc</code> would only satisfy <code>prc == prc.call</code> but not <code>other_prc == other_prc.call</code>. (because <code>other_prc.call</code> would still return <code>prc</code>)</p>
","477037","","477037","","2020-07-06 17:37:13","2020-07-21 19:28:40","Can I create a proc in the context of itself?","<ruby><closures><proc>","5","6","1","","","CC BY-SA 4.0"
"5133585","189020","2015-07-20 03:49:47","Sweeper","2022-10-29 20:14:55","http://sweeper777.github.io","UK","<p>I specialise in four programming languages: C#, Java, Kotlin and Swift.</p>
<p><a href=""https://stackrating.com/user/5133585"" rel=""nofollow noreferrer""><img src=""https://stackrating.com/badge/5133585"" /></a></p>
<p>I don't know what to say here, so let me show you some of my apps, as well as <a href=""https://sweepersblog.herokuapp.com"" rel=""nofollow noreferrer"">my blog</a>. Also you can <a href=""https://www.paypal.com/donate?hosted_button_id=5KGJ2BPJFV8JY"" rel=""nofollow noreferrer"">donate</a> to me if you'd like :D</p>
<p>iOS Apps:</p>
<ul>
<li><a href=""https://itunes.apple.com/us/app/pocket-cheque-helper/id1072718086?ls=1&amp;mt=8"" rel=""nofollow noreferrer"">Pocket Cheque Helper</a></li>
<li><a href=""https://itunes.apple.com/us/app/custimer/id1145514135?l=ja&amp;ls=1&amp;mt=8"" rel=""nofollow noreferrer"">CusTimer</a></li>
<li><a href=""https://itunes.apple.com/us/app/pushy-squares/id1296569593?l=ja&amp;ls=1&amp;mt=8"" rel=""nofollow noreferrer"">Pushy Squares</a></li>
<li><a href=""https://itunes.apple.com/us/app/math-toolbox-free/id1080062807?ls=1&amp;mt=8"" rel=""nofollow noreferrer"">Math Toolbox Free</a></li>
<li><a href=""https://itunes.apple.com/us/app/color-bible/id1099386875?ls=1&amp;mt=8"" rel=""nofollow noreferrer"">Color Bible</a></li>
<li><a href=""https://itunes.apple.com/us/app/ezdiary-my-diary/id1128083826?ls=1&amp;mt=8"" rel=""nofollow noreferrer"">EZDiary</a></li>
<li><a href=""https://itunes.apple.com/us/app/tzoney/id1273711937?l=ja&amp;ls=1&amp;mt=8"" rel=""nofollow noreferrer"">TZoney</a></li>
<li><a href=""https://itunes.apple.com/us/app/directional-snake/id1190418610?l=ja&amp;ls=1&amp;mt=8"" rel=""nofollow noreferrer"">Directional Snake</a></li>
<li><a href=""https://itunes.apple.com/us/app/longlatmap/id1159244120?l=ja&amp;ls=1&amp;mt=8"" rel=""nofollow noreferrer"">LongLatMap</a></li>
<li><a href=""https://itunes.apple.com/us/app/not-really-color-blind/id1173887147?l=ja&amp;ls=1&amp;mt=8"" rel=""nofollow noreferrer"">Not Really Color Blind?</a></li>
<li><a href=""https://apps.apple.com/us/app/%E5%9F%8E%E8%BF%B9%E5%8D%95/id1508727434"" rel=""nofollow noreferrer"">城迹单</a></li>
</ul>
","10881","6027","849","https://i.stack.imgur.com/dfqcw.png?s=128&g=1","","6651855","67051520","1","67051785","","2021-04-12 00:59:35","","10","374","<p>I noticed that <a href=""https://developer.apple.com/documentation/swift/2885064-type"" rel=""noreferrer""><code>type(of:)</code></a> has this unexpected signature:</p>
<pre><code>func type&lt;T, Metatype&gt;(of value: T) -&gt; Metatype
</code></pre>
<p>whereas I would have expected:</p>
<pre><code>func type&lt;T&gt;(of value: T) -&gt; T.Type
</code></pre>
<p>The actual signature somehow takes 2 independent and unbounded type parameters, uses one of them as the parameter type, and the other as the return type. This seems to suggest that I can do something silly like this:</p>
<pre><code>let foo: String = type(of: 1) // T is Int, Metatype is String
</code></pre>
<p>But when I actually tried it,</p>
<blockquote>
<p>Cannot convert value of type 'Int.Type' to specified type 'String'</p>
</blockquote>
<p>So I don't get to specify <code>Metatype</code> after all, even though it's a generic type parameter. I was curious how the compiler did this, so I went to the <a href=""https://github.com/apple/swift/blob/2335eb87f8840aea231f12c3f21a33519354bb13/stdlib/public/core/Builtin.swift#L880"" rel=""noreferrer"">source code</a> and checked. <em>I think</em> what's preventing me from doing that silly thing is this <code>@_semantics</code> annotation:</p>
<pre><code>@_transparent
@_semantics(&quot;typechecker.type(of:)&quot;)
public func type&lt;T, Metatype&gt;(of value: T) -&gt; Metatype {
</code></pre>
<p>I also saw some comments explaining that the implementation written here isn't actually called, and that this is directly handled by the type checker itself. But that doesn't answer my question - <strong>why does <code>type(of:)</code> return a completely unrelated type parameter <code>Metatype</code>, rather than <code>T.Type</code>?</strong></p>
<p>My guess is that there is some edge case where <code>type(of:)</code> will return a completely unrelated type to <code>T</code>, but I have no idea what that is.</p>
","5133585","","","","","2021-04-12 14:08:51","Why does type(of:) return Metatype, rather than T.Type?","<swift><types>","1","1","2","","","CC BY-SA 4.0"
"115145","967227","2009-05-31 16:20:08","CommonsWare","2022-10-29 23:14:28","https://commonsware.com","Pennsylvania, United States","<p>Mark Murphy, founder of CommonsWare, writes a lot.</p>
<h2>Books</h2>
<p>From 2008 through 2021, Mark wrote a series of books on Android app development. These books are now available for free download from <a href=""https://commonsware.com/catalog"" rel=""nofollow noreferrer"">the CommonsWare site</a>.</p>
<p>His most recent books have been focused on second-generation Android app development (Kotlin and the Android Jetpack):</p>
<ul>
<li><p><a href=""https://commonsware.com/Jetpack"" rel=""nofollow noreferrer""><em>Elements of Android Jetpack</em></a>, a new introductory book on Android app development, focused on second-generation techniques.</p>
</li>
<li><p><a href=""https://commonsware.com/AndExplore"" rel=""nofollow noreferrer""><em>Exploring Android</em></a>, a series of step-by-step tutorials for building an Android app from scratch. This book demonstrates app development using Kotlin, coroutines, and the Jetpack libraries.</p>
</li>
<li><p><a href=""https://commonsware.com/Room"" rel=""nofollow noreferrer""><em>Elements of Android Room</em></a>, to help you incorporate Google's reactive object wrapper around SQLite.</p>
</li>
<li><p><a href=""https://commonsware.com/R"" rel=""nofollow noreferrer""><em>Elements of Android R</em></a>, to help you deal with the changes introduced by Android 11 (code-named &quot;R&quot;). It covers everything from scoped storage changes to data access auditing to sharing UIs between apps to bubbles.</p>
</li>
<li><p><a href=""https://commonsware.com/Kotlin"" rel=""nofollow noreferrer""><em>Elements of Kotlin</em></a>, a guide to the Kotlin programming language, which is rapidly gaining in popularity for Android app development.</p>
</li>
<li><p><a href=""https://commonsware.com/Coroutines"" rel=""nofollow noreferrer""><em>Elements of Kotlin Coroutines</em></a>, exploring Kotlin's new
first-class reactive programming system.</p>
</li>
</ul>
<p>In the beginning, Android development was focused on Java and, partially, on the Android Support Library. Mark's earliest books share that focus:</p>
<ul>
<li><p><a href=""https://commonsware.com/Android"" rel=""nofollow noreferrer""><em>The Busy Coder's Guide to Android Development</em></a>, the first and largest book on Android app programming</p>
</li>
<li><p><a href=""https://commonsware.com/AndroidArch"" rel=""nofollow noreferrer""><em>Android's Architecture Components</em></a></p>
</li>
<li><p><a href=""https://commonsware.com/GraphQL"" rel=""nofollow noreferrer""><em>GraphQL and Android</em></a></p>
</li>
</ul>
<h2>Things Other Than Books</h2>
<p>He runs the <a href=""https://jetc.dev"" rel=""nofollow noreferrer""><code>jetc.dev</code></a> weekly newsletter for Jetpack Compose.</p>
<p>Heck, he even has <a href=""http://commonsware.com/blog"" rel=""nofollow noreferrer"">a blog</a>.</p>
<p>All code in Stack Overflow questions, answers, or comments written by Mark Murphy are hereby licensed under <a href=""http://www.apache.org/licenses/LICENSE-2.0"" rel=""nofollow noreferrer"">the Apache Software License 2.0</a>, unless otherwise noted where that code appears on Stack Overflow.</p>
","269231","13193","7886","https://i.stack.imgur.com/wDnd8.png?s=128&g=1","","39846","60859112","1","60978914","","2020-03-25 23:55:55","","10","720","<p>Google's documentation on bound services is promoting <a href=""https://developer.android.com/guide/components/bound-services#Messenger"" rel=""noreferrer"">using a <code>Messenger</code> in lieu of your own custom binding for IPC</a>. So, I am giving that a try for <a href=""https://commonsware.com/blog/2020/03/27/peek-surfacecontrolviewhost-android-r.html"" rel=""noreferrer"">a particular experiment that I am running</a>.</p>

<p>However, a <code>Messenger</code> needs a <code>Handler</code>. Nowadays, a <code>Handler</code> needs a <code>Looper</code>, and I might want one in this scenario for a background thread anyway (as opposed to <code>Looper.getMainLooper()</code>). The only other <code>Looper</code> that I know how to get is to <code>run()</code> a <code>HandlerThread</code> and get a <code>Looper</code> from it.</p>

<p>The documentation for <a href=""https://developer.android.com/reference/android/os/Handler#Handler()"" rel=""noreferrer"">the deprecated non-<code>Looper</code> forms of the <code>Handler</code> constructor</a> have:</p>

<blockquote>
  <p>Implicitly choosing a Looper during Handler construction can lead to bugs where operations are silently lost (if the Handler is not expecting new tasks and quits), crashes (if a handler is sometimes created on a thread without a Looper active), or race conditions, where the thread a handler is associated with is not what the author anticipated. <strong>Instead, use an Executor or specify the Looper explicitly, using Looper#getMainLooper, View#getHandler, or similar.</strong></p>
</blockquote>

<p>(emphasis added)</p>

<p>Is this just strangely-worded documentation, or if there is a recipe for getting a <code>Looper</code> or <code>Handler</code> tied to an <code>Executor</code> that I cannot seem to find?</p>
","115145","","115145","","2020-03-27 23:57:53","2020-04-01 20:48:41","How Do We Get a Looper from an Executor?","<android>","2","0","1","","","CC BY-SA 4.0"
"3731501","190784","2014-06-11 19:11:43","Estus Flask","2022-10-30 00:22:59","","","","11315","5034","414","https://www.gravatar.com/avatar/e4783dfa8ec98c884e61d29f2192ac97?s=128&d=identicon&r=PG&f=1","","4600649","66924519","1","","","2021-04-02 19:49:46","","9","1479","<p>Webpack configuration is a part of Vue CLI setup (can be checked with <code>vue inspect</code>). This is a relevant part of it:</p>
<pre><code>  entry: {
    foo: [
      '.../src/foo.js'
    ],
    barWidget: [
      '.../src/barWidget.js'
    ],
  },
  optimization: {
    splitChunks: {
      cacheGroups: {
        vendors: {
          name: 'chunk-vendors',
          test: /[\\/]node_modules[\\/]/,
          priority: -10,
          chunks: 'initial'
        },
        common: {
          name: 'chunk-common',
          minChunks: 2,
          priority: -20,
          chunks: 'initial',
          reuseExistingChunk: true
        }
      }
    },
    ...
</code></pre>
<p>And HTML output is:</p>
<pre><code>&lt;script type=&quot;text/javascript&quot; src=&quot;/assets/js/chunk-vendors.[HASH].js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;/assets/js/foo.[HASH].js&quot;&gt;&lt;/script&gt;
</code></pre>
<p>and</p>
<pre><code>&lt;script type=&quot;text/javascript&quot; src=&quot;/assets/js/chunk-vendors.[HASH].js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;/assets/js/barWidget.[HASH].js&quot;&gt;&lt;/script&gt;
</code></pre>
<p>There's no problem for <code>foo</code> to have as many script tags as needed, but <code>barWidget</code> is widget entry point that is supposed to be loaded at once with no initial chunk dependencies. My intention is to make <code>barWidget</code> be loaded with a single line of code (hash will likely be disabled for this purpose):</p>
<pre><code>&lt;script type=&quot;text/javascript&quot; src=&quot;/assets/js/barWidget.js&quot;&gt;&lt;/script&gt;
</code></pre>
<p>But in its current state it fails to load if <code>chunk-vendors</code> is omitted.</p>
<p>I'd prefer to keep <code>vendors</code> and <code>common</code> chunks as they are because they are splitted in a reasonable way and can be reused on client side between entry points, but I need <code>barWidget</code> to auto-load a chunk it depends on. A less preferable way would be to disable chunks but for <code>barWidget</code> only, chunk splitting in other entry points should remain unchanged.</p>
<p>A way to reproduce it is basically a new Vue CLI project with 2 entry points added, or any Webpack project with similarly configured splitting.</p>
<p>Here is <a href=""https://anonymous.4open.science/repository/82aa0c68-e9bf-4515-8a4d-0ac05c346b2b/"" rel=""noreferrer"">the project</a> (listed for completeness):</p>
<p><em>package.json</em></p>
<pre><code>{
  &quot;name&quot;: &quot;foobar&quot;,
  &quot;scripts&quot;: {
    &quot;serve&quot;: &quot;vue-cli-service serve&quot;,
    &quot;build&quot;: &quot;vue-cli-service build&quot;
  },
  &quot;dependencies&quot;: {
    &quot;core-js&quot;: &quot;^3.6.5&quot;,
    &quot;vue&quot;: &quot;^3.0.0&quot;
  },
  &quot;devDependencies&quot;: {
    &quot;@vue/cli-plugin-babel&quot;: &quot;~4.5.0&quot;,
    &quot;@vue/cli-service&quot;: &quot;~4.5.0&quot;,
    &quot;@vue/compiler-sfc&quot;: &quot;^3.0.0&quot;
  }
}
</code></pre>
<p><em>vue.config.js</em></p>
<pre><code>module.exports = {
  pages: {
    foo: {
      entry: 'src/foo.js',
      template: 'public/foo.html',
      filename: 'foo.html'
    },
    barWidget: {
      entry: 'src/barWidget.js',
      template: 'public/barWidget.html',
      filename: 'barWidget.html'
    },
  },
};
</code></pre>
<p><em>public/foo.html</em></p>
<p><em>public/barWidget.html</em></p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;body&gt;
    &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p><em>src/foo.js</em></p>
<pre><code>import { createApp } from 'vue'
import Foo from './Foo.vue'

createApp(Foo).mount('#app')
</code></pre>
<p><em>Foo.vue</em></p>
<pre><code>&lt;template&gt;
  &lt;HelloWorld msg=&quot;Foo&quot;/&gt;
&lt;/template&gt;

&lt;script&gt;
import HelloWorld from './components/HelloWorld.vue'

export default {
  components: {
    HelloWorld
  }
}
&lt;/script&gt;
</code></pre>
<p><em>src/barWidget.js</em></p>
<pre><code>import { createApp } from 'vue'
import BarWidget from './BarWidget.vue'

createApp(BarWidget).mount('#app')
</code></pre>
<p><em>BarWidget.vue</em></p>
<pre><code>&lt;template&gt;
  &lt;HelloWorld msg=&quot;Bar widget&quot;/&gt;
&lt;/template&gt;

&lt;script&gt;
import HelloWorld from './components/HelloWorld.vue'

export default {
  components: {
    HelloWorld
  }
}
&lt;/script&gt;
</code></pre>
<ul>
<li><p>Can <code>barWidget</code> be forced to automatically load <code>chunk-vendors.[HASH].js</code> by means of Webpack, without loading it explicitly in the place where <code>barWidget.[HASH].js</code> is being used?</p>
</li>
<li><p>Can <code>barWidget</code> entry point be forced to not use other initial chunks (<code>chunk-vendors</code>, etc) and output self-sufficient <code>barWidget.js</code> bundle, without affecting the way splitting works in other entry points?</p>
</li>
<li><p>Are there other options for the described scenario?</p>
</li>
</ul>
","3731501","","3731501","","2021-04-08 11:11:38","2022-09-28 12:46:44","Auto-load a chunk in entry point","<javascript><vue.js><webpack><vue-cli><webpack-splitchunks>","2","6","0","","","CC BY-SA 4.0"
"45375","336263","2008-12-11 15:06:50","mklement0","2022-10-30 05:53:32","http://www.linkedin.com/in/mklement0","United States","<p>Use the links, if you want to get in touch.</p>
<p>Needless to say, the following is as optional as optional can be on a site built on volunteer contributions, but if you'd like to say thanks for answers that helped you, you can <a href=""https://www.buymeacoffee.com/mklement0"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/WcL4L.png"" alt=""Buy me a coffee"" /></a></p>
","15278","21815","742","","","19375","68136128","1","68136129","","2021-06-25 19:16:49","","9","599","<p>This self-answered question aims to give a <strong>systematic overview of the PowerShell CLI (command-line interface)</strong>, both for <em>Windows PowerShell</em> (<code>powershell.exe</code>) and <a href=""https://github.com/PowerShell/PowerShell/blob/master/README.md"" rel=""noreferrer""><em>PowerShell (Core) v6+</em></a> (<code>pwsh.exe</code> on Windows, <code>pwsh</code> on Unix).</p>
<p>While official help topics exist (see the links in the answer), they do not paint the full picture and lack systematic treatment (as of this writing).</p>
<p>Among others, the following questions are answered:</p>
<ul>
<li><p>How do the edition-specific CLIs differ?</p>
</li>
<li><p>How do I pass PowerShell code to be executed to the CLIs? How do <code>-Command</code> (<code>-c</code>) and <code>-File</code> (<code>-f</code>) differ?</p>
</li>
<li><p>How do the arguments passed to these parameters need to be quoted and escaped?</p>
</li>
<li><p>What character-encoding issues come into play?</p>
</li>
<li><p>How do the PowerShell CLIs handle stdin input, and what stdout / stderr do they produce, and in what format?</p>
</li>
</ul>
","45375","","45375","","2021-06-25 19:53:22","2021-06-27 19:23:13","How do I call the PowerShell CLI robustly, with respect to character encoding, input and output streams, quoting and escaping?","<powershell><character-encoding><command-line-interface><io-redirection><quoting>","1","0","6","","","CC BY-SA 4.0"
"341994","497213","2010-05-15 16:05:56","matt","2022-10-30 03:13:44","http://www.apeth.net/matt/default.html","","<p>Author most recently of <a href=""https://learning.oreilly.com/library/view/ios-15-programming/9781098118495/"" rel=""nofollow noreferrer"">iOS 15 Programming Fundamentals with Swift</a> and of <a href=""https://www.oreilly.com/library/view/programming-ios-14/9781492092162/"" rel=""nofollow noreferrer"">Programming iOS 14</a>.</p>
<p>Code examples from the books available at <a href=""https://github.com/mattneub/Programming-iOS-Book-Examples"" rel=""nofollow noreferrer"">my github repository</a>.</p>
<p>A much earlier edition, <em>Programming iOS 6</em>, is available to read for free at <a href=""http://www.apeth.com/iOSBook/"" rel=""nofollow noreferrer"">http://www.apeth.com/iOSBook/</a>.</p>
<p>And the Swift language chapters of <em>iOS 10 Programming Fundamentals With Swift</em> are available at <a href=""http://www.apeth.com/swiftBook/"" rel=""nofollow noreferrer"">http://www.apeth.com/swiftBook/</a>.</p>
","68440","3276","34867","","","137658","68864640","1","68906532","","2021-08-20 15:28:44","","9","329","<p>The following code is legal in Swift 5.5 (beta):</p>
<pre><code>class Dog {
    var name = &quot;rover&quot;
    var friend : Dog? = nil
}
actor MyActor {
    let dog = Dog()
}
func test() async {
    let act = MyActor()
    act.dog.name = &quot;fido&quot;
    act.dog.friend = Dog()
    act.dog.friend?.name = &quot;fido&quot;
}
</code></pre>
<p>Why is this legal? The dog property is shared state, isn't it? Aren't we in danger of accessing the actor's dog on different threads simultaneously? Isn't that what actors are supposed to protect us from?</p>
<p>Curiously, if the actor's <code>dog</code> property were declared with <code>var</code> instead of <code>let</code>, we'd be compelled to say <code>await</code> during access. Why does that make a difference? Dog is a reference type; it is mutable in place, and it is mutable in exactly the same way regardless of whether it is declared with <code>let</code> or <code>var</code>.</p>
","341994","","","","","2021-08-24 22:02:31","why is it legal to mutate an actor's nonSendable property?","<swift><actor><swift5><structured-concurrency>","1","4","","","","CC BY-SA 4.0"
"642706","277874","2011-03-03 09:33:32","Basil Bourque","2022-10-30 00:53:19","","","<h1>SOreadytohelp</h1>
","34518","24703","6004","https://i.stack.imgur.com/ZWEI3.jpg?s=128&g=1","","322981","62494522","1","62494551","","2020-06-21 04:52:40","","9","1096","<p>The <em>java.time</em> framework built into Java 8 and later includes the <a href=""https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/Clock.html"" rel=""noreferrer""><code>Clock</code></a> class. This class provides several variations useful for testing our date-time handling code.</p>
<pre><code>Instant.now( Clock.fixed​( myInstant , myZoneId ) )
</code></pre>
<p>Which <code>Clock</code> instance represents the default used implicitly in <em>java.time</em> calls where we do not specify a <code>Clock</code>?</p>
<pre><code>Instant.now()
</code></pre>
<p>I imagine the default is either:</p>
<ul>
<li><a href=""https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/Clock.html#systemDefaultZone()"" rel=""noreferrer""><code>systemDefaultZone()</code></a></li>
<li><a href=""https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/Clock.html#systemUTC()"" rel=""noreferrer""><code>systemUTC()</code></a></li>
</ul>
<p>…but the documentation does not say which.</p>
<p>When doing unit-testing, sometimes we need a clock with altered behavior. But when we want to explicitly pass a <code>Clock</code> object that gives default behavior, what do we use?</p>
","642706","","","","","2022-04-23 03:30:31","Which `Clock` implementation is the default in java.time?","<java><clock><java-time>","1","1","1","","","CC BY-SA 4.0"
"642706","277874","2011-03-03 09:33:32","Basil Bourque","2022-10-30 00:53:19","","","<h1>SOreadytohelp</h1>
","34518","24703","6004","https://i.stack.imgur.com/ZWEI3.jpg?s=128&g=1","","322981","61398801","1","61400345","","2020-04-23 23:47:10","","9","2331","<p>I have existing code such as this:</p>

<pre><code>String sql = ""CREATE TABLE "" + tableName + "" (\n"" +
        ""  id_ UUID DEFAULT random_uuid() PRIMARY KEY ,\n"" +
        ""  when_ TIMESTAMP WITHOUT TIME ZONE NOT NULL\n"" +
        ""  duration_ STRING NOT NULL\n"" +
        "");"";
</code></pre>

<p>…in a project in IntelliJ 2020.1.1 (preview) Ultimate edition where the JDK settings are configured for language level <code>14 (Preview) - Records, patters, text blocks</code>. </p>

<p>So I expected IntelliJ to offer a conversion to text blocks among the items display when I click on the yellow light bulb that appears next to this line of code. But I see no such offer.</p>

<p><a href=""https://i.stack.imgur.com/f18mc.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/f18mc.png"" alt=""screen shot of pop-up menu displayed by clicking on yellow light bulb next to this line of code""></a></p>

<p>I am surprised to not find such an offer, as the JetBrains company claims to support <a href=""https://openjdk.java.net/jeps/368"" rel=""noreferrer""><em>JEP 368: Text Blocks (Second Preview)</em></a> in their 2020.1 version of IntelliJ, as discussed <a href=""https://blog.jetbrains.com/idea/2020/03/java-14-and-intellij-idea/"" rel=""noreferrer"">here</a> and <a href=""https://blog.jetbrains.com/idea/2019/11/java-13-and-intellij-idea/"" rel=""noreferrer"">here</a>. </p>

<p>➥ Does IntelliJ offer some way to convert old string concatenation to text blocks? </p>
","642706","","","","","2020-04-24 02:56:16","Can IntelliJ convert my old string concatenation to new Text Block feature previewed in Java 14?","<java><intellij-idea><java-text-blocks>","1","1","","","","CC BY-SA 4.0"
"251311","243982","2010-01-15 05:58:53","zerkms","2022-10-29 22:49:04","http://cv.zerkms.com/","Wellington, New Zealand","<p>Yet another software developer</p>

<p><a href=""https://cv.zerkms.com/"" rel=""nofollow noreferrer""><a href=""https://cv.zerkms.com/"" rel=""nofollow noreferrer"">https://cv.zerkms.com/</a></a></p>

<p>#SOreadytohelp</p>
","26537","10224","6505","","","91548","67222143","1","67228976","","2021-04-22 23:44:27","","9","255","<p><a href=""https://tc39.es/ecma262/#sec-terms-and-definitions-number-value"" rel=""noreferrer"">As per the standard</a> ES implements numbers as IEEE754 doubles.</p>
<p>And per <a href=""https://www.binaryconvert.com/result_double.html?decimal=053055050054055049056048053048053054056053048051050057054"" rel=""noreferrer"">https://www.binaryconvert.com/result_double.html?decimal=053055050054055049056048053048053054056053048051050057054</a> and other programming languages <a href=""https://play.golang.org/p/5QyT7iPHNim"" rel=""noreferrer"">https://play.golang.org/p/5QyT7iPHNim</a> it looks like the <code>5726718050568503296</code> value can be represented exactly without losing precision.</p>
<p>Why it loses 3 significant digits in JS (reproduced in latest stable google chrome and firefox)</p>
<p>This question was triggered initially from the <a href=""https://stackoverflow.com/q/67221981/251311"">replicate javascript unsafe numbers in golang</a></p>
<p>The value is definitely representible in double IEEE754, see how naked bits are converted to a float64 in Go: <a href=""https://play.golang.org/p/zMspidoIh2w"" rel=""noreferrer"">https://play.golang.org/p/zMspidoIh2w</a></p>
","251311","","616815","","2021-04-23 00:54:28","2021-04-23 11:15:51","Why is 5726718050568503296 truncated in JS","<javascript><floating-point><ieee-754>","1","62","1","","","CC BY-SA 4.0"
"209103","525781","2009-11-11 22:30:27","Frank van Puffelen","2022-10-30 03:47:47","","San Francisco, CA","<p>I am an engineer for Firebase at Google.</p>

<p>I respond equally well to being called ""Frank"" or ""puf"".</p>
","117878","18703","4177","","","72426","66072471","1","66072472","","2021-02-06 00:41:12","","9","865","<p>I see a lot of tutorials, documentation and questions about using the Firebase Realtime Database on Android talk about the <code>addListenerForSingleValueEvent</code> method. This method reads the value from the database once, which is what I want to do.</p>
<p>But in the auto-complete in my IDE and in the documentation I also see a method called <code>get()</code>, which also seems to read a value from the database once. From the name and signature it seems simpler, and more modern (as it returns a <code>Task</code>). But since the other method is mentioned so much more, I want to make sure I’m using the right code.</p>
<p>So what is the difference between <code>get()</code> and <code>addListenerForSingleValueEvent</code>, why is the latter mentioned so much more in documentation, tutorials and questions, and which one should I use when I want to read a value from the database once?</p>
","209103","","","","","2021-02-06 21:10:48","What is the difference between get() and addListenerForSingleValueEvent?","<java><android><firebase><kotlin><firebase-realtime-database>","1","0","","","","CC BY-SA 4.0"
"3731501","190784","2014-06-11 19:11:43","Estus Flask","2022-10-30 00:22:59","","","","11315","5034","414","https://www.gravatar.com/avatar/e4783dfa8ec98c884e61d29f2192ac97?s=128&d=identicon&r=PG&f=1","","4600649","63646183","1","","","2020-08-29 10:56:06","","9","251","<p>A function initially doesn't allow to change read-only properties (e.g. <code>name</code> in ES6):</p>
<pre><code>let foo = function (n: number) {
    return n;
}

foo.name = 'not foo'; // Cannot assign to 'name' because it is a read-only property
</code></pre>
<p>In order to work this around, <code>Writable</code> utility type from the reference was used:</p>
<pre><code>type Writable&lt;T&gt; = {
  -readonly [K in keyof T]: T[K];
};
</code></pre>
<p>1. Read-only <code>name</code> is not affected by an intersection:</p>
<pre><code>let writableFoo: typeof foo &amp; { name: string } = foo;
writableFoo.name = 'not foo'; // Cannot assign to 'name' because it is a read-only property
</code></pre>
<p>2. <code>Writable</code> doesn't get <code>name</code> from function type and is not callable:</p>
<pre><code>let writableFoo: Writable&lt;typeof foo&gt; = foo;
writableFoo.name = 'not foo'; // Property 'name' does not exist on type 'Writable&lt;(n: number) =&gt; number&gt;'
writableFoo(1); // This expression is not callable
</code></pre>
<p>3. <code>Writable</code> gets <code>name</code> from <code>Function</code> but is still not callable:</p>
<pre><code>let writableFoo: Writable&lt;Function&gt; = foo;
writableFoo.name = 'not foo';
writableFoo(1); // This expression is not callable
</code></pre>
<p>4. <code>Omit</code> uses index signature and is not callable either:</p>
<pre><code>let writableFoo: Omit&lt;typeof foo, 'name'&gt; &amp; { name: string } = foo;
writableFoo.name = 'not foo';
writableFoo(1); // This expression is not callable
</code></pre>
<p>The objective here is to type <code>writableFoo</code> to keep <code>writableFoo</code> callable and allow <code>name</code> to be changed, preferably without modifying other properties with <code>Writable</code>. It doesn't try to solve a specific coding problem but investigate specified type issues.</p>
<p>Why does 1 not affect <code>readonly</code> modifier by intersection type?</p>
<p>Why does 2 not get <code>name</code> despite it's recognized for <code>typeof foo</code> as <code>foo.name</code>?</p>
<p>How can 2-4 get call signature while removing <code>readonly</code> modifier from <code>name</code>?</p>
","3731501","","3731501","","2020-08-29 12:06:31","2020-09-27 12:21:15","Remove read-only modifier for callable signature","<typescript>","1","7","2","","","CC BY-SA 4.0"
"190277","198624","2009-10-15 00:43:05","Ben Bolker","2022-10-30 00:05:02","http://www.math.mcmaster.ca/bolker","Hamilton, Canada","<p>mostly an R user these days</p>
","41124","22685","672","","","64461","68369058","1","","","2021-07-13 20:39:03","","9","227","<p><strong>tl;dr</strong> I want to run <code>devtools::test()</code> on a package and have it skip tests etc. <em>as though it were running on CRAN</em>, but I can't  figure out how.</p>
<p>As I understand it, <code>testthat::skip_on_cran()</code> checks for the environment variable <code>NOT_CRAN</code>, which should be set to a value of &quot;true&quot; if the tests are <em>not</em> being run on CRAN (to back this up, the underlying test function <code>testthat:::on_cran()</code> is equal to</p>
<pre class=""lang-r prettyprint-override""><code>!identical(Sys.getenv(&quot;NOT_CRAN&quot;), &quot;true&quot;)
</code></pre>
<p>I am trying to use <code>skip_on_cran()</code> to skip some tests. I want to confirm that these tests will <strong>actually be skipped on CRAN</strong>. I have a line</p>
<pre class=""lang-r prettyprint-override""><code>cat(&quot;ON CRAN:&quot;, testthat:::on_cran(), &quot;\n&quot;)
</code></pre>
<p>in my test file so that I can see what R/<code>testthat</code> thinks is going on.</p>
<p>The environment variables get set the way I want (i.e., the output includes <code>ON CRAN: FALSE</code>)/the tests get skipped properly)  if I use</p>
<pre class=""lang-r prettyprint-override""><code>source([testfile], echo = TRUE)
</code></pre>
<p>(i.e., without doing anything special to set or unset the <code>NOT_CRAN</code> environment variable beforehand) or</p>
<pre class=""lang-r prettyprint-override""><code>withr::with_envvar(c(NOT_CRAN = &quot;false&quot;), 
    devtools::test_active_file(&quot;tests/testthat/test-bootMer.R&quot;))
</code></pre>
<p>(if I run <code>test_active_file()</code> without wrapping it, I get <code>ON CRAN: FALSE</code>).</p>
<p>However, I don't see a way to run all the tests (via <code>devtools::test()</code>) in a similar way. In other words, <strong>I can't figure out how to run <code>devtools::test()</code> in &quot;ON CRAN&quot; mode</strong>.  <code>test()</code> doesn't have an explicit argument for this (it has <code>...</code> which is &quot;additional arguments passed to wrapped functions&quot;, but I can't see anything relevant digging downward), and using <code>withr::with_envvar()</code> doesn't seem to help. <code>devtools::check()</code> <em>does</em> have an explicit <code>env_vars</code> argument, but I would like to be able to run the tests without going through the whole package check procedure ...</p>
<p>I'm sorry this isn't fully reproducible; if requested I can try to build a minimal package that will display the behaviour ...</p>
","190277","","190277","","2021-07-13 20:58:40","2022-09-22 16:45:20","confused by testthat and skip_on_cran()","<r><devtools><cran><testthat>","1","2","","","","CC BY-SA 4.0"
"140750","196388","2009-07-18 19:02:44","William Pursell","2022-10-30 04:30:16","","Denver, CO, USA","","12443","3881","1765","","","47502","66013007","1","","","2021-02-02 15:47:35","","9","488","<p>Perhaps I'm misinterpreting my results, but:</p>
<pre><code>#include &lt;stdio.h&gt;

int
main(void)
{
    char buf[32] = &quot;&quot;;
    int x;
    x = scanf(&quot;%31[^\0]&quot;, buf);
    printf(&quot;x = %d, buf=%s&quot;, x, buf);
}
$ printf 'foo\n\0bar' | ./a.out
x = 1, buf=foo
</code></pre>
<p>Since the string literal <code>&quot;%31[^\0]&quot;</code> contains an embedded null, it seems that it should be treated the same as <code>&quot;%31[^&quot;</code>, and the compiler should complain that the <code>[</code> is unmatched.  Indeed, if you replace the string literal, clang gives:</p>
<p><code>warning: no closing ']' for '%[' in scanf format string [-Wformat]</code></p>
<p>Why does it work to embed a null character in the string literal passed to scanf?</p>
<p>-- EDIT --</p>
<p>The above is undefined behavior and merely happens to &quot;work&quot;.</p>
","140750","","140750","","2021-02-02 16:45:52","2021-02-02 22:00:36","Why can a null character be embedded in a conversion specifier for scanf?","<c><scanf>","3","3","0","","","CC BY-SA 4.0"
"2877241","279611","2013-10-13 23:45:02","Vlad from Moscow","2022-10-29 12:09:21","http://cpp.forum24.ru/","Moscow, Russia","<p><strong>Unemployed.</strong><br />Do you need a programmer? Email me at vlad.moscow@mail.ru</p>
<hr />
I liked the IBM mainframe PL/X language. It is me who wrote CTRACE record filtering for the IBM mainframe NFS server using the OOP features of the language.
<hr />
***News:*** The defect of the C++ STL relative to class std::basic_string was rectified as I proposed. See [Defect of the C++ Standard relative to basic_string][1]
<p><em><strong>News:</strong></em> In the ACCU Overload #126 (April, 2015) there is published my article <strong>&quot;iterator_pair - A Simple and Useful Iterator Adapter&quot;</strong>. I hope it will be interesting for C++ programmers.<a href=""https://accu.org/journals/overload/23/126/overload126.pdf"" rel=""nofollow noreferrer"">See it here</a>  You may leave your comments to the article <a href=""http://cpp.forum24.ru/?1-10-0-00000000-000-0-0-1428232189"" rel=""nofollow noreferrer"">in this thread</a></p>
","22446","4931","2861","https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1","","3433601","61278180","1","61283275","","2020-04-17 18:22:41","","9","189","<p>Consider the following demonstrative program.</p>

<pre><code>#include &lt;iostream&gt;

int main()
{
    typedef float T;

    0.f.T::~T();
}
</code></pre>

<p>This program is compiled by <code>Microsoft Visual Studio Community 2019</code>.</p>

<p>But <code>clang</code> and <code>gcc</code> issue an error like this</p>

<pre><code>prog.cc:7:5: error: unable to find numeric literal operator 'operator""""f.T'
    7 |     0.f.T::~T();
      |     ^~~~~
</code></pre>

<p>If to write the expression like <code>( 0.f ).T::~T()</code> then all three compilers compile the program.</p>

<p>So a question arises: is this record <code>0.f.T::~T()</code> syntactically valid? And if not, then what syntactical rule is broken? </p>
","2877241","","2222","","2020-04-18 01:54:01","2020-04-18 01:54:01","Valid syntax of calling pseudo-destructor for a floating constant","<c++><syntax><floating-point><c++17><pseudo-destructor>","2","10","3","","","CC BY-SA 4.0"
"366904","233969","2010-06-11 06:57:36","Cody Gray","2022-10-30 05:39:13","","Austin, TX, USA","
<p>Molecular biologist and historian by formal training, but software developer by passion. Also now by career.</p>
<p><strong>Need a smart, motivated, and hard-working desktop or embedded developer? <em>Hire me!</em></strong>
Send mail to my first name at codygray.com.</p>
<p>My deepest areas of expertise are the x86 microarchitecture and the Windows API, but my interests span multiple platforms and diverse disciplines. At work, I design, build, and maintain speciality embedded hardware and software to perform data-acquisition and real-time signal processing from sensors, primarily targeting the aerospace industry. These days, I mostly write code in C++ or assembly. I also know C, C#, VB.NET, VB 6, and a variety of shell-scripting languages. Passionate about developing robust, efficient systems.</p>
<p>I enjoy the challenge of solving problems and learn new things quickly. I've an excellent eye for quality and detail. I'm here because I find great reward in teaching others and because I want to make the Internet a better place.</p>
<p>Brevity is not my strong suit. <a href=""https://lifehacker.com/why-you-should-be-kind-instead-of-nice-1846124841"" rel=""nofollow noreferrer"">Kind, not nice</a>. I have strong ideas and make a habit of openly challenging assumptions. People don't like having their assumptions challenged, so this sometimes leads to confrontation. Nothing I say is meant to offend; please don't take it personally. Progress cannot happen without confrontation, so think for yourself and question everything.</p>
<p>If you have a technical question you think I might be able to answer, please ask it on the site so that everyone may contribute and benefit. <strong>If you disagree with one of the actions I've taken as a moderator, please bring it up for discussion on <a href=""https://meta.stackoverflow.com/"">Meta Stack Overflow</a></strong> (do not send me a personal email about on-site moderation actions; those get ignored, if you're lucky).</p>

","71952","19526","48610","https://i.stack.imgur.com/uoQ6t.png?s=256&amp;g=1","","152400","59557910","1","","","2020-01-02 03:11:58","","9","6389","<p>I have been attempting to detect peaks in sinusoidal time-series data <strong>in real time</strong>, however I've had no success thus far. I cannot seem to find a real-time algorithm that works to detect peaks in sinusoidal signals with a reasonable level of accuracy. I either get no peaks detected, or I get a zillion points along the sine wave being detected as peaks.</p>

<p><strong>What is a good real-time algorithm for input signals that resemble a sine wave, and may contain some random noise?</strong></p>

<hr>

<p>As a simple test case, consider a stationary, sine wave that is always the same frequency and amplitude. (The exact frequency and amplitude don't matter; I have arbitrarily chosen a frequency of 60 Hz, an amplitude of +/&minus;&nbsp;1 unit, at a sampling rate of 8 KS/s.) The following MATLAB code will generate such a sinusoidal signal:</p>

<pre><code>dt = 1/8000;
t  = (0:dt:(1-dt)/4)';
x  = sin(2*pi*60*t);
</code></pre>

<p>Using <a href=""https://stackoverflow.com/a/22640362"">the algorithm developed and published by Jean-Paul</a>, I either get no peaks detected (left) or a zillion ""peaks"" detected (right):</p>

<p><a href=""https://i.stack.imgur.com/b5oxV.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/b5oxVm.png"" alt=""""></a> <a href=""https://i.stack.imgur.com/W1Ssp.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/W1Sspm.png"" alt=""""></a></p>

<p>I've tried just about every combination of values for these 3 parameters that I could think of, following <a href=""https://stackoverflow.com/a/22640362/"">the ""rules of thumb"" that Jean-Paul gives</a>, but I have so far been unable to get my expected result.</p>

<hr>

<p>I found an alternative algorithm, <a href=""http://billauer.co.il/peakdet.html"" rel=""noreferrer"">developed and published by Eli Billauer</a>, that <em>does</em> give me the results that I want&mdash;<em>e.g.</em>:</p>

<p><a href=""https://i.stack.imgur.com/ETguk.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/ETgukm.png"" alt=""""></a></p>

<p>Even though Eli Billauer's algorithm is much simpler and does tend to reliably produce the results that I want, it is not suitable for real-time applications.</p>

<hr>

<p>As another example of a signal that I'd like to apply such an algorithm to, consider the test case given by Eli Billauer for his own algorithm:</p>

<pre><code>t = 0:0.001:10;
x = 0.3*sin(t) + sin(1.3*t) + 0.9*sin(4.2*t) + 0.02*randn(1, 10001);
</code></pre>

<p>This is a more unusual (less uniform/regular) signal, with a varying frequency and amplitude, but still generally sinusoidal. The peaks are plainly obvious to the eye when plotted, but hard to identify with an algorithm.</p>

<hr>

<p><strong>What is a good real-time algorithm to correctly identify the peaks in a sinusoidal input signal?</strong> I am not really an expert when it comes to signal processing, so it would be helpful to get some rules of thumb that consider sinusoidal inputs. Or, perhaps I need to modify e.g. Jean-Paul's algorithm itself in order to work properly on sinusoidal signals. If that's the case, what modifications would be required, and how would I go about making these?</p>
","366904","","2431885","","2020-01-02 14:08:06","2021-04-13 11:49:30","Real-time peak detection in noisy sinusoidal time-series","<algorithm><matlab><time-series><signal-processing><data-analysis>","2","3","17","","","CC BY-SA 4.0"
"2380830","229261","2013-05-14 08:33:02","Bathsheba","2022-10-29 16:50:08","","Mayfair, London","<p>I'm an equity partner at an asset management firm in London.</p>
<p>I read mathematics at Cambridge and have been using C and C++ for many years. I have an affection for Java. In my opinion, Microsoft Excel is the best application ever written.</p>
","19409","9014","8853","https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1","","2764833","67619477","1","67619540","","2021-05-20 11:29:56","","9","135","<p>Is</p>
<pre><code>int main()
{
    int a;
    int b = (a = 0, a) + (a = 1, a);
}
</code></pre>
<p>defined? Without the <code>, a</code> in each term, the program behaviour is clearly undefined due to multiple unsequenced writes to <code>a</code>, but don't the <code>,</code> introduce adequate sequencing points?</p>
","2380830","","","","","2021-05-20 11:43:49","Is (a = 0, a) + (a =1, a) undefined behaviour for int a?","<c><language-lawyer>","1","6","1","","","CC BY-SA 4.0"
"878126","114239","2011-08-04 08:05:33","android developer","2022-10-29 09:41:55","","Israel","<p>Really like to develop Android apps &amp; libraries on my spare time.</p>

<p>Github website:
<a href=""https://github.com/AndroidDeveloperLB/"" rel=""nofollow noreferrer"">https://github.com/AndroidDeveloperLB/</a> </p>

<p>My spare time apps:
<a href=""https://play.google.com/store/apps/developer?id=AndroidDeveloperLB"" rel=""nofollow noreferrer"">https://play.google.com/store/apps/developer?id=AndroidDeveloperLB</a></p>
","54765","1073","47","https://i.stack.imgur.com/D5dZW.jpg","","796053","64856558","1","","","2020-11-16 10:46:01","","8","525","<h2>Background</h2>
<p>I work on an app that among other things, allows to contact with businesses found via Nearby-search, navigate to them, visit their websites...</p>
<p>Once the user performs any action on a single business, it's supposed to be added to the recents-list, allowing the user to do it again, or see the information about the business again.</p>
<p>If the user called some business, next time he visits the recents-list, it should be shown there as a list-item, along with the name, phone number, etc...</p>
<p>Same goes if it was navigated to.</p>
<h2>The problem</h2>
<p>I've noticed in the terms a very big limitation of caching, saying that only the place-ID is allowed to be store permenantly, and the basic geographic-coordinate (lat-lng) can be stored for 30 days.</p>
<p>Weird thing is that it says it's ok to store only place-ID and coordinate, but I couldn't find what's the use of these if there is no mapping and context whatsover with them. And of course if you add context, you actually do store more information. For example, if you've called the place and showed the name, you already know both, so both should be mapped to the place-ID...</p>
<p>Links:</p>
<ol>
<li><a href=""https://cloud.google.com/maps-platform/terms/maps-service-terms#5.-places-api"" rel=""noreferrer"">https://cloud.google.com/maps-platform/terms/maps-service-terms#5.-places-api</a></li>
</ol>
<blockquote>
<p>Caching. Customer can temporarily cache latitude (lat) and longitude
(lng) values from the Places API for up to 30 consecutive calendar
days, after which Customer must delete the cached latitude and
longitude values. Customer can cache Places API Place ID (place_id)
values</p>
</blockquote>
<ol start=""2"">
<li><a href=""https://cloud.google.com/maps-platform/terms/#3.-license"" rel=""noreferrer"">https://cloud.google.com/maps-platform/terms/#3.-license</a></li>
</ol>
<blockquote>
<p>No Caching. Customer will not cache Google Maps Content except as
expressly permitted under the Maps Service Specific Terms.</p>
</blockquote>
<ol start=""3"">
<li><a href=""https://developers.google.com/places/web-service/policies#pre-fetching,-caching,-or-storage-of-content"" rel=""noreferrer"">https://developers.google.com/places/web-service/policies#pre-fetching,-caching,-or-storage-of-content</a></li>
</ol>
<blockquote>
<p>Applications using the Places API are bound by the Google Maps
Platform Terms of Service. Section 3.2.3(a) and (b) of the terms
states that you must not pre-fetch, index, store, or cache any Content
except under the limited conditions stated in the terms.</p>
<p>Note that the place ID, used to uniquely identify a place, is exempt
from the caching restriction. You can therefore store place ID values
indefinitely. The place ID is returned in the place_id field in Places
API responses.</p>
</blockquote>
<h2>What I've found</h2>
<p>Sadly I couldn't find more information about this.</p>
<p>What I was told by someone is that caching should be fine for 24 hours as a part of &quot;fair-use&quot; to avoid re-queries of things that you already got, similar to how web browsers handle queries. This can help in case the user wishes to see information he already got just a few seconds ago, for example.</p>
<p>I was also told that if it's local on the user's own device, it should also be fine, as it's not published outside, and as the user could have saved the information anyway, manually.</p>
<p>For each of those claims, I couldn't find a reference.</p>
<p>This is very important here, as there has to be some mapping between the items on the &quot;recents&quot; list of the app and the actual place. For example, if it was a phone call, it has to at least have place-id (of the place) and the phone number (of the call). But it should also show the name of the place, as the user just showed this information and expect to see it there too, instead of just a phone number.</p>
<h2>The questions</h2>
<ol>
<li><p>Weird thing is that it says it's ok to store only place-ID and coordinate, but what's the use of these if there is no mapping whatsover with them? What could I do with this exactly?</p>
</li>
<li><p>What is the fair-use of caching in this case?</p>
</li>
<li><p>Is it true that caching is ok in general for 24 hours, for all APIs ?</p>
</li>
<li><p>Can I also store in storage if it's very relevant as the user did something related to the query (dialed the phone number of the place, so should be possible to see this information right on the list, with other places)? I mean to store basic, relevant information I got from Google Places, for each recent-list-item ? Maybe I could set the basic information with an expired-date, while letting the place-ID stay, and when it's expired, only then to re-query?</p>
</li>
</ol>
<p>Otherwise, it would mean the app will need to re-query all places each time the list is shown, to get a mapping between phone numbers and each place's information, and could easily cost a lot of money.</p>
","878126","","9652169","","2020-11-17 10:36:34","2022-10-20 05:26:58","For Google places API, what are the ""fair use"" cases of caching?","<android><google-maps><caching><google-places-api>","0","0","1","","","CC BY-SA 4.0"
"251311","243982","2010-01-15 05:58:53","zerkms","2022-10-29 22:49:04","http://cv.zerkms.com/","Wellington, New Zealand","<p>Yet another software developer</p>

<p><a href=""https://cv.zerkms.com/"" rel=""nofollow noreferrer""><a href=""https://cv.zerkms.com/"" rel=""nofollow noreferrer"">https://cv.zerkms.com/</a></a></p>

<p>#SOreadytohelp</p>
","26537","10224","6505","","","91548","60330730","1","60766965","","2020-02-21 00:57:14","","8","564","<p>What is the correct way to type an ""interface"" in python 3?</p>

<p>In the following sample:</p>

<pre><code>class One(object):
    def foo(self) -&gt; int:
        return 42


class Two(object):
    def foo(self) -&gt; int:
        return 142


def factory(a: str):
    if a == ""one"":
        return One()

    return Two()
</code></pre>

<p>what would be the correct way to type the return value of the <code>factory</code> function?</p>

<p>It should be something like ""A type with a single method named <code>foo</code> that accepts no arguments and returns an integer"".</p>

<p>But not sure I can find how to do that.</p>

<p><strong>UPD</strong>: this question is <strong>exclusively dedicated</strong> to typing.</p>
","251311","","251311","","2020-03-20 00:21:28","2020-03-20 07:30:01","Typing interfaces","<python><python-3.x><types>","2","0","","","","CC BY-SA 4.0"
"251311","243982","2010-01-15 05:58:53","zerkms","2022-10-29 22:49:04","http://cv.zerkms.com/","Wellington, New Zealand","<p>Yet another software developer</p>

<p><a href=""https://cv.zerkms.com/"" rel=""nofollow noreferrer""><a href=""https://cv.zerkms.com/"" rel=""nofollow noreferrer"">https://cv.zerkms.com/</a></a></p>

<p>#SOreadytohelp</p>
","26537","10224","6505","","","91548","63937663","1","63938605","","2020-09-17 12:03:52","","8","272","<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>class Foo {
  static v = 123;

  static bar = () =&gt; this.v;
}

console.log(Foo.bar());</code></pre>
</div>
</div>
</p>
<p>I expect this code to return <code>undefined</code>, because arrow functions are lexically scoped, hence <code>this</code> must be eagerly bound to the outer scope.</p>
<p>Yet, it returns <code>123</code>.</p>
<p>Why exactly does this happen?</p>
<p>And yep, I understand it's still stage 3, but still - why does the proposed standard behave like that? (See <a href=""https://babeljs.io/docs/en/babel-plugin-transform-class-properties"" rel=""nofollow noreferrer"">https://babeljs.io/docs/en/babel-plugin-transform-class-properties</a> for another example.)</p>
","251311","","1048572","","2020-10-29 20:38:20","2020-10-29 20:38:20","Why are arrow functions as static members values not lexically scoped?","<javascript><static><es6-class><ecmascript-next><class-fields>","1","10","1","","","CC BY-SA 4.0"
"209103","525781","2009-11-11 22:30:27","Frank van Puffelen","2022-10-30 03:47:47","","San Francisco, CA","<p>I am an engineer for Firebase at Google.</p>

<p>I respond equally well to being called ""Frank"" or ""puf"".</p>
","117878","18703","4177","","","72426","66843397","1","66843398","","2021-03-28 16:02:53","","8","2975","<p>I have an app where one user hosts a game, and then other users can vote on questions from the host. From the moment the host posts the question, the players have 20 seconds to vote.</p>
<p>How can I show a countdown timer on all player's screens and keep them synchronized with the host?</p>
","209103","","209103","","2021-03-28 16:09:52","2021-03-28 16:09:52","How to implement a distributed countdown timer in Firebase","<javascript><firebase-realtime-database>","1","2","5","","","CC BY-SA 4.0"
"341994","497213","2010-05-15 16:05:56","matt","2022-10-30 03:13:44","http://www.apeth.net/matt/default.html","","<p>Author most recently of <a href=""https://learning.oreilly.com/library/view/ios-15-programming/9781098118495/"" rel=""nofollow noreferrer"">iOS 15 Programming Fundamentals with Swift</a> and of <a href=""https://www.oreilly.com/library/view/programming-ios-14/9781492092162/"" rel=""nofollow noreferrer"">Programming iOS 14</a>.</p>
<p>Code examples from the books available at <a href=""https://github.com/mattneub/Programming-iOS-Book-Examples"" rel=""nofollow noreferrer"">my github repository</a>.</p>
<p>A much earlier edition, <em>Programming iOS 6</em>, is available to read for free at <a href=""http://www.apeth.com/iOSBook/"" rel=""nofollow noreferrer"">http://www.apeth.com/iOSBook/</a>.</p>
<p>And the Swift language chapters of <em>iOS 10 Programming Fundamentals With Swift</em> are available at <a href=""http://www.apeth.com/swiftBook/"" rel=""nofollow noreferrer"">http://www.apeth.com/swiftBook/</a>.</p>
","68440","3276","34867","","","137658","66129103","1","66129225","","2021-02-10 00:07:13","","8","6902","<p><code>rbenv install --list-all</code> shows me, among many other things of course,</p>
<pre><code>3.0.0-dev
3.0.0-preview1
3.0.0-preview2
</code></pre>
<p>But where is <code>3.0.0</code> itself, the actual final release? I'd like to try it out. Not all announced features made it into the previews so I need the real thing.</p>
","341994","","341994","","2021-02-10 03:00:54","2022-08-09 20:05:11","where is ruby 3.0.0 on rbenv","<ruby><rbenv>","3","0","2","","","CC BY-SA 4.0"
"2901002","765465","2013-10-20 20:27:26","jezrael","2022-10-30 00:02:52","","Bratislava, Slovakia","<p>Please don't hesitate to contact me:</p>
<pre><code>import pandas as pd
d = {0: [1, 1, 1, 1, 1, 1, 0, 0, 1, 0, 0, 1, 1, 0, 0, 0, 0, 
         1, 0, 1, 0, 1, 0, 0, 0, 0, 1, 0, 1, 0, 1, 1, 1, 0], 
     1: [16, 1, 0, 15, 7, 14, 13, 7, 3, 10, 14, 8, 10, 3,  5, 4, 8, 13, 6, 2, 
         11, 11, 0, 12, 9, 16, 12, 15, 9, 1, 4, 5, 6, 2], 
     2: [32, 32, 32, 32, 32, 33, 46, 64, 97, 97, 99, 99, 100, 101, 101, 102, 103, 
         103, 103, 104, 105, 105, 106, 108, 109, 109, 110, 111, 111, 111, 112, 112, 121, 122]}
print (pd.DataFrame(d).pivot(1,0,2).applymap(chr).agg(''.join))
</code></pre>
<p>Most time repeating dupes, not easy find:</p>
<pre><code>pivot dupe
https://stackoverflow.com/q/47152691/
booelan indexing dupe
https://stackoverflow.com/q/17071871
idxmax + groupby dupe
https://stackoverflow.com/q/15705630
idxmin + groupby dupe
https://stackoverflow.com/q/23394476
melt dupe
https://stackoverflow.com/q/28654047
explode dupe
https://stackoverflow.com/q/12680754
cumcount dupe
https://stackoverflow.com/q/23435270
map dupe
https://stackoverflow.com/q/24216425
groupby+size+unstack dupe
https://stackoverflow.com/q/39132742
https://stackoverflow.com/q/38278603
sorting inplace dupe
https://stackoverflow.com/q/42613581
factorize dupe
https://stackoverflow.com/q/39357882
groupby+size dupe
https://stackoverflow.com/q/19384532
groupby+ mean dupe
https://stackoverflow.com/q/30482071
transform sum dupe
https://stackoverflow.com/q/30244952
transform size dupe
https://stackoverflow.com/q/37189878
keyerror dupe
https://stackoverflow.com/q/43736163
merge/map dupe
https://stackoverflow.com/q/53010406
value_count dupe
https://stackoverflow.com/q/15411158
numpy select, where dupe
https://stackoverflow.com/q/19913659
wide_to_long dupe
https://stackoverflow.com/q/55766565
reset_index dupe
https://stackoverflow.com/q/36932759
</code></pre>
","154583","26641","1687","https://i.stack.imgur.com/hMDvl.jpg?s=128&g=1","","3465245","61517878","1","61518029","","2020-04-30 07:17:54","","8","476","<p>I have 2d numpy array:</p>

<pre><code>arr = np.array([[0.1, 0.1, 0.3, 0.4, 0.5], 
                [0.06, 0.1, 0.1, 0.1, 0.01], 
                [0.24, 0.24, 0.24, 0.24, 0.24], 
                [0.2, 0.25, 0.3, 0.12, 0.02]])
print (arr)
[[0.1  0.1  0.3  0.4  0.5 ]
 [0.06 0.1  0.1  0.1  0.01]
 [0.24 0.24 0.24 0.24 0.24]
 [0.2  0.25 0.3  0.12 0.02]]
</code></pre>

<p>I want filter top N values, so I use <code>argsort</code>:</p>

<pre><code>N = 2
arr1 = np.argsort(-arr, kind='mergesort') &lt; N
print (arr1)
[[False False False  True  True]
 [ True False False  True False] &lt;- first top 2 are duplicates
 [ True  True False False False]
 [False  True  True False False]]
</code></pre>

<p>It working nice, at least not top duplicates, like for row 2.</p>

<p>Expected output:</p>

<pre><code>print (arr1)
[[False False False  True  True]
 [False  True  True False False]
 [ True  True False False False]
 [False  True  True False False]]
</code></pre>

<p>Is possible some faster way for handle it?</p>
","2901002","","2901002","","2020-04-30 07:27:11","2020-04-30 07:27:15","Top N values in 2d array with duplicates to mask","<arrays><numpy><sorting><duplicates>","1","2","0","","","CC BY-SA 4.0"
"2684539","195172","2013-08-15 02:08:44","Jarod42","2022-10-29 22:52:13","https://bitbucket.org/jarod42/ccccc","France","<p>All original source snippets I post on stackoverflow are under <a href=""https://opensource.org/licenses/MIT"" rel=""nofollow noreferrer"">MIT licences</a>.</p>
","13201","2031","806","https://i.stack.imgur.com/xTMIL.jpg?s=128&g=1","","3176925","69976189","1","","","2021-11-15 14:41:08","","8","311","<p>Can we have variadic concepts before variadic template parameters?</p>
<p>I meant, is following legal:</p>
<pre><code>template &lt;class, std::size_t&gt; concept Any = true;

template &lt;class&gt; struct n_ary;

template &lt;std::size_t... Is&gt;
struct n_ary&lt;std::index_sequence&lt;Is...&gt;&gt;
{
  template &lt;Any&lt;Is&gt;... Ls, typename ... Ts&gt;
  void operator()(Ls..., Ts...) {}
};
</code></pre>
<p><a href=""https://godbolt.org/z/faPzWbcrP"" rel=""noreferrer"">Demo</a> (accepted only by clang)</p>
<p>Note: Without the extra <code>Ts</code>, it is accepted by all compilers <a href=""https://godbolt.org/z/9Yx668ePs"" rel=""noreferrer"">Demo</a>.</p>
","2684539","","2684539","","2021-11-15 14:55:22","2021-12-06 22:46:26","Can we have variadic concepts before variadic template parameters?","<c++><language-lawyer><variadic-templates><c++20><c++-concepts>","1","7","1","","","CC BY-SA 4.0"
"13302","715271","2008-09-16 18:09:15","marc_s","2022-10-29 20:33:48","","Bern, Switzerland","<p>Note to all SO beginner: please <strong>absolutely read</strong> Jon Skeet's <a href=""https://codeblog.jonskeet.uk/2010/08/29/writing-the-perfect-question/"" rel=""nofollow noreferrer"">helpful hints on how to write a good question</a> (or <strong>at least</strong> <a href=""https://codeblog.jonskeet.uk/2012/11/24/stack-overflow-question-checklist/"" rel=""nofollow noreferrer"">his short version here</a>) - one that has a chance that someone can answer it.</p>
<hr/>
<p>A senior C# / SQL Server / Entity Framework backend developer for line-of-business applications (mostly ASP.NET / ASP.NET Core).
</p>
","137408","29422","33134","","","7633","60644544","1","60674947","","2020-03-11 21:16:43","","8","10084","<p>I'm writing a new ASP.NET Core Web API, and one of my requirements is to be able to leverage EF Core 3.1 to grab the next value of a <strong>sequence</strong> defined in my SQL Server as the ID for a record I need to store.</p>

<p>I'm struggling to find a way to do this - in EF 6.x, I used a method directly on the <code>DbContext</code> descendant like this:</p>

<pre><code>public int GetNextSequenceValue()
{
    var rawQuery = Database.SqlQuery&lt;int&gt;(""SELECT NEXT VALUE FOR dbo.TestSequence;"");
    var task = rawQuery.SingleAsync();
    int nextVal = task.Result;

    return nextVal;
}
</code></pre>

<p>and for EF Core up to 2.1, I would have been able to use <code>Database.ExecuteSqlCommand()</code> to run a SQL snippet and get back results. But it seems, in EF Core 3.x, I'm out of luck....</p>

<p>I know there are the <code>.FromSqlRaw()</code> and <code>.FromSqlInterpolated</code> methods on the <code>DbSet</code> - but since I only need to return the next value of a sequence (an <code>INT</code>), that's not going to fly. And I also know these methods also exist on the <code>context.Database</code> level which looks like it would be really close to what I had in EF 6.x - but here, those methods will <strong>only</strong> return the number of rows affected - I haven't found a way to send back the new value from the <code>SEQUENCE</code>.</p>

<p>Can it really be that in EF Core 3.x, I have to actually resort back to way-old ADO.NET code to fetch that value?? Is there <strong>REALLY</strong> no way to execute an arbitrary SQL snippet and get back some results from the context??</p>
","13302","","5202563","","2020-03-13 17:17:06","2022-03-24 15:10:31","Getting ""NEXT VALUE FOR"" for a SQL Server sequence using EF Core 3.1 - impossible?","<sql-server><entity-framework-core><sequence><ef-core-3.1>","5","0","3","","","CC BY-SA 4.0"
"106159","100277","2009-05-13 09:56:56","Matthew Watson","2022-10-29 19:01:33","","Edinburgh, United Kingdom","","7030","6887","103","https://i.stack.imgur.com/Qfp6z.png","","37150","63017136","1","","","2020-07-21 14:48:37","","8","3803","<h2>Background</h2>
<p>We are currently going though the process of converting our codebase from .Net Framework 4.8 to .Net Core 3.1.</p>
<p>Some of the code is very performance-sensitive. One example is some code that applies a Hamming window filter; I was somewhat dismayed to discover that the .Net Core 3.1-compiled code runs around 30% more slowly than the same code compiled for .Net Framework 4.8.</p>
<h2>To reproduce</h2>
<p>I created a multitargeted SDK-style project as follows:</p>
<pre><code>&lt;Project Sdk=&quot;Microsoft.NET.Sdk&quot;&gt;
  &lt;PropertyGroup&gt;
    &lt;OutputType&gt;Exe&lt;/OutputType&gt;
    &lt;TargetFrameworkS&gt;net48;netcoreapp3.1&lt;/TargetFrameworkS&gt;
    &lt;Optimize&gt;true&lt;/Optimize&gt;
  &lt;/PropertyGroup&gt;
  &lt;PropertyGroup Condition=&quot;'$(Configuration)|$(Platform)'=='Release|AnyCPU'&quot;&gt;
    &lt;PlatformTarget&gt;x86&lt;/PlatformTarget&gt;
  &lt;/PropertyGroup&gt;
&lt;/Project&gt;
</code></pre>
<p>The code for this project is as follows (the important code is inside the <code>for (int iter = ...</code> loop):</p>
<pre><code>using System;
using System.Diagnostics;

namespace FooBar
{
    class Program
    {
        static void Main()
        {
#if NET48
            Console.WriteLine(&quot;NET48: Is 64 bits = &quot; + Environment.Is64BitProcess);
#elif NETCOREAPP3_1
            Console.WriteLine(&quot;NETCOREAPP3_1: Is 64 bits = &quot; + Environment.Is64BitProcess);
#else
            Invalid build, so refuse to compile.
#endif
            double[] array = new double[100_000_000];
            var sw = Stopwatch.StartNew();

            for (int trial = 0; trial &lt; 100; ++trial)
            {
                sum(array);
            }

            Console.WriteLine(&quot;Average ms for calls to sum() = &quot; + sw.ElapsedMilliseconds/100);
            Console.ReadLine();
        }

        static double sum(double[] array)
        {
            double s = 0;

            for (int i = 0; i &lt; array.Length; ++i)
            {
                s += array[i];
            }

            return s;
        }
    }
}
</code></pre>
<h2>Results</h2>
<p>Timing a <em>release</em> x86 build for .Net Core 3.1 and .Net Framework 4.8 I get the following results:</p>
<p><strong>.Net Core 3.1:</strong></p>
<pre><code>NETCOREAPP3_1: Is 64 bits = False
Average ms for calls to sum() = 122
</code></pre>
<p><strong>.Net Framework 4.8:</strong></p>
<pre><code>NET48: Is 64 bits = False
Average ms for calls to sum() = 96
</code></pre>
<p>Thus the .Net Core 3.1 results are around 30% slower than .Net Framework 4.8.</p>
<p><strong>NOTE:</strong> This only affects the x86 build. For an x64 build, the times are similar between .Net Framework and .Net Core.</p>
<p>I find this most disappointing, particularly since I thought that .Net Core would be likely to have better optimization ...</p>
<p>Can anyone suggest a way to speed up the .Net Core output so that it is in the same ballpark as .Net Framework 4.8?</p>
<hr />
<p>[EDIT] I've updated the code and the .csproj to the latest version I'm using for testing. I added some code to indicate which target and platform is running, just to be certain the right version is being run.</p>
<p>With this edit, I am basically just timing how long it takes to sum all 100,000,000 elements of a large double[] array.</p>
<p>I can reproduce this on both my PCs and my laptop, which are running the latest Windows 10 and Visual Studio 2019 installations + latest .Net Core 3.1.</p>
<p>However, given that other people cannot reproduce this, I will take Lex Li's advice and post this on the Microsoft github page.</p>
","106159","","106159","","2020-07-22 12:40:30","2020-07-22 12:40:30","Code runs 30% slower in .Net Core compared to .Net Framework - any way to speed things up?","<c#><performance><.net-core-3.1><.net-4.8>","2","15","3","","","CC BY-SA 4.0"
"87234","484966","2009-04-05 06:44:56","GManNickG","2022-10-29 19:01:36","","","<p>Hi.</p>
<hr />
<p>SO Milestones:</p>
<ul>
<li>2nd user to get the <a href=""http://stackoverflow.com/badges/158/stl?userid=87234"">silver stl badge</a>.</li>
<li>3rd user to get the <a href=""http://stackoverflow.com/badges/109/templates?userid=87234"">silver templates badge</a>.</li>
<li>15th user to get the <a href=""http://stackoverflow.com/badges/49/c?userid=87234"">gold c++ badge</a>.</li>
<li>27th user to get the <a href=""http://stackoverflow.com/badges/52/c?userid=87234"">silver c badge</a>.</li>
<li>102nd user to get the <a href=""http://stackoverflow.com/badges/146/legendary?userid=87234"">legendary badge</a>.</li>
</ul>
<hr />
<p>Favorite answers:</p>
<ul>
<li><a href=""http://stackoverflow.com/questions/3582001/advantages-of-using-forward/3582313#3582313"">Advantage of using forward</a></li>
<li><a href=""http://stackoverflow.com/a/14169897/87234"">Is it possible to hash pointers in portable C++03 code?</a> (Value vs. value representation)</li>
<li><a href=""http://stackoverflow.com/questions/3181766/how-far-to-go-with-a-strongly-typed-language/3181803#3181803"">How far to go with a strongly typed language?</a></li>
<li><a href=""http://stackoverflow.com/questions/3280410/c-why-doesnt-delete-destroy-anything/3280465#3280465"">[C++] Why doesn't delete destroy anything ?</a></li>
<li><a href=""http://stackoverflow.com/questions/2474018/when-does-invoking-a-member-function-on-a-null-instance-result-in-undefined-behav/2474021#2474021"">When does invoking a member function on a null instance result in undefined behavior?</a></li>
<li><a href=""http://stackoverflow.com/questions/5547852/string-literals-not-allowed-as-non-type-template-parameters/5548016#5548016"">String literals not allowed as non type template parameters</a></li>
<li><a href=""http://stackoverflow.com/questions/3489138/c-how-do-i-prevent-a-function-from-accepting-a-pointer-that-is-allocated-in-li/3489248#3489248"">C++: How do I prevent a function from accepting a pointer that is allocated in-line?</a></li>
<li><a href=""http://stackoverflow.com/questions/4259885/why-do-i-see-strange-values-when-i-print-uninitialized-variables/4259991#4259991"">Why do I see strange values when I print uninitialized variables?</a></li>
<li><a href=""http://stackoverflow.com/questions/5610298/question-about-pointer-increment/5610311#5610311"">Question about pointer increment</a></li>
<li><a href=""http://stackoverflow.com/questions/6122094/building-boostoptions-from-a-string-boostany-map/6123962#6123962"">Building boost::options from a string/boost::any map</a> (Type-erasure)</li>
</ul>
","57671","13090","1102","https://i.stack.imgur.com/FkjBe.png?s=128&g=1","","31692","69309346","1","69309617","","2021-09-24 03:54:02","","8","194","<p>Consider the following (on Rust &gt;= 1.54):</p>
<pre class=""lang-rust prettyprint-override""><code>pub fn assign_refs(i: &amp;mut u32, j: &amp;mut u32) -&gt; u32 {
    *i = 42;
    *j = 7;
    *i
}
</code></pre>
<p>Per no aliasing among mutable refs, this compiles to:</p>
<pre><code>        mov     dword ptr [rdi], 42
        mov     dword ptr [rsi], 7
        mov     eax, 42
        ret
</code></pre>
<p>Now consider:</p>
<pre class=""lang-rust prettyprint-override""><code>pub fn assign_ptrs(i: *mut u32, j: *mut u32) -&gt; u32 {
    *unsafe {&amp;mut *i} = 42;
    *unsafe {&amp;mut *j} = 7;
    unsafe {*i}
}
</code></pre>
<p>(Note only one mutable ref exists at once, so this is not undefined behavior if <code>i == j</code>).</p>
<p>Since pointers may alias, the last expression must reload:</p>
<pre><code>        mov     dword ptr [rdi], 42
        mov     dword ptr [rsi], 7
        mov     eax, dword ptr [rdi]
        ret
</code></pre>
<p>This next example is undefined behavior if <code>j</code> points at <code>i</code>:</p>
<pre><code>pub fn assign_undefined_behavior_if_same(i: &amp;mut u32, j: *mut u32) -&gt; u32 {
    *i = 42;
    *unsafe {&amp;mut *j} = 7;  // UB if j points to i, second mut ref.
    *i
}
</code></pre>
<p>For that reason, it compiles to the same code as <code>assign_refs</code>, returning the &quot;wrong&quot; value.</p>
<hr />
<p>My question is regarding:</p>
<pre><code>pub fn assign_mixed(i: &amp;mut u32, j: *mut u32) -&gt; u32 {
    *i = 42;

    let i_ptr = i as *mut u32;
    std::convert::identity(i);  // *Not* a reborrow, a move and drop.

    // i no longer exists.
    // *i = 42; // use of moved value: `i`

    // At this point, why not the same as assign_ptrs?
    *unsafe {&amp;mut *j} = 7;

    // Assumes that i_ptr is not aliased just because it came from a &amp;mut?
    unsafe {*i_ptr}
}
</code></pre>
<p>This compiles to the same thing as <code>assign_refs</code>, and I find that surprising.</p>
<p>The unique aliasing reference <code>i</code> ends halfway through the function. At that point, why are <code>i_ptr</code> and <code>j</code> not treated identically as if we were in <code>assign_ptrs</code>? Pointers are allowed to alias, so <code>j</code> could point at <code>i</code>/<code>i_ptr</code> <em>and</em> <code>i</code> no longer exists.</p>
<p>For reference, one can call this like:</p>
<pre><code>fn test() {
    let mut i = 0;

    let mut i_ref = &amp;mut i;
    let i_ptr = i_ref as *mut u32;
    assign_mixed(i_ref, i_ptr);
}
</code></pre>
<p>Is this an over-aggressive noalias propagation?</p>
","87234","","7076153","","2021-09-24 04:05:55","2021-09-24 09:23:05","Over-aggressive noalias on pointer created from mut ref?","<rust>","1","12","","","","CC BY-SA 4.0"
"13302","715271","2008-09-16 18:09:15","marc_s","2022-10-29 20:33:48","","Bern, Switzerland","<p>Note to all SO beginner: please <strong>absolutely read</strong> Jon Skeet's <a href=""https://codeblog.jonskeet.uk/2010/08/29/writing-the-perfect-question/"" rel=""nofollow noreferrer"">helpful hints on how to write a good question</a> (or <strong>at least</strong> <a href=""https://codeblog.jonskeet.uk/2012/11/24/stack-overflow-question-checklist/"" rel=""nofollow noreferrer"">his short version here</a>) - one that has a chance that someone can answer it.</p>
<hr/>
<p>A senior C# / SQL Server / Entity Framework backend developer for line-of-business applications (mostly ASP.NET / ASP.NET Core).
</p>
","137408","29422","33134","","","7633","63788646","1","63790022","","2020-09-08 06:59:53","","8","5060","<p>Still trying to get a full grasp on the Azure Pipelines and what I can do with those...</p>
<p>I've managed to finally get my little .NET Core command line utility built with Azure Pipelines - now trying to publish it as a build artifact.</p>
<p>With this YAML, I can build and package the tool:</p>
<pre><code>- task: DotNetCoreCLI@2
  displayName: 'dotnet build'
  inputs:
    command: 'build'
    projects: '$(solution)'

- task: DotNetCoreCLI@2
  displayName: 'dotnet publish'
  inputs:
    command: publish
    publishWebProjects: False
    arguments: '--configuration $(BuildConfiguration) --output $(Build.ArtifactStagingDirectory)'
    zipAfterPublish: True

- task: PublishBuildArtifacts@1
  inputs:
    pathtoPublish: '$(Build.ArtifactStagingDirectory)' 
    artifactName: 'MyTool_LatestBuild'
</code></pre>
<p>But in the published build artifacts, I only get a file <code>a.zip</code> - is there any way I can influence the name of that ZIP archive?? I'd really love to have something like <code>MyTool_2020_Sep_08.zip</code> or <code>MyTool_v1.5.7.zip</code> something.... but how can I do that?? Can't seem to find anything very useful anywhere on the interwebs ... any inputs?</p>
<p>Thanks!</p>
","13302","","","","","2021-08-05 11:21:23","Naming resulting ZIP archive in Azure Pipelines build?","<.net-core><azure-pipelines>","3","0","3","","","CC BY-SA 4.0"
"5866580","125961","2016-02-01 07:27:34","RavinderSingh13","2022-10-30 05:42:39","https://www.linkedin.com/in/ravinder-singh-6a7b5ba1/","Velachery, Chennai, Tamil Nadu, India","<p>With GOD's grace on me I am hardworking, cool person, want to become a techy in IT. I believe in &quot;Live and let others live&quot; concept. I love helping people on SO and LOVE learning from people too. Thanks GOD for everything.</p>
<p>If you LIKE my answers, you could give me Good recommendation in <a href=""https://www.linkedin.com/in/ravinder-singh-6a7b5ba1/"" rel=""nofollow noreferrer"">my Linkdin profile</a>.</p>
","13083","8955","4703","https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1","","7750510","64034156","1","64034157","","2020-09-23 18:26:24","","8","1160","<p><em><strong>Short problem description:</strong></em> I had created two new AWS EC2 server instances on Redhat Linux and Ubuntu operating system. I was trying to login to it through SSH via Putty but was getting errors(detailed errors further in question). This is just a short description.</p>
<p><em><strong>Detailed problem description:</strong></em> I generated a new .pem file after creating a free tier Amazon EC2(Elastic Compute Cloud) server of Ubuntu 20 O.S version. Then I have used <code>PuttyGen</code> software in my Windows-10 O.S p.c. While trying to login through putty it was giving me an error as shown in the following error description, due to this I was not able to login to aws machines, I have further investigated the issue and all details of troubleshooting steps are mentioned in detailed manner in this self answered question(other suggestions/solutions are welcome).</p>
<p><em><strong>Error's description:</strong></em></p>
<p><code>&quot;Server refused our key&quot;</code> On terminal AND <code>&quot;NO supported authentication method available(server sent:public ke;gssapi-with-mic)&quot;</code></p>
<p><a href=""https://i.stack.imgur.com/5sGRK.jpg"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/5sGRK.jpg"" alt=""enter image description here"" /></a></p>
","5866580","","5866580","","2020-09-24 07:33:02","2020-09-24 07:33:02","Troubleshooting ssh login failure for AWS EC2 using powershell","<amazon-web-services><powershell><shell><amazon-ec2><ssh>","2","0","2","","","CC BY-SA 4.0"
"3001761","110312","2013-11-17 14:20:38","jonrsharpe","2022-10-29 21:21:13","https://blog.jonrshar.pe","London, United Kingdom","<p>he/him or they/them</p>
<p>Software developer, guitarist, cyclist &amp; photographer based in London, UK. These are my opinions; if you don't like them, I have others.</p>
<p>Should you be overwhelmed by gratitude, you can <a href=""https://ko-fi.com/textbook"" rel=""nofollow noreferrer"">buy me a coffee</a>!</p>
<hr />
<p>The following premium content is only available to 10k-plus users (and therefore can't be revenge-downvoted):</p>
<ul>
<li><a href=""https://stackoverflow.com/q/57498273/3001761"">Is it possible to migrate a Heroku addon from one app to another?</a></li>
<li><a href=""https://stackoverflow.com/q/58683135/3001761"">Installing Google Chrome in the Travis Bionic build environment</a></li>
<li><a href=""https://stackoverflow.com/q/72999443/3001761"">&quot;Only file and data URLs are supported by the default ESM loader&quot; in Node 14</a></li>
</ul>
<p>If you wish you had access to this but don't have the requisite rep, blame the garbage human beings who vote on <em>people</em> rather than <em>content</em>. If you're reading this because you <em>are</em> one of those people looking for something to downvote, please throw yourself and your computer into separate bins.</p>
","58368","1391","121923","https://i.stack.imgur.com/feZwC.jpg?s=128&g=1","","3597514","68024935","1","68024936","","2021-06-17 18:42:45","","8","13988","<p>In my tests using Supertest and MSW I've noticed that, although they still pass successfully, MSW has started showing warnings for the requests that Supertest is making. For example (see files to reproduce at the end of the post):</p>
<pre><code>$ npm t

> msw-example@1.0.0 test
> jest

 PASS  ./app.test.js
  password API
    ✓ exposes a number of words (76 ms)

  console.warn
    [MSW] Warning: captured a request without a matching request handler:

      • GET http://127.0.0.1:55984/api

    If you still wish to intercept this unhandled request, please create a request handler for it.
    Read more: <a href=""https://mswjs.io/docs/getting-started/mocks"" rel=""nofollow noreferrer"">https://mswjs.io/docs/getting-started/mocks</a>

      at onUnhandledRequest (node_modules/msw/node/lib/index.js:7599:21)
      at node_modules/msw/node/lib/index.js:7630:13
      at fulfilled (node_modules/msw/node/lib/index.js:50:58)

Test Suites: 1 passed, 1 total
Tests:       1 passed, 1 total
Snapshots:   0 total
Time:        1.005 s
Ran all test suites.</code></pre>
<p>The request <code>GET http://127.0.0.1:55984/api</code> is one that <em>Supertest</em> is making to the app, which is the whole point of the test, not one that MSW needs to be handling. These warnings weren't shown when I first wrote the tests, either.</p>
<p>The linked page shows how to create a handler, but I don't want MSW to handle these requests. Why did this start happening, and how can I stop it showing warnings for the <code>&quot;/api&quot;</code> calls?</p>
<hr />
<p><code>package.json</code>:</p>
<pre class=""lang-json prettyprint-override""><code>{
  &quot;name&quot;: &quot;msw-example&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;description&quot;: &quot;&quot;,
  &quot;main&quot;: &quot;index.js&quot;,
  &quot;scripts&quot;: {
    &quot;test&quot;: &quot;jest&quot;
  },
  &quot;keywords&quot;: [],
  &quot;author&quot;: &quot;&quot;,
  &quot;license&quot;: &quot;ISC&quot;,
  &quot;dependencies&quot;: {
    &quot;axios&quot;: &quot;^0.21.1&quot;,
    &quot;express&quot;: &quot;^4.17.1&quot;
  },
  &quot;devDependencies&quot;: {
    &quot;jest&quot;: &quot;^27.0.4&quot;,
    &quot;msw&quot;: &quot;^0.29.0&quot;,
    &quot;supertest&quot;: &quot;^6.1.3&quot;
  }
}
</code></pre>
<p><code>app.js</code>:</p>
<pre class=""lang-js prettyprint-override""><code>const axios = require(&quot;axios&quot;);
const express = require(&quot;express&quot;);

const app = express();

app.get(&quot;/api&quot;, (_, res) =&gt; {
  axios.get(&quot;https://api.pwnedpasswords.com/range/ABC12&quot;)
    .then(() =&gt; res.json({ words: 3 }))
    .catch((err) =&gt; res.sendStatus(500));
});

module.exports = app;
</code></pre>
<p><code>app.test.js</code>:</p>
<pre class=""lang-js prettyprint-override""><code>const { rest } = require(&quot;msw&quot;);
const { setupServer } = require(&quot;msw/node&quot;);
const request = require(&quot;supertest&quot;);

const app = require(&quot;./app&quot;);

const server = setupServer(
  rest.get(&quot;https://api.pwnedpasswords.com/range/:range&quot;, (req, res, ctx) =&gt; {
    return res(ctx.status(200), ctx.text(&quot;&quot;));
  }),
);

describe(&quot;password API&quot;, () =&gt; {
  beforeAll(() =&gt; server.listen());

  beforeEach(() =&gt; server.resetHandlers());

  afterAll(() =&gt; server.close());

  it(&quot;exposes a number of words&quot;, () =&gt; {
    return request(app).get(&quot;/api&quot;).expect(200).then((res) =&gt; {
      expect(res.body.words).toBe(3);
    });
  });
});
</code></pre>
","3001761","","3001761","","2021-11-17 15:15:28","2022-09-01 12:51:43","MSW logging warnings for unhandled Supertest requests","<supertest><msw>","2","0","3","","","CC BY-SA 4.0"
"37213","301979","2008-10-16 01:43:36","duffymo","2022-10-30 01:08:51","","","<p>#SOreadytohelp Former mechanical engineer who migrated from FORTRAN to C to C++ to Java to Kotlin.   Combining math with programming to do statistics and machine learning using Python, R, and Kotlin.  PyTorch, fast.ai, and others.  90th to earn Legendary badge.</p>
","34845","8033","7154","","","16878","65224327","1","","","2020-12-09 20:23:26","","8","9476","<p>I'm upgrading a set of legacy applications to Spring Boot 2.4.0, running on OpenJDK 8, deployed to Pivotal Cloud Foundry.</p>
<p>The app and all its unit tests ran perfectly under Spring 2.3.4-RELEASE before I started this upgrade.</p>
<p>There was work to be done right off the bat: Spring Boot 2.4.0 brings in JUnit 5.x, so I had to fix all the JUnit 4.x tests to use the new annotations and classes.</p>
<p>After fixing all the tests I tried to run in IntelliJ 2020.2.  All the tests failed, for the same reason: <code>java.lang.IllegalStateException: Failed to load ApplicationContext</code>.  The root of the stack trace gives this cause:</p>
<pre><code>Caused by: java.lang.ClassNotFoundException: org.springframework.boot.context.properties.ConfigurationBeanFactoryMetadata
</code></pre>
<p>They removed a fundamental class from Spring Boot for the sake of Kubernetes, from the sound of it.  I'm not sure I see why.</p>
<p>I did a Google search and found <a href=""https://spring.io/blog/2020/08/14/config-file-processing-in-spring-boot-2-4"" rel=""noreferrer"">this</a> explanation and fix.</p>
<p>I added <code>spring.config.use-legacy-processing</code> to my <code>application.yml</code> and a test <code>application.properties</code> file:</p>
<pre><code>spring:
  config:
    use-legacy-processing: true
</code></pre>
<p>Still no joy - all the tests fail.</p>
<p>I'm confused by <a href=""https://github.com/spring-projects/spring-boot/issues/19860"" rel=""noreferrer"">other links</a> I've seen.  Is this an issue with <code>spring-cloud-dependencies</code>?  I'm reading that there might an issue with the <code>Hoxton</code> version.  Do I need to add it to my app?  It never needed this dependency before the upgrade:</p>
<pre><code>        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
            &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;
            &lt;version&gt;Hoxton.SR9&lt;/version&gt;
            &lt;type&gt;pom&lt;/type&gt;
            &lt;scope&gt;import&lt;/scope&gt;
        &lt;/dependency&gt;
</code></pre>
<p>The problem is bigger than the tests.  If I ignore them and try to run the app I still fail:</p>
<pre><code>ERROR [main]: Application run failed |ApplicationName=Risk_Advisor | sourcedfrom=ERROR 
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'configurationPropertiesBeans' defined in class path resource [org/springframework/cloud/autoconfigure/ConfigurationPropertiesRebinderAutoConfiguration.class]: Post-processing of merged bean definition failed; nested exception is java.lang.IllegalStateException: Failed to introspect Class [org.springframework.cloud.context.properties.ConfigurationPropertiesBeans] from ClassLoader [sun.misc.Launcher$AppClassLoader@18b4aac2]
</code></pre>
<p>The root cause is the same:</p>
<pre><code>java.lang.NoClassDefFoundError: org/springframework/boot/context/properties/ConfigurationBeanFactoryMetadata
</code></pre>
","37213","","37213","","2020-12-09 21:18:54","2022-01-22 17:08:03","Upgrading To Spring Boot 2.4.0 Breaks Legacy Applications","<spring-boot><intellij-idea><spring-cloud><junit5>","3","10","","","","CC BY-SA 4.0"
"155423","347433","2009-08-12 21:18:55","Shepmaster","2022-10-29 18:21:46","http://jakegoulding.com","Pittsburgh, PA","<p>Cofounder of the world's first <a href=""http://integer32.com/"" rel=""nofollow noreferrer"">Rust consultancy</a> — we are available to help you and your company with any and everything related to Rust! We also produce the <a href=""https://www.manning.com/livevideo/rust-in-motion?a_aid=jgoulding&amp;a_bid=6a993c2e"" rel=""nofollow noreferrer"">Rust in Motion video series</a> for Manning.</p>
<p>I enjoy programming in a variety of languages, starting in C, touching on Java, moving to Ruby and most recently Rust. I also dabble in frontend frameworks like React and Redux.</p>
<p>I love helping other people one-on-one and seeing them learn.</p>
<p>To make sure that the software I write is useful and used, I am interested in interpersonal communication, as well as methodologies like Agile.</p>
","33648","6877","4462","https://i.stack.imgur.com/hjwrE.png","","879267","59618213","1","59619026","","2020-01-06 19:59:28","","8","2759","<p>When writing a declarative (<code>macro_rules!</code>) macro, we automatically get <em>macro hygiene</em>. In this example, I declare a variable named <code>f</code> in the macro and pass in an identifier <code>f</code> which becomes a local variable:</p>

<pre><code>macro_rules! decl_example {
    ($tname:ident, $mname:ident, ($($fstr:tt),*)) =&gt; {
        impl std::fmt::Display for $tname {
            fn fmt(&amp;self, f: &amp;mut std::fmt::Formatter&lt;'_&gt;) -&gt; std::fmt::Result {
                let Self { $mname } = self;
                write!(f, $($fstr),*)
            }
        }
    }
}

struct Foo {
    f: String,
}

decl_example!(Foo, f, (""I am a Foo: {}"", f));

fn main() {
    let f = Foo {
        f: ""with a member named `f`"".into(),
    };
    println!(""{}"", f);
}
</code></pre>

<p>This code compiles, but if you look at the partially-expanded code, you can see that there's an apparent conflict:</p>

<pre><code>impl std::fmt::Display for Foo {
    fn fmt(&amp;self, f: &amp;mut std::fmt::Formatter&lt;'_&gt;) -&gt; std::fmt::Result {
        let Self { f } = self;
        write!(f, ""I am a Foo: {}"", f)
    }
}
</code></pre>

<p>I am writing the equivalent of this declarative macro as a procedural macro, but do not know how to avoid potential name conflicts between the user-provided identifiers and identifiers created by my macro. As far as I can see, the generated code has no notion of hygiene and is just a string:</p>

<p><strong>src/main.rs</strong></p>

<pre><code>use my_derive::MyDerive;

#[derive(MyDerive)]
#[my_derive(f)]
struct Foo {
    f: String,
}

fn main() {
    let f = Foo {
        f: ""with a member named `f`"".into(),
    };
    println!(""{}"", f);
}
</code></pre>

<p><strong>Cargo.toml</strong></p>

<pre><code>[package]
name = ""example""
version = ""0.1.0""
edition = ""2018""

[dependencies]
my_derive = { path = ""my_derive"" }
</code></pre>

<p><strong>my_derive/src/lib.rs</strong></p>

<pre><code>extern crate proc_macro;

use proc_macro::TokenStream;
use quote::quote;
use syn::{parse_macro_input, DeriveInput, Meta, NestedMeta};

#[proc_macro_derive(MyDerive, attributes(my_derive))]
pub fn my_macro(input: TokenStream) -&gt; TokenStream {
    let input = parse_macro_input!(input as DeriveInput);

    let name = input.ident;

    let attr = input.attrs.into_iter().filter(|a| a.path.is_ident(""my_derive"")).next().expect(""No name passed"");
    let meta = attr.parse_meta().expect(""Unknown attribute format"");
    let meta = match meta {
        Meta::List(ml) =&gt; ml,
        _ =&gt; panic!(""Invalid attribute format""),
    };
    let meta = meta.nested.first().expect(""Must have one path"");
    let meta = match meta {
        NestedMeta::Meta(Meta::Path(p)) =&gt; p,
        _ =&gt; panic!(""Invalid nested attribute format""),
    };
    let field_name = meta.get_ident().expect(""Not an ident"");

    let expanded = quote! {
        impl std::fmt::Display for #name {
            fn fmt(&amp;self, f: &amp;mut std::fmt::Formatter&lt;'_&gt;) -&gt; std::fmt::Result {
                let Self { #field_name } = self;
                write!(f, ""I am a Foo: {}"", #field_name)
            }
        }
    };

    TokenStream::from(expanded)
}
</code></pre>

<p><strong>my_derive/Cargo.toml</strong></p>

<pre><code>[package]
name = ""my_derive""
version = ""0.1.0""
edition = ""2018""

[lib]
proc-macro = true

[dependencies]
syn = ""1.0.13""
quote = ""1.0.2""
proc-macro2 = ""1.0.7""
</code></pre>

<p>With Rust 1.40, this produces the compiler error:</p>

<pre class=""lang-none prettyprint-override""><code>error[E0599]: no method named `write_fmt` found for type `&amp;std::string::String` in the current scope
 --&gt; src/main.rs:3:10
  |
3 | #[derive(MyDerive)]
  |          ^^^^^^^^ method not found in `&amp;std::string::String`
  |
  = help: items from traits can only be used if the trait is in scope
  = note: this error originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)
help: the following trait is implemented but not in scope; perhaps add a `use` for it:
  |
1 | use std::fmt::Write;
  |
</code></pre>

<p>What techniques exist to namespace my identifiers from identifiers outside of my control?</p>
","155423","","155423","","2020-01-06 20:38:26","2020-12-07 16:41:13","How can I create hygienic identifiers in code generated by procedural macros?","<rust><macros><hygiene><rust-proc-macros>","2","2","1","","","CC BY-SA 4.0"